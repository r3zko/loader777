{
    "status": 200,
    "content": 
"bG9jYWwgbGlicyA9IHsNCiAgICBbJ2dhbWVzZW5zZS9odHRwJ10gPSAnZ2FtZXNlbnNlIC8gaHR0cCcsDQogICAgWydnYW1lc2Vuc2UvcHVpJ10gPSAnZ2FtZXNlbnNlIC8gcHVpJywNCiAgICBbJ2dhbWVzZW5zZS9iYXNlNjQnXSA9ICdnYW1lc2Vuc2UgLyBiYXNlNjQnLA0KICAgIFsnZ2FtZXNlbnNlL2VudGl0eSddID0gJ2dhbWVzZW5zZSAvIGVudGl0eScsDQogICAgWydnYW1lc2Vuc2UvaW1hZ2VzJ10gPSAnZ2FtZXNlbnNlIC8gaW1hZ2VzJywNCiAgICBbJ2dhbWVzZW5zZS9kaXNjb3JkX3dlYmhvb2tzJ10gPSAnZ2FtZXNlbnNlIC8gZGlzY29yZF93ZWJob29rcycsDQogICAgWydnYW1lc2Vuc2UvY2xpcGJvYXJkJ10gPSAnZ2FtZXNlbnNlIC8gY2xpcGJvYXJkJywNCiAgICBbJ2dhbWVzZW5zZS9hbnRpYWltX2Z1bmNzJ10gPSAnZ2FtZXNlbnNlIC8gYW50aWFpbV9mdW5jcycNCn0NCg0KbG9jYWwgbGliX25vX3N1YiA9IHt9DQoNCmZvciBpLCB2IGluIHBhaXJzKGxpYnMpIGRvDQogICAgaWYgbm90IHBjYWxsKHJlcXVpcmUsIGkpIHRoZW4NCiAgICAgICAgbGliX25vX3N1YlsjbGliX25vX3N1YiArIDFdID0gbGlic1tpXQ0KICAgIGVuZA0KZW5kDQoNCmZvciBpPTEsICNsaWJfbm9fc3ViIGRvDQogICAgcHJpbnQoIlxuU3Vic2NyaWJlIGxpYnJhcmllczpcbiIgLi4gdGFibGUuY29uY2F0KGxpYl9ub19zdWIsICIsIFxuIikpDQplbmQNCg0KbG9jYWwgZmZpID0gcmVxdWlyZSgiZmZpIikNCmxvY2FsIGh0dHAgPSByZXF1aXJlKCdnYW1lc2Vuc2UvaHR0cCcpDQpsb2NhbCBwdWkgPSByZXF1aXJlKCJnYW1lc2Vuc2UvcHVpIikNCmxvY2FsIGJhc2U2NCA9IHJlcXVpcmUoImdhbWVzZW5zZS9iYXNlNjQiKQ0KbG9jYWwgdmVjdG9yID0gcmVxdWlyZSgidmVjdG9yIikNCmxvY2FsIGVudF9saWIgPSByZXF1aXJlKCJnYW1lc2Vuc2UvZW50aXR5IikNCmxvY2FsIGltYWdlcyA9IHJlcXVpcmUoImdhbWVzZW5zZS9pbWFnZXMiKQ0KbG9jYWwgZGlzY29yZCA9IHJlcXVpcmUoImdhbWVzZW5zZS9kaXNjb3JkX3dlYmhvb2tzIikNCmxvY2FsIGNsaXBib2FyZCA9IHJlcXVpcmUoImdhbWVzZW5zZS9jbGlwYm9hcmQiKQ0KbG9jYWwgYW50aWFpbV9mdW5jcyA9IHJlcXVpcmUoImdhbWVzZW5zZS9hbnRpYWltX2Z1bmNzIikNCg0KWCxZID0gY2xpZW50LnNjcmVlbl9zaXplKCkNCg0KLS1bWw0KICAgIExVQTogaW50ZXJpdHVzDQpdXQ0KDQpsb2NhbCBldXBoZW1pYSA9IGV1cGhlbWlhX2RhdGEgYW5kIGV1cGhlbWlhX2RhdGEoKSBvciB7DQogICAgdXNlcm5hbWUgPSAibG9hZGVyNzc3IiwNCiAgICBidWlsZCA9ICJyZW5ld2VkIg0KfQ0KDQpsb2NhbCBub3RpZnlfZGF0YSA9IHt9DQoNCnB1aS5hY2NlbnQgPSAiRkY3MzY5ZmYiIC0tIGx1YSBtYWluIGNvbG9yDQpwdWkubWFjcm9zLmhlYXJ0ID0gJ+KdpCcNCmxvY2FsIGdyb3VwID0gcHVpLmdyb3VwKCJhYSIsImFudGktYWltYm90IGFuZ2xlcyIpIC0tIEdST1VQIC0gQU5USUFJTQ0KbG9jYWwgZ3JvdXBfb3RoZXIgPSBwdWkuZ3JvdXAoImFhIiwiT3RoZXIiKSAtLSBHUk9VUCAtIE9USEVSDQoNCmxvY2FsIHJlZnMgPSB7DQogICAgcmVmZXJlbmNlcyA9IHsNCiAgICAgICAgbWluaW11bV9kYW1hZ2UgPSB1aS5yZWZlcmVuY2UoIlJBR0UiLCAiQWltYm90IiwgIk1pbmltdW0gZGFtYWdlIiksDQogICAgICAgIG1pbmltdW1fZGFtYWdlX292ZXJyaWRlID0ge3VpLnJlZmVyZW5jZSgiUkFHRSIsICJBaW1ib3QiLCAiTWluaW11bSBkYW1hZ2Ugb3ZlcnJpZGUiKX0sDQogICAgICAgIGRvdWJsZV90YXAgPSB7dWkucmVmZXJlbmNlKCdSQUdFJywgJ0FpbWJvdCcsICdEb3VibGUgdGFwJyl9LA0KICAgICAgICBwcyA9IHsgdWkucmVmZXJlbmNlKCJNSVNDIiwgIk1pc2NlbGxhbmVvdXMiLCAiUGluZyBzcGlrZSIpIH0sDQogICAgICAgIGR1Y2tfcGVla19hc3Npc3QgPSB1aS5yZWZlcmVuY2UoJ1JBR0UnLCAnT3RoZXInLCAnRHVjayBwZWVrIGFzc2lzdCcpLA0KICAgICAgICBlbmFibGVkID0gdWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnRW5hYmxlZCcpLA0KICAgICAgICBwaXRjaCA9IHt1aS5yZWZlcmVuY2UoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdQaXRjaCcpfSwNCiAgICAgICAgeWF3X2Jhc2UgPSB1aS5yZWZlcmVuY2UoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdZYXcgYmFzZScpLA0KICAgICAgICB5YXcgPSB7dWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnWWF3Jyl9LA0KICAgICAgICB5YXdfaml0dGVyID0ge3VpLnJlZmVyZW5jZSgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ1lhdyBqaXR0ZXInKX0sDQogICAgICAgIGJvZHlfeWF3ID0ge3VpLnJlZmVyZW5jZSgnQUEnLCAnQW50aS1haW1ib3QgYW5nbGVzJywgJ0JvZHkgeWF3Jyl9LA0KICAgICAgICBmcmVlc3RhbmRpbmdfYm9keV95YXcgPSB1aS5yZWZlcmVuY2UoJ0FBJywgJ2FudGktYWltYm90IGFuZ2xlcycsICdGcmVlc3RhbmRpbmcgYm9keSB5YXcnKSwNCiAgICAgICAgZWRnZV95YXcgPSB1aS5yZWZlcmVuY2UoJ0FBJywgJ0FudGktYWltYm90IGFuZ2xlcycsICdFZGdlIHlhdycpLA0KICAgICAgICBmcmVlc3RhbmRpbmcgPSB7dWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnRnJlZXN0YW5kaW5nJyl9LA0KICAgICAgICByb2xsID0gdWkucmVmZXJlbmNlKCdBQScsICdBbnRpLWFpbWJvdCBhbmdsZXMnLCAnUm9sbCcpLA0KICAgICAgICBzbG93X21vdGlvbiA9IHt1aS5yZWZlcmVuY2UoJ0FBJywgJ090aGVyJywgJ1Nsb3cgbW90aW9uJyl9LA0KICAgICAgICBsZWdfbW92ZW1lbnQgPSB1aS5yZWZlcmVuY2UoJ0FBJywgJ090aGVyJywgJ0xlZyBtb3ZlbWVudCcpLA0KICAgICAgICBvbl9zaG90X2FudGlfYWltID0ge3VpLnJlZmVyZW5jZSgnQUEnLCAnT3RoZXInLCAnT24gc2hvdCBhbnRpLWFpbScpfQ0KICAgIH0sICANCiAgICByZWYgPSB7DQogICAgICAgIGFhX2VuYWJsZSA9IHVpLnJlZmVyZW5jZSgiQUEiLCJhbnRpLWFpbWJvdCBhbmdsZXMiLCJlbmFibGVkIiksDQogICAgICAgIHBpdGNoID0gdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsInBpdGNoIiksDQogICAgICAgIHBpdGNoX3ZhbHVlID0gc2VsZWN0KDIsIHVpLnJlZmVyZW5jZSgiQUEiLCJhbnRpLWFpbWJvdCBhbmdsZXMiLCJwaXRjaCIpKSwNCiAgICAgICAgeWF3X2Jhc2UgPSB1aS5yZWZlcmVuY2UoIkFBIiwiYW50aS1haW1ib3QgYW5nbGVzIiwieWF3IGJhc2UiKSwNCiAgICAgICAgeWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsInlhdyIpLA0KICAgICAgICB5YXdfdmFsdWUgPSBzZWxlY3QoMiwgdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsInlhdyIpKSwNCiAgICAgICAgeWF3X2ppdHRlciA9IHVpLnJlZmVyZW5jZSgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCJZYXcgSml0dGVyIiksDQogICAgICAgIHlhd19qaXR0ZXJfdmFsdWUgPSBzZWxlY3QoMiwgdWkucmVmZXJlbmNlKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsIllhdyBKaXR0ZXIiKSksDQogICAgICAgIGJvZHlfeWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsIkJvZHkgeWF3IiksDQogICAgICAgIGJvZHlfeWF3X3ZhbHVlID0gc2VsZWN0KDIsIHVpLnJlZmVyZW5jZSgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCJCb2R5IHlhdyIpKSwNCiAgICAgICAgZnJlZXN0YW5kX2JvZHlfeWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsImZyZWVzdGFuZGluZyBib2R5IHlhdyIpLA0KICAgICAgICBlZGdleWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsImVkZ2UgeWF3IiksDQogICAgICAgIGZyZWVzdGFuZCA9IHt1aS5yZWZlcmVuY2UoIkFBIiwiYW50aS1haW1ib3QgYW5nbGVzIiwiZnJlZXN0YW5kaW5nIil9LA0KICAgICAgICByb2xsID0gdWkucmVmZXJlbmNlKCJBQSIsImFudGktYWltYm90IGFuZ2xlcyIsInJvbGwiKSwNCiAgICAgICAgc2xpZGUgPSB7dWkucmVmZXJlbmNlKCJBQSIsIm90aGVyIiwic2xvdyBtb3Rpb24iKX0sDQogICAgICAgIGZha2VkdWNrID0gdWkucmVmZXJlbmNlKCJyYWdlIiwib3RoZXIiLCJkdWNrIHBlZWsgYXNzaXN0IiksDQogICAgICAgIHF1aWNrX3BlZWsgPSB7dWkucmVmZXJlbmNlKCJyYWdlIiwgIm90aGVyIiwgInF1aWNrIHBlZWsgYXNzaXN0Iil9LA0KICAgICAgICBkb3VibGV0YXAgPSB7dWkucmVmZXJlbmNlKCJyYWdlIiwgImFpbWJvdCIsICJkb3VibGUgdGFwIil9LA0KICAgIH0NCn0NCg0KbG9jYWwgZnVuY3MgPSB7DQogICAgY29udGFpbnMgPSBmdW5jdGlvbih0YmwsIGFyZykNCiAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBuZXh0LCB0YmwgZG8gDQogICAgICAgICAgICBpZiB2YWx1ZSA9PSBhcmcgdGhlbiANCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZSBlbmQgDQogICAgICAgICAgICBlbmQgDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZCwNCiAgICBsZXJwID0gZnVuY3Rpb24oYSwgYiwgdCkNCiAgICAgICAgcmV0dXJuIGEgKyAoYiAtIGEpICogdA0KICAgIGVuZCwNCiAgICByZ2JhX3RvX2hleCA9IGZ1bmN0aW9uKGIsYyxkLGUpDQogICAgICAgIHJldHVybiBzdHJpbmcuZm9ybWF0KCclMDJ4JTAyeCUwMnglMDJ4JyxiLGMsZCxlKQ0KICAgIGVuZCwNCiAgICBncmFkaWVudF90ZXh0ID0gZnVuY3Rpb24odGV4dCwgc3BlZWQsIHIsZyxiLGEpDQogICAgICAgIGxvY2FsIGZpbmFsX3RleHQgPSAnJw0KICAgICAgICBsb2NhbCBjdXJ0aW1lID0gZ2xvYmFscy5jdXJ0aW1lKCkNCiAgICAgICAgbG9jYWwgY2VudGVyID0gbWF0aC5mbG9vcigjdGV4dCAvIDIpICsgMQ0KICAgICAgICBmb3IgaT0xLCAjdGV4dCBkbw0KICAgICAgICAgICAgbG9jYWwgZGlzdGFuY2UgPSBtYXRoLmFicyhpIC0gY2VudGVyKQ0KICAgICAgICAgICAgYSA9IDI1NSAtIG1hdGguYWJzKDI1NSAqIG1hdGguc2luKHNwZWVkICogY3VydGltZSAvIDQgLSBkaXN0YW5jZSAqIDQgLyAyMCkpDQogICAgICAgICAgICBsb2NhbCBjb2wgPSBzdHJpbmcuZm9ybWF0KCclMDJ4JTAyeCUwMnglMDJ4JyxyLGcsYixhKQ0KICAgICAgICAgICAgZmluYWxfdGV4dCA9IGZpbmFsX3RleHQgLi4gJ1xhJyAuLiBjb2wgLi4gdGV4dDpzdWIoaSwgaSkNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiBmaW5hbF90ZXh0DQogICAgZW5kLA0KICAgIHRleHRfZmFkZV9hbmltYXRpb24gPSBmdW5jdGlvbihzcGVlZCwgciwgZywgYiwgYSwgdGV4dCkNCiAgICAgICAgbG9jYWwgZmluYWxfdGV4dCA9ICcnDQogICAgICAgIGxvY2FsIGN1cnRpbWUgPSBnbG9iYWxzLmN1cnRpbWUoKQ0KICAgICAgICBmb3IgaT0wLCAjdGV4dCBkbw0KICAgICAgICAgICAgbG9jYWwgY29sb3IgPSBzdHJpbmcuZm9ybWF0KCclMDJ4JTAyeCUwMnglMDJ4JywgciwgZywgYiwgYSptYXRoLmFicygxKm1hdGguY29zKDIqc3BlZWQqY3VydGltZS80K2kqNS8zMCkpKQ0KICAgICAgICAgICAgZmluYWxfdGV4dCA9IGZpbmFsX3RleHQuLidcYScuLmNvbG9yLi50ZXh0OnN1YihpLCBpKQ0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIGZpbmFsX3RleHQNCiAgICBlbmQsDQogICAgaGlkZV9za2VldF9hbnRpYWltX2RlZiA9IGZ1bmN0aW9uKHZhbHVlKQ0KICAgICAgICB2YWx1ZSA9IG5vdCB2YWx1ZQ0KICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLnJlZi5hYV9lbmFibGUsIHZhbHVlKSB1aS5zZXRfdmlzaWJsZShyZWZzLnJlZi5waXRjaCwgdmFsdWUpIHVpLnNldF92aXNpYmxlKHJlZnMucmVmLnBpdGNoX3ZhbHVlLCB2YWx1ZSkNCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy5yZWYueWF3X2Jhc2UsIHZhbHVlKSB1aS5zZXRfdmlzaWJsZShyZWZzLnJlZi55YXcsIHZhbHVlKSB1aS5zZXRfdmlzaWJsZShyZWZzLnJlZi55YXdfdmFsdWUsIHZhbHVlKQ0KICAgICAgICB1aS5zZXRfdmlzaWJsZShyZWZzLnJlZi55YXdfaml0dGVyLCB2YWx1ZSkgdWkuc2V0X3Zpc2libGUocmVmcy5yZWYueWF3X2ppdHRlcl92YWx1ZSwgdmFsdWUpIHVpLnNldF92aXNpYmxlKHJlZnMucmVmLmJvZHlfeWF3LCB2YWx1ZSkNCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy5yZWYuYm9keV95YXdfdmFsdWUsIHZhbHVlKSB1aS5zZXRfdmlzaWJsZShyZWZzLnJlZi5lZGdleWF3LCB2YWx1ZSkgdWkuc2V0X3Zpc2libGUocmVmcy5yZWYuZnJlZXN0YW5kWzFdLCB2YWx1ZSkNCiAgICAgICAgdWkuc2V0X3Zpc2libGUocmVmcy5yZWYuZnJlZXN0YW5kWzJdLCB2YWx1ZSkgdWkuc2V0X3Zpc2libGUocmVmcy5yZWYucm9sbCwgdmFsdWUpIHVpLnNldF92aXNpYmxlKHJlZnMucmVmLmZyZWVzdGFuZF9ib2R5X3lhdywgdmFsdWUpDQogICAgZW5kLA0KICAgIGludGVyc2VjdCA9IGZ1bmN0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQpDQogICAgICAgIGxvY2FsIGN4LCBjeSA9IHVpLm1vdXNlX3Bvc2l0aW9uKCkNCiAgICAgICAgcmV0dXJuIGN4ID49IHggYW5kIGN4IDw9IHggKyB3aWR0aCBhbmQgY3kgPj0geSBhbmQgY3kgPD0geSArIGhlaWdodA0KICAgIGVuZCwNCiAgICBjb252ZXJ0VW5peFRpbWUgPSBmdW5jdGlvbih1bml4VGltZSkNCiAgICAgICAgbG9jYWwgaG91cnMgPSBtYXRoLmZsb29yKHVuaXhUaW1lIC8gMzYwMCkgJSAyNA0KICAgICAgICBsb2NhbCBtaW51dGVzID0gbWF0aC5mbG9vcih1bml4VGltZSAvIDYwKSAlIDYwDQogICAgICAgIGxvY2FsIHNlY29uZHMgPSB1bml4VGltZSAlIDYwDQogICAgICAgIGxvY2FsIHRpbWVTdHJpbmcgPSBzdHJpbmcuZm9ybWF0KCIlMDJkOiUwMmQ6JTAyZCIsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKQ0KICAgICAgICByZXR1cm4gdGltZVN0cmluZw0KICAgIGVuZCwNCiAgICBtdWx0aWNvbG9yX2NvbnNvbGUgPSBmdW5jdGlvbiguLi4pDQogICAgICAgIGxvY2FsIHRleHRzID0gey4uLn0NCiAgICAgICAgZm9yIGk9MSwgI3RleHRzIGRvDQogICAgICAgICAgICBsb2NhbCB0ZXh0ID0gdGV4dHNbaV0NCiAgICAgICAgICAgIGNsaWVudC5jb2xvcl9sb2codGV4dFsxXSwgdGV4dFsyXSwgdGV4dFszXSwgaSB+PSAjdGV4dHMgYW5kICh0ZXh0WzRdIC4uICdcMCcpIG9yIHRleHRbNF0pDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICBncmFkaWVudF90ZXh0ID0gZnVuY3Rpb24ocjEsIGcxLCBiMSwgYTEsIHIyLCBnMiwgYjIsIGEyLCB0ZXh0KQ0KICAgICAgICBsb2NhbCBvdXRwdXQgPSAnJw0KICAgIA0KICAgICAgICBsb2NhbCBsZW4gPSAjdGV4dC0xDQogICAgDQogICAgICAgIGxvY2FsIHJpbmMgPSAocjIgLSByMSkgLyBsZW4NCiAgICAgICAgbG9jYWwgZ2luYyA9IChnMiAtIGcxKSAvIGxlbg0KICAgICAgICBsb2NhbCBiaW5jID0gKGIyIC0gYjEpIC8gbGVuDQogICAgICAgIGxvY2FsIGFpbmMgPSAoYTIgLSBhMSkgLyBsZW4NCiAgICANCiAgICAgICAgZm9yIGk9MSwgbGVuKzEgZG8NCiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCAuLiAoJ1xhJTAyeCUwMnglMDJ4JTAyeCVzJyk6Zm9ybWF0KHIxLCBnMSwgYjEsIGExLCB0ZXh0OnN1YihpLCBpKSkNCiAgICANCiAgICAgICAgICAgIHIxID0gcjEgKyByaW5jDQogICAgICAgICAgICBnMSA9IGcxICsgZ2luYw0KICAgICAgICAgICAgYjEgPSBiMSArIGJpbmMNCiAgICAgICAgICAgIGExID0gYTEgKyBhaW5jDQogICAgICAgIGVuZA0KICAgIA0KICAgICAgICByZXR1cm4gb3V0cHV0DQogICAgZW5kDQp9DQoNCmxvY2FsIHgsIG8gPSAnXHgxNFx4MTRceDE0XHhGRicsICdceDBjXHgwY1x4MGNceEZGJw0KDQpsb2NhbCBwYXR0ZXJuID0gdGFibGUuY29uY2F0ew0KICAgIHgseCxvLHgsDQogICAgbyx4LG8seCwNCiAgICBvLHgseCx4LA0KICAgIG8seCxvLHgNCn0NCg0KbG9jYWwgdGV4X2lkID0gcmVuZGVyZXIubG9hZF9yZ2JhKHBhdHRlcm4sIDQsIDQpDQoNCmZ1bmN0aW9uIHJlbmRlcl9vZ3NrZWV0X2JvcmRlcih4LHksdyxoLGEsdGV4dCkNCiAgICByZW5kZXJlci5yZWN0YW5nbGUoeCAtIDEwLCB5IC0gNDggLHcgKyAyMCwgaCArIDE2LDEyLDEyLDEyLGEpDQogICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggLSA5LCB5IC0gNDcgLHcgKyAxOCwgaCArIDE0LDYwLDYwLDYwLGEpDQogICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggLSA4LCB5IC0gNDYgLHcgKyAxNiwgaCArIDEyLDQwLDQwLDQwLGEpDQogICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggLSA1LCB5IC0gNDMgLHcgKyAxMCwgaCArIDYsNjAsNjAsNjAsYSkNCiAgICByZW5kZXJlci5yZWN0YW5nbGUoeCAtIDQsIHkgLSA0MiAsdyArIDgsIGggKyA0LDEyLDEyLDEyLGEpDQogICAgcmVuZGVyZXIudGV4dHVyZSh0ZXhfaWQsIHggLSA0LCB5IC0gNDIsIHcgKyA4LCBoICsgNCwgMjU1LCAyNTUsIDI1NSwgYSwgInIiKQ0KICAgIHJlbmRlcmVyLmdyYWRpZW50KHggLSA0LHkgLSA0MiwgdyAvMiwgMSwgNTksIDE3NSwgMjIyLCBhLCAyMDIsIDcwLCAyMDUsIGEsdHJ1ZSkgICAgICAgICAgICAgICANCiAgICByZW5kZXJlci5ncmFkaWVudCh4IC0gNCArIHcgLyAyICx5IC0gNDIsIHcgLzIgKyA4LjUsIDEsMjAyLCA3MCwgMjA1LCBhLDIwNCwgMjI3LCA1MywgYSx0cnVlKQ0KICAgIHJlbmRlcmVyLnRleHQoeCwgeSAtIDQwLCAyNTUsMjU1LDI1NSxhLCAiIiwgbmlsLCB0ZXh0KQ0KZW5kDQoNCmxvY2FsIGNmZ19kYXRhID0ge30NCmNmZ19kYXRhLmRhdGFiYXNlID0gew0KICAgIGNvbmZpZ3MgPSAiOmludGVyaXR1c19jZmdfYmVzdGU6Ig0KfQ0KY2ZnX2RhdGEucHJlc2V0cyA9IHsNCiAgICB7bmFtZSA9ICJEZWZhdWx0IiwgY29uZmlnID0gIlczc2laVzVoWW14bElqcDBjblZsTENKNVlYZGZZbUZ6WlNJNklrRjBJSFJoY21kbGRITWlMQ0p6ZEdGMFpTSTZJa3AxYlhBaWZTeDdJbVZ1WVdKc1pTSTZkSEoxWlN3aWMzUmhkR1VpT2lKS2RXMXdJbjBzZXlKU2RXNGlPbnNpWlc1aFlteGxJanBtWVd4elpTd2ljR2wwWTJnaU9pSlNZVzVrYjIwaUxDSm1iM0pqWlNJNmRISjFaU3dpYlc5a1pTSTZJa0ZzZDJGNWN5QnZiaUlzSW1OMWMzUnZiVjl3YVhSamFDSTZNQ3dpZVdGM1gycHBkSFJsY2w5emJHbGtaWElpT2pBc0lubGhkeUk2SWxOcFpHVjNZWGx6SWl3aWVXRjNYMnBwZEhSbGNpSTZJbEpoYm1SdmJTSXNJbmxoZDE5c1pXWjBJam90TWpFc0lubGhkMTl5YVdkb2RDSTZNakVzSW5saGQxOXpiR2xrWlhJaU9qRjlMQ0pFZFdOckxXcDFiWEFpT25zaVpXNWhZbXhsSWpwMGNuVmxMQ0p3YVhSamFDSTZJbHBsY204aUxDSm1iM0pqWlNJNlptRnNjMlVzSW0xdlpHVWlPaUpKYm5aaGJHbGtJSFJwWTJ0eklpd2lZM1Z6ZEc5dFgzQnBkR05vSWpvd0xDSjVZWGRmYW1sMGRHVnlYM05zYVdSbGNpSTZMVFF6TENKNVlYY2lPaUpUY0dsdUlpd2llV0YzWDJwcGRIUmxjaUk2SWxKaGJtUnZiU0lzSW5saGQxOXNaV1owSWpvdE1qRXNJbmxoZDE5eWFXZG9kQ0k2TWpFc0lubGhkMTl6Ykdsa1pYSWlPamN3ZlN3aVJIVmpheUk2ZXlKbGJtRmliR1VpT25SeWRXVXNJbkJwZEdOb0lqb2lVbUZ1Wkc5dElpd2labTl5WTJVaU9uUnlkV1VzSW0xdlpHVWlPaUpCYkhkaGVYTWdiMjRpTENKamRYTjBiMjFmY0dsMFkyZ2lPakFzSW5saGQxOXFhWFIwWlhKZmMyeHBaR1Z5SWpvd0xDSjVZWGNpT2lKVGFXUmxkMkY1Y3lJc0lubGhkMTlxYVhSMFpYSWlPaUpTWVc1a2IyMGlMQ0o1WVhkZmJHVm1kQ0k2TFRJeExDSjVZWGRmY21sbmFIUWlPakl4TENKNVlYZGZjMnhwWkdWeUlqb3hmU3dpVTNSaGJtUWlPbnNpWlc1aFlteGxJanBtWVd4elpTd2ljR2wwWTJnaU9pSlNZVzVrYjIwaUxDSm1iM0pqWlNJNmRISjFaU3dpYlc5a1pTSTZJa0ZzZDJGNWN5QnZiaUlzSW1OMWMzUnZiVjl3YVhSamFDSTZNQ3dpZVdGM1gycHBkSFJsY2w5emJHbGtaWElpT2pBc0lubGhkeUk2SWxOcFpHVjNZWGx6SWl3aWVXRjNYMnBwZEhSbGNpSTZJbEpoYm1SdmJTSXNJbmxoZDE5c1pXWjBJam90TWpFc0lubGhkMTl5YVdkb2RDSTZNakVzSW5saGQxOXpiR2xrWlhJaU9qRjlMQ0pLZFcxd0lqcDdJbVZ1WVdKc1pTSTZkSEoxWlN3aWNHbDBZMmdpT2lKSmJuUmxjbWwwZFhNaUxDSm1iM0pqWlNJNlptRnNjMlVzSW0xdlpHVWlPaUpKYm5aaGJHbGtJSFJwWTJ0eklpd2lZM1Z6ZEc5dFgzQnBkR05vSWpvd0xDSjVZWGRmYW1sMGRHVnlYM05zYVdSbGNpSTZNQ3dpZVdGM0lqb2lVM0JwYmlJc0lubGhkMTlxYVhSMFpYSWlPaUpQWm1ZaUxDSjVZWGRmYkdWbWRDSTZMVEl4TENKNVlYZGZjbWxuYUhRaU9qSXhMQ0o1WVhkZmMyeHBaR1Z5SWpvM01IMHNJbE5zYjNkM1lXeHJJanA3SW1WdVlXSnNaU0k2ZEhKMVpTd2ljR2wwWTJnaU9pSlNZVzVrYjIwaUxDSm1iM0pqWlNJNmRISjFaU3dpYlc5a1pTSTZJa0ZzZDJGNWN5QnZiaUlzSW1OMWMzUnZiVjl3YVhSamFDSTZNQ3dpZVdGM1gycHBkSFJsY2w5emJHbGtaWElpT2pBc0lubGhkeUk2SWxOcFpHVjNZWGx6SWl3aWVXRjNYMnBwZEhSbGNpSTZJbEpoYm1SdmJTSXNJbmxoZDE5c1pXWjBJam90TWpFc0lubGhkMTl5YVdkb2RDSTZNakVzSW5saGQxOXpiR2xrWlhJaU9qRjlMQ0pFZFdOckxXMXZkbVVpT25zaVpXNWhZbXhsSWpwMGNuVmxMQ0p3YVhSamFDSTZJbEpoYm1SdmJTSXNJbVp2Y21ObElqcDBjblZsTENKdGIyUmxJam9pUVd4M1lYbHpJRzl1SWl3aVkzVnpkRzl0WDNCcGRHTm9Jam93TENKNVlYZGZhbWwwZEdWeVgzTnNhV1JsY2lJNk1Dd2llV0YzSWpvaVUybGtaWGRoZVhNaUxDSjVZWGRmYW1sMGRHVnlJam9pVW1GdVpHOXRJaXdpZVdGM1gyeGxablFpT2kweU1Td2llV0YzWDNKcFoyaDBJam95TVN3aWVXRjNYM05zYVdSbGNpSTZNWDE5TEhzaVJIVmpheUk2ZXlKbGJtRmliR1VpT25SeWRXVXNJbmxoZDE5MGVYQmxJam9pVENBbUlGSWlMQ0p3YVhSamFDSTZJa1J2ZDI0aUxDSjVZWGRmYzJ4cFpHVnlYM04wWVhScFl5STZNQ3dpWW05a2VWOTVZWGNpT2lKS2FYUjBaWElpTENKaWIyUjVYM2xoZDE5emJHbGtaWElpT2pBc0lubGhkeUk2SWpFNE1DSXNJbU4xYzNSdmJWOXdhWFJqYUNJNk1Dd2llV0YzWDNOc2FXUmxjbDl5SWpveU1Td2llV0YzWDJwcGRIUmxjbDl6Ykdsa1pYSmZiQ0k2TFRJeExDSjVZWGRmYzJ4cFpHVnlYMlJsYkdGNUlqb3dMQ0o1WVhkZmFtbDBkR1Z5WDIxdlpHVWlPaUpUZEdGMGFXTWlMQ0o1WVhkZmFtbDBkR1Z5SWpvaVVtRnVaRzl0SWl3aWVXRjNYMnBwZEhSbGNsOXpiR2xrWlhKZmMzUmhkR2xqSWpvd0xDSjVZWGRmYW1sMGRHVnlYM05zYVdSbGNsOXlJam95TVN3aWVXRjNYM05zYVdSbGNsOXNJam90TWpGOUxDSkVkV05yTFcxdmRtVWlPbnNpWlc1aFlteGxJanAwY25WbExDSjVZWGRmZEhsd1pTSTZJa3dnSmlCU0lpd2ljR2wwWTJnaU9pSkViM2R1SWl3aWVXRjNYM05zYVdSbGNsOXpkR0YwYVdNaU9qQXNJbUp2WkhsZmVXRjNJam9pU21sMGRHVnlJaXdpWW05a2VWOTVZWGRmYzJ4cFpHVnlJam93TENKNVlYY2lPaUl4T0RBaUxDSmpkWE4wYjIxZmNHbDBZMmdpT2pBc0lubGhkMTl6Ykdsa1pYSmZjaUk2TWpFc0lubGhkMTlxYVhSMFpYSmZjMnhwWkdWeVgyd2lPaTB5TVN3aWVXRjNYM05zYVdSbGNsOWtaV3hoZVNJNk1Dd2llV0YzWDJwcGRIUmxjbDl0YjJSbElqb2lVM1JoZEdsaklpd2llV0YzWDJwcGRIUmxjaUk2SWxKaGJtUnZiU0lzSW5saGQxOXFhWFIwWlhKZmMyeHBaR1Z5WDNOMFlYUnBZeUk2TUN3aWVXRjNYMnBwZEhSbGNsOXpiR2xrWlhKZmNpSTZNakVzSW5saGQxOXpiR2xrWlhKZmJDSTZMVEl4ZlN3aVVuVnVJanA3SW1WdVlXSnNaU0k2ZEhKMVpTd2llV0YzWDNSNWNHVWlPaUpNSUNZZ1VpSXNJbkJwZEdOb0lqb2lSRzkzYmlJc0lubGhkMTl6Ykdsa1pYSmZjM1JoZEdsaklqb3dMQ0ppYjJSNVgzbGhkeUk2SWtwcGRIUmxjaUlzSW1KdlpIbGZlV0YzWDNOc2FXUmxjaUk2TUN3aWVXRjNJam9pTVRnd0lpd2lZM1Z6ZEc5dFgzQnBkR05vSWpvd0xDSjVZWGRmYzJ4cFpHVnlYM0lpT2pJeExDSjVZWGRmYW1sMGRHVnlYM05zYVdSbGNsOXNJam90TWpFc0lubGhkMTl6Ykdsa1pYSmZaR1ZzWVhraU9qQXNJbmxoZDE5cWFYUjBaWEpmYlc5a1pTSTZJbE4wWVhScFl5SXNJbmxoZDE5cWFYUjBaWElpT2lKU1lXNWtiMjBpTENKNVlYZGZhbWwwZEdWeVgzTnNhV1JsY2w5emRHRjBhV01pT2pBc0lubGhkMTlxYVhSMFpYSmZjMnhwWkdWeVgzSWlPakl4TENKNVlYZGZjMnhwWkdWeVgyd2lPaTB5TVgwc0lrZHNiMkpoYkNJNmV5SmxibUZpYkdVaU9uUnlkV1VzSW5saGQxOTBlWEJsSWpvaVRDQW1JRklpTENKd2FYUmphQ0k2SWtSdmQyNGlMQ0o1WVhkZmMyeHBaR1Z5WDNOMFlYUnBZeUk2TUN3aVltOWtlVjk1WVhjaU9pSkthWFIwWlhJaUxDSmliMlI1WDNsaGQxOXpiR2xrWlhJaU9qQXNJbmxoZHlJNklqRTRNQ0lzSW1OMWMzUnZiVjl3YVhSamFDSTZNQ3dpZVdGM1gzTnNhV1JsY2w5eUlqb3lNU3dpZVdGM1gycHBkSFJsY2w5emJHbGtaWEpmYkNJNkxUSXhMQ0o1WVhkZmMyeHBaR1Z5WDJSbGJHRjVJam93TENKNVlYZGZhbWwwZEdWeVgyMXZaR1VpT2lKVGRHRjBhV01pTENKNVlYZGZhbWwwZEdWeUlqb2lVbUZ1Wkc5dElpd2llV0YzWDJwcGRIUmxjbDl6Ykdsa1pYSmZjM1JoZEdsaklqb3dMQ0o1WVhkZmFtbDBkR1Z5WDNOc2FXUmxjbDl5SWpveU1Td2llV0YzWDNOc2FXUmxjbDlzSWpvdE1qRjlMQ0pUZEdGdVpDSTZleUpsYm1GaWJHVWlPblJ5ZFdVc0lubGhkMTkwZVhCbElqb2lUQ0FtSUZJaUxDSndhWFJqYUNJNklrUnZkMjRpTENKNVlYZGZjMnhwWkdWeVgzTjBZWFJwWXlJNk1Dd2lZbTlrZVY5NVlYY2lPaUpLYVhSMFpYSWlMQ0ppYjJSNVgzbGhkMTl6Ykdsa1pYSWlPakFzSW5saGR5STZJakU0TUNJc0ltTjFjM1J2YlY5d2FYUmphQ0k2TUN3aWVXRjNYM05zYVdSbGNsOXlJam95TVN3aWVXRjNYMnBwZEhSbGNsOXpiR2xrWlhKZmJDSTZMVEl4TENKNVlYZGZjMnhwWkdWeVgyUmxiR0Y1SWpvd0xDSjVZWGRmYW1sMGRHVnlYMjF2WkdVaU9pSlRkR0YwYVdNaUxDSjVZWGRmYW1sMGRHVnlJam9pVW1GdVpHOXRJaXdpZVdGM1gycHBkSFJsY2w5emJHbGtaWEpmYzNSaGRHbGpJam93TENKNVlYZGZhbWwwZEdWeVgzTnNhV1JsY2w5eUlqb3lNU3dpZVdGM1gzTnNhV1JsY2w5c0lqb3RNakY5TENKR1lXdGxiR0ZuSWpwN0ltVnVZV0pzWlNJNlptRnNjMlVzSW5saGQxOTBlWEJsSWpvaVRDQW1JRklpTENKd2FYUmphQ0k2SWtSdmQyNGlMQ0o1WVhkZmMyeHBaR1Z5WDNOMFlYUnBZeUk2TUN3aVltOWtlVjk1WVhjaU9pSkthWFIwWlhJaUxDSmliMlI1WDNsaGQxOXpiR2xrWlhJaU9qQXNJbmxoZHlJNklqRTRNQ0lzSW1OMWMzUnZiVjl3YVhSamFDSTZNQ3dpZVdGM1gzTnNhV1JsY2w5eUlqb3lNU3dpZVdGM1gycHBkSFJsY2w5emJHbGtaWEpmYkNJNkxUSXhMQ0o1WVhkZmMyeHBaR1Z5WDJSbGJHRjVJam93TENKNVlYZGZhbWwwZEdWeVgyMXZaR1VpT2lKVGRHRjBhV01pTENKNVlYZGZhbWwwZEdWeUlqb2lVbUZ1Wkc5dElpd2llV0YzWDJwcGRIUmxjbDl6Ykdsa1pYSmZjM1JoZEdsaklqb3dMQ0o1WVhkZmFtbDBkR1Z5WDNOc2FXUmxjbDl5SWpveU1Td2llV0YzWDNOc2FXUmxjbDlzSWpvdE1qRjlMQ0pLZFcxd0lqcDdJbVZ1WVdKc1pTSTZkSEoxWlN3aWVXRjNYM1I1Y0dVaU9pSk1JQ1lnVWlJc0luQnBkR05vSWpvaVJHOTNiaUlzSW5saGQxOXpiR2xrWlhKZmMzUmhkR2xqSWpvd0xDSmliMlI1WDNsaGR5STZJa3BwZEhSbGNpSXNJbUp2WkhsZmVXRjNYM05zYVdSbGNpSTZNQ3dpZVdGM0lqb2lNVGd3SWl3aVkzVnpkRzl0WDNCcGRHTm9Jam93TENKNVlYZGZjMnhwWkdWeVgzSWlPakl4TENKNVlYZGZhbWwwZEdWeVgzTnNhV1JsY2w5c0lqb3RNakVzSW5saGQxOXpiR2xrWlhKZlpHVnNZWGtpT2pBc0lubGhkMTlxYVhSMFpYSmZiVzlrWlNJNklsTjBZWFJwWXlJc0lubGhkMTlxYVhSMFpYSWlPaUpTWVc1a2IyMGlMQ0o1WVhkZmFtbDBkR1Z5WDNOc2FXUmxjbDl6ZEdGMGFXTWlPakFzSW5saGQxOXFhWFIwWlhKZmMyeHBaR1Z5WDNJaU9qSXhMQ0o1WVhkZmMyeHBaR1Z5WDJ3aU9pMHlNWDBzSWxOc2IzZDNZV3hySWpwN0ltVnVZV0pzWlNJNmRISjFaU3dpZVdGM1gzUjVjR1VpT2lKTUlDWWdVaUlzSW5CcGRHTm9Jam9pUkc5M2JpSXNJbmxoZDE5emJHbGtaWEpmYzNSaGRHbGpJam93TENKaWIyUjVYM2xoZHlJNklrcHBkSFJsY2lJc0ltSnZaSGxmZVdGM1gzTnNhV1JsY2lJNk1Dd2llV0YzSWpvaU1UZ3dJaXdpWTNWemRHOXRYM0JwZEdOb0lqb3dMQ0o1WVhkZmMyeHBaR1Z5WDNJaU9qSXhMQ0o1WVhkZmFtbDBkR1Z5WDNOc2FXUmxjbDlzSWpvdE1qRXNJbmxoZDE5emJHbGtaWEpmWkdWc1lYa2lPakFzSW5saGQxOXFhWFIwWlhKZmJXOWtaU0k2SWxOMFlYUnBZeUlzSW5saGQxOXFhWFIwWlhJaU9pSlNZVzVrYjIwaUxDSjVZWGRmYW1sMGRHVnlYM05zYVdSbGNsOXpkR0YwYVdNaU9qQXNJbmxoZDE5cWFYUjBaWEpmYzJ4cFpHVnlYM0lpT2pJeExDSjVZWGRmYzJ4cFpHVnlYMndpT2kweU1YMHNJa1IxWTJzdGFuVnRjQ0k2ZXlKbGJtRmliR1VpT25SeWRXVXNJbmxoZDE5MGVYQmxJam9pVENBbUlGSWlMQ0p3YVhSamFDSTZJa1J2ZDI0aUxDSjVZWGRmYzJ4cFpHVnlYM04wWVhScFl5STZNQ3dpWW05a2VWOTVZWGNpT2lKS2FYUjBaWElpTENKaWIyUjVYM2xoZDE5emJHbGtaWElpT2pBc0lubGhkeUk2SWpFNE1DSXNJbU4xYzNSdmJWOXdhWFJqYUNJNk1Dd2llV0YzWDNOc2FXUmxjbDl5SWpveU1Td2llV0YzWDJwcGRIUmxjbDl6Ykdsa1pYSmZiQ0k2TFRJeExDSjVZWGRmYzJ4cFpHVnlYMlJsYkdGNUlqb3dMQ0o1WVhkZmFtbDBkR1Z5WDIxdlpHVWlPaUpUZEdGMGFXTWlMQ0o1WVhkZmFtbDBkR1Z5SWpvaVVtRnVaRzl0SWl3aWVXRjNYMnBwZEhSbGNsOXpiR2xrWlhKZmMzUmhkR2xqSWpvd0xDSjVZWGRmYW1sMGRHVnlYM05zYVdSbGNsOXlJam95TVN3aWVXRjNYM05zYVdSbGNsOXNJam90TWpGOWZTeDdJbVZ1WVdKc1pTSTZabUZzYzJVc0luSmxjMlYwYVdZaU9sc2lWR0Z5WjJWMElFUmxZWFJvSWl3aVVtVmhZMmhsWkNCVWFXMWxJRXhwYm1VaUxDSitJbDBzSW5Cb1lYTmxJam9pTXlJc0luTjBZWFJsSWpwYklsTjBZVzVrSWl3aVJIVmpheUlzSW40aVhYMHNXM3NpWW05a2VWOTVZWGNpT2pFeE15d2lhbWwwZEdWeUlqb3pMQ0psYm1GaWJHVmtJanAwY25WbGZTeDdJbUp2WkhsZmVXRjNJam94TVRNc0ltcHBkSFJsY2lJNk15d2laVzVoWW14bFpDSTZkSEoxWlgwc2V5SmliMlI1WDNsaGR5STZNVEV6TENKcWFYUjBaWElpT2pNc0ltVnVZV0pzWldRaU9uUnlkV1Y5TEhzaVltOWtlVjk1WVhjaU9qRXhNeXdpYW1sMGRHVnlJam96TENKbGJtRmliR1ZrSWpwbVlXeHpaWDBzZXlKaWIyUjVYM2xoZHlJNk1URXpMQ0pxYVhSMFpYSWlPak1zSW1WdVlXSnNaV1FpT21aaGJITmxmVjFkIn0NCn0NCg0KbG9jYWwgdWlfbWVudSA9IHsNCiAgICB0YWJzX25hbWVzID0geyLuhKUiLCLuhLYiLCLimbsiLCLinKgiLCLimLAiLCLuhLIifSwNCiAgICBzZWxlY3RlZF90YWIgPSAxLA0KICAgIHNlbGVjdGVkX2NvbG9yID0geyB7MjAsIDIwLCAyMCwgMjU1fSwgezIxMCwyMTAsMjEwLDI1NX0gfSwNCiAgICBtZW51X2FscGhhID0gMjU1LA0KICAgIGlzX2hvdmVyZWQgPSBmYWxzZSwNCiAgICBkcGlfc2NhbGluZ195ID0ge3s4NCwxNDl9LHsxMDAsMTgxfSx7MTE2LDIxM30sezEzMiwyNDV9LHsxNDgsMjc2fX0sDQogICAgcGVzYWRlbG9fbmFfY296aW5oYTIgPSB7NTk3LDc0MSw4ODUsMTAzMCwxMTczIH0sDQogICAgc2VsZWN0ZWRfZ3NfdGFiID0gZmFsc2UsDQogICAgbW91c2VfcHJlc3MgPSBmYWxzZSwNCiAgICBvbGRfbXBvcyA9IHswLDB9DQp9DQoNCmZ1bmN0aW9uIGlzX2FhX3RhYigpDQogICAgbG9jYWwgbWVudV9zaXplID0geyB1aS5tZW51X3NpemUoKSB9DQogIA0KICAgIA0KICAgIGxvY2FsIG1lbnVfcG9zID0geyB1aS5tZW51X3Bvc2l0aW9uKCkgfQ0KICAgIGxvY2FsIG1vdXNlX3BvcyA9IHsgdWkubW91c2VfcG9zaXRpb24oKSB9DQoNCiAgIGxvY2FsIHNjYWxlID0gezAsMH0NCiAgIGxvY2FsIHNjYWxlX3ggPSAwDQogICBsb2NhbCBwZXNhZGVsb19ub19kaXJlaXRvID0gMA0KDQogICAgaWYgdWkuZ2V0KHVpLnJlZmVyZW5jZSgiTUlTQyIsIlNldHRpbmdzIiwiRFBJIHNjYWxlIikpID09ICIxMDAlIiB0aGVuDQogICAgICAgIHNjYWxlID0geyB1aV9tZW51LmRwaV9zY2FsaW5nX3lbMV1bMV0sdWlfbWVudS5kcGlfc2NhbGluZ195WzFdWzJdIH0NCiAgICAgICAgc2NhbGVfeCA9IDc2DQogICAgICAgIHBlc2FkZWxvX25vX2RpcmVpdG8gPSB1aV9tZW51LnBlc2FkZWxvX25hX2NvemluaGEyWzFdDQogICAgZWxzZWlmIHVpLmdldCh1aS5yZWZlcmVuY2UoIk1JU0MiLCJTZXR0aW5ncyIsIkRQSSBzY2FsZSIpKSAgPT0gIjEyNSUiIHRoZW4NCiAgICAgICAgc2NhbGUgPSB7IHVpX21lbnUuZHBpX3NjYWxpbmdfeVsyXVsxXSx1aV9tZW51LmRwaV9zY2FsaW5nX3lbMl1bMl0gfQ0KICAgICAgICBzY2FsZV94ID0gOTUNCiAgICAgICAgcGVzYWRlbG9fbm9fZGlyZWl0byA9IHVpX21lbnUucGVzYWRlbG9fbmFfY296aW5oYTJbMl0NCiAgICBlbHNlaWYgdWkuZ2V0KHVpLnJlZmVyZW5jZSgiTUlTQyIsIlNldHRpbmdzIiwiRFBJIHNjYWxlIikpICA9PSAiMTUwJSIgdGhlbg0KICAgICAgICBzY2FsZSA9IHsgdWlfbWVudS5kcGlfc2NhbGluZ195WzNdWzFdLHVpX21lbnUuZHBpX3NjYWxpbmdfeVszXVsyXSB9DQogICAgICAgIHNjYWxlX3ggPSAxMTMNCiAgICAgICAgcGVzYWRlbG9fbm9fZGlyZWl0byA9IHVpX21lbnUucGVzYWRlbG9fbmFfY296aW5oYTJbM10NCiAgICBlbHNlaWYgdWkuZ2V0KHVpLnJlZmVyZW5jZSgiTUlTQyIsIlNldHRpbmdzIiwiRFBJIHNjYWxlIikpICA9PSAiMTc1JSIgdGhlbg0KICAgICAgICBzY2FsZSA9IHsgdWlfbWVudS5kcGlfc2NhbGluZ195WzRdWzFdLHVpX21lbnUuZHBpX3NjYWxpbmdfeVs0XVsyXSB9DQogICAgICAgIHNjYWxlX3ggPSAxMzINCiAgICAgICAgcGVzYWRlbG9fbm9fZGlyZWl0byA9IHVpX21lbnUucGVzYWRlbG9fbmFfY296aW5oYTJbNF0NCiAgICBlbHNlaWYgdWkuZ2V0KHVpLnJlZmVyZW5jZSgiTUlTQyIsIlNldHRpbmdzIiwiRFBJIHNjYWxlIikpICA9PSAiMjAwJSIgdGhlbg0KICAgICAgICBzY2FsZSA9IHsgdWlfbWVudS5kcGlfc2NhbGluZ195WzVdWzFdLHVpX21lbnUuZHBpX3NjYWxpbmdfeVs1XVsyXSB9DQogICAgICAgIHNjYWxlX3ggPSAxNTENCiAgICAgICAgcGVzYWRlbG9fbm9fZGlyZWl0byA9IHVpX21lbnUucGVzYWRlbG9fbmFfY296aW5oYTJbNV0NCiAgICBlbmQNCg0KICAgIGlmIHVpX21lbnUubW91c2VfcHJlc3MgPT0gZmFsc2UgdGhlbg0KICAgICAgICB1aV9tZW51Lm9sZF9tcG9zID0gbW91c2VfcG9zDQogICAgZW5kICAgICAgDQoNCiAgICBpZiBjbGllbnQua2V5X3N0YXRlKDB4MSkgdGhlbg0KICAgICAgICBpZiBub3QgdWlfbWVudS5tb3VzZV9wcmVzcyB0aGVuDQogICAgICAgICAgICB1aV9tZW51Lm1vdXNlX3ByZXNzID0gdHJ1ZQ0KICAgICAgICAgICAgaWYgbW91c2VfcG9zWzFdID4gbWVudV9wb3NbMV0gKyA1IGFuZCBtb3VzZV9wb3NbMV0gPCBtZW51X3Bvc1sxXSArIDUgKyBzY2FsZV94IHRoZW4NCiAgICAgICAgICAgICAgICBpZiBtb3VzZV9wb3NbMl0gPiBtZW51X3Bvc1syXSArIHNjYWxlWzFdIGFuZCBtb3VzZV9wb3NbMl0gPCBtZW51X3Bvc1syXSArIHNjYWxlWzJdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdWlfbWVudS5zZWxlY3RlZF9nc190YWIgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGVsc2VpZiBtb3VzZV9wb3NbMl0gPiBtZW51X3Bvc1syXSArIDE5IGFuZCAobWVudV9zaXplWzJdID49IHBlc2FkZWxvX25vX2RpcmVpdG8gYW5kIG1vdXNlX3Bvc1syXSA8IG1lbnVfcG9zWzJdICsgbWVudV9zaXplWzJdIG9yIG1vdXNlX3Bvc1syXSA8IG1lbnVfcG9zWzJdICsgcGVzYWRlbG9fbm9fZGlyZWl0bykgYW5kIHVpX21lbnUuc2VsZWN0ZWRfZ3NfdGFiID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICB1aV9tZW51LnNlbGVjdGVkX2dzX3RhYiA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZWxzZQ0KICAgICAgICB1aV9tZW51Lm1vdXNlX3ByZXNzID0gZmFsc2UNCiAgICBlbmQNCmVuZA0KDQoNCmZ1bmN0aW9uIG5ld190YWIoKQ0KDQogICAgdWlfbWVudS5pc19ob3ZlcmVkID0gZmFsc2UNCiAgICBpZiBub3QgdWkuaXNfbWVudV9vcGVuKCkgIHRoZW4NCiAgICAgICAgdWlfbWVudS5tZW51X2FscGhhID0gMA0KICAgIGVsc2UNCiAgICAgICAgdWlfbWVudS5tZW51X2FscGhhID0gMjU1DQogICAgZW5kDQoNCiAgICBpZiB1aV9tZW51Lm1lbnVfYWxwaGEgPCAyNTQgdGhlbiByZXR1cm4gZW5kDQoNCiAgICBsb2NhbCBtZW51X3NpemUgPSB7IHVpLm1lbnVfc2l6ZSgpIH0NCiAgICBsb2NhbCBkaXZpZGVfbWVudSA9IChtZW51X3NpemVbMV0gLSAxMikgLyAjdWlfbWVudS50YWJzX25hbWVzDQogICAgDQogICAgbG9jYWwgbWVudV9wb3MgPSB7IHVpLm1lbnVfcG9zaXRpb24oKSB9DQogICAgbG9jYWwgbW91c2VfcG9zID0geyB1aS5tb3VzZV9wb3NpdGlvbigpIH0NCg0KICAgIGlmIG5vdCB1aV9tZW51LnNlbGVjdGVkX2dzX3RhYiB0aGVuIHJldHVybiBlbmQNCg0KICAgIGZvciBrLHYgaW4gaXBhaXJzKHVpX21lbnUudGFic19uYW1lcykgZG8NCg0KICAgICAgICBpZiB1aV9tZW51LnNlbGVjdGVkX3RhYiA9PSBrIHRoZW4NCiAgICAgICAgICAgIHVpX21lbnUuc2VsZWN0ZWRfY29sb3JbMV0gPSB7MjAsIDIwLCAyMH0NCiAgICAgICAgICAgIHVpX21lbnUuc2VsZWN0ZWRfY29sb3JbMl0gPSB7MjEwLCAyMTAsIDIxMH0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdWlfbWVudS5zZWxlY3RlZF9jb2xvclsxXSA9IHsxMiwgMTIsIDEyfQ0KICAgICAgICAgICAgdWlfbWVudS5zZWxlY3RlZF9jb2xvclsyXSA9IHs5MCwgOTAsIDkwfQ0KICAgICAgICBlbmQNCiAgICAgICANCiAgICAgICAgcmVuZGVyZXIudGV4dChtZW51X3Bvc1sxXSArIChkaXZpZGVfbWVudSAqIGspIC0gZGl2aWRlX21lbnUgLyAyICxtZW51X3Bvc1syXSAtIDI1LHVpX21lbnUuc2VsZWN0ZWRfY29sb3JbMl1bMV0sIHVpX21lbnUuc2VsZWN0ZWRfY29sb3JbMl1bMl0sIHVpX21lbnUuc2VsZWN0ZWRfY29sb3JbMl1bM10sdWlfbWVudS5tZW51X2FscGhhLCJjZCsiLDAsdikNCg0KICAgICAgICBpZiBtb3VzZV9wb3NbMV0gPiBtZW51X3Bvc1sxXSArIChkaXZpZGVfbWVudSAqIGspIC0gIGRpdmlkZV9tZW51IGFuZCBtb3VzZV9wb3NbMV0gPCBtZW51X3Bvc1sxXSArIChkaXZpZGVfbWVudSAqIGspIGFuZCBtb3VzZV9wb3NbMl0gPiBtZW51X3Bvc1syXSAtIDUwIGFuZCBtb3VzZV9wb3NbMl0gPCBtZW51X3Bvc1syXSB0aGVuDQogICAgICAgICAgICB1aV9tZW51LmlzX2hvdmVyZWQgPSB0cnVlDQogICAgICAgICAgICBpZiAgY2xpZW50LmtleV9zdGF0ZSgweDEpIHRoZW4NCiAgICAgICAgICAgICAgICB1aV9tZW51LnNlbGVjdGVkX3RhYiA9IGsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZW5kZXJlci50ZXh0KG1lbnVfcG9zWzFdICsgKGRpdmlkZV9tZW51ICogdWlfbWVudS5zZWxlY3RlZF90YWIpIC0gZGl2aWRlX21lbnUgLyAyICxtZW51X3Bvc1syXSAtIDI1LDIxMCwgMjEwLCAyMTAsdWlfbWVudS5tZW51X2FscGhhLCJjZCsiLDAsdWlfbWVudS50YWJzX25hbWVzW3VpX21lbnUuc2VsZWN0ZWRfdGFiXSkNCmVuZA0KDQpmdW5jdGlvbiByZW5kZXJfdGFicygpIA0KICAgIGlmIG5vdCB1aV9tZW51LnNlbGVjdGVkX2dzX3RhYiB0aGVuIHJldHVybiBlbmQNCg0KICAgIGlmIHVpX21lbnUubWVudV9hbHBoYSA8IDI1NCB0aGVuIHJldHVybiBlbmQNCg0KICAgIGxvY2FsIG1lbnVfcyA9IHsgdWkubWVudV9zaXplKCkgfQ0KICAgIGxvY2FsIG1lbnVfcCA9IHsgdWkubWVudV9wb3NpdGlvbigpIH0NCg0KICAgIGxvY2FsIGRpdmlkZV9tZW51ID0gKG1lbnVfc1sxXSAtIDEyKSAvICN1aV9tZW51LnRhYnNfbmFtZXMNCiAgICANCg0KICAgIHJlbmRlcmVyLnRleHR1cmUodGV4X2lkLCBtZW51X3BbMV0gKyAxLCBtZW51X3BbMl0tNDksIG1lbnVfc1sxXSAtIDIsIDUwLCAyNTUsIDI1NSwgMjU1LCB1aV9tZW51Lm1lbnVfYWxwaGEsICJyIikNCg0KICAgIHJlbmRlcmVyLnJlY3RhbmdsZShtZW51X3BbMV0gKyAoZGl2aWRlX21lbnUgKiB1aV9tZW51LnNlbGVjdGVkX3RhYikgLSBkaXZpZGVfbWVudSArIDQsIG1lbnVfcFsyXSAtIDQ0LGRpdmlkZV9tZW51IC0xLDQ0LDExLDExLDExLHVpX21lbnUubWVudV9hbHBoYSkgDQogICAgDQogICAgLS10b3AgYmFyDQogICAgcmVuZGVyZXIucmVjdGFuZ2xlKG1lbnVfcFsxXSAsbWVudV9wWzJdIC0gNTMsbWVudV9zWzFdICwxICwxMiwxMiwxMix1aV9tZW51Lm1lbnVfYWxwaGEpIA0KICAgIHJlbmRlcmVyLnJlY3RhbmdsZShtZW51X3BbMV0gKyAyLG1lbnVfcFsyXSAtIDUyLG1lbnVfc1sxXSAtIDQsNSAsNjAsNjAsNjAsdWlfbWVudS5tZW51X2FscGhhKSANCiAgICByZW5kZXJlci5yZWN0YW5nbGUobWVudV9wWzFdICsgMixtZW51X3BbMl0gLSA1MSxtZW51X3NbMV0gLSA0LDMgLDQwLDQwLDQwLHVpX21lbnUubWVudV9hbHBoYSkgDQogICAgDQogICAgLS1sZWZ0IGJhcg0KICAgIHJlbmRlcmVyLnJlY3RhbmdsZShtZW51X3BbMV0gLG1lbnVfcFsyXSAtIDUzLDEsNTMgLDEyLDEyLDEyLHVpX21lbnUubWVudV9hbHBoYSkgDQogICAgcmVuZGVyZXIucmVjdGFuZ2xlKG1lbnVfcFsxXSArIDEsbWVudV9wWzJdIC0gNTIsNCw1MiAsNjAsNjAsNjAsdWlfbWVudS5tZW51X2FscGhhKSANCiAgICByZW5kZXJlci5yZWN0YW5nbGUobWVudV9wWzFdICsgMixtZW51X3BbMl0gLSA1MSwzLDUxICw0MCw0MCw0MCx1aV9tZW51Lm1lbnVfYWxwaGEpIA0KICAgIHJlbmRlcmVyLnJlY3RhbmdsZShtZW51X3BbMV0gKyA1LG1lbnVfcFsyXSAtIDQ4LDEsNDggLDYwLDYwLDYwLHVpX21lbnUubWVudV9hbHBoYSkNCiAgICANCiAgICAtLXJpZ2h0IGJhcg0KICAgIHJlbmRlcmVyLnJlY3RhbmdsZShtZW51X3BbMV0gKyBtZW51X3NbMV0gLSAxLG1lbnVfcFsyXSAtIDUzLDEsNTMgLDEyLDEyLDEyLHVpX21lbnUubWVudV9hbHBoYSkgDQogICAgcmVuZGVyZXIucmVjdGFuZ2xlKG1lbnVfcFsxXSArIG1lbnVfc1sxXSAtIDMsbWVudV9wWzJdIC0gNTIsMiw1MiAsNjAsNjAsNjAsdWlfbWVudS5tZW51X2FscGhhKSANCiAgICByZW5kZXJlci5yZWN0YW5nbGUobWVudV9wWzFdICsgbWVudV9zWzFdIC0gNSxtZW51X3BbMl0gLSA1MSwzLDUxICw0MCw0MCw0MCx1aV9tZW51Lm1lbnVfYWxwaGEpDQogICAgcmVuZGVyZXIucmVjdGFuZ2xlKG1lbnVfcFsxXSArIG1lbnVfc1sxXSAtIDYsbWVudV9wWzJdIC0gNDgsMSw0OCAsNjAsNjAsNjAsdWlfbWVudS5tZW51X2FscGhhKSANCg0KICAgIHJlbmRlcmVyLmdyYWRpZW50KG1lbnVfcFsxXSArIDcsbWVudV9wWzJdIC0gNDYsIG1lbnVfc1sxXS8yLDEsIDU5LCAxNzUsIDIyMiwgdWlfbWVudS5tZW51X2FscGhhLCAyMDIsIDcwLCAyMDUsIHVpX21lbnUubWVudV9hbHBoYSx0cnVlKQ0KICAgICAgICAgICAgICAgIA0KICAgIHJlbmRlcmVyLmdyYWRpZW50KG1lbnVfcFsxXSArIDcgKyBtZW51X3NbMV0vMiAsbWVudV9wWzJdIC0gNDYsIG1lbnVfc1sxXS8yIC0gMTMuMywgMSwyMDMsIDcwLCAyMDUsIHVpX21lbnUubWVudV9hbHBoYSwyMDQsIDIyNywgNTMsIHVpX21lbnUubWVudV9hbHBoYSx0cnVlKQ0KZW5kDQoNCmxvY2FsIGFhX3RhYmxlID0gew0KICAgIHN0YXRlcyA9IHsiR2xvYmFsIiwgIlN0YW5kIiwgIlJ1biIsICJEdWNrIiwgIkR1Y2stbW92ZSIsICJKdW1wIiwgIkR1Y2stanVtcCIsICJTbG93d2FsayIsICJGYWtlbGFnIn0sDQogICAgZGVmZW5zaXZlX3N0YXRlcyA9IHsiU3RhbmQiLCAiUnVuIiwgIkR1Y2siLCAiRHVjay1tb3ZlIiwgIkp1bXAiLCAiRHVjay1qdW1wIiwgIlNsb3d3YWxrIn0sDQogICAgYW50aV9iZl9zdGF0ZXMgPSB7IlN0YW5kIiwgIlJ1biIsICJEdWNrIiwgIkR1Y2stbW92ZSIsICJKdW1wIiwgIkR1Y2stanVtcCIsICJTbG93d2FsayJ9LA0KICAgIHBpdGNoID0geydPZmYnLCdEZWZhdWx0JywnVXAnLCAnRG93bicsICdNaW5pbWFsJywgJ1JhbmRvbScsICdDdXN0b20nfSwNCiAgICB5YXcgPSB7J09mZicsICcxODAnLCAnU3BpbicsICdTdGF0aWMnLCAnMTgwIFonLCAnQ3Jvc3NoYWlyJ30sDQogICAgeWF3X2Jhc2UgPSB7IkxvY2FsIHZpZXciLCAiQXQgdGFyZ2V0cyJ9DQp9DQoNCmxvY2FsIGFudGlfYmZfdGFibGUgPSB7DQogICAgbWF4X3BoYXNlID0gNSwNCiAgICBwaGFzZV90b19zdHJpbmcgPSB7IjEiLCAiMiIsICIzIiwgIjQiLCAiNSJ9LA0KICAgIGVudGl0eSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksDQogICAgZW50aXR5XzIgPSBuaWwsDQogICAgcmVjb3JkZWRfZW50ID0gbmlsLA0KICAgIG1pc3NfY291bnRlciA9IDAsDQogICAgdGltZXJfYnJ1dGUgPSAwLA0KICAgIGVudGl0eV9jaGFuZ2VkID0gZmFsc2UNCn0NCg0KbG9jYWwgX3VpID0gew0KICAgIGx1YSA9IHsNCiAgICAgICAgZW5hYmxlX2x1YSA9IGdyb3VwOmNoZWNrYm94KCJcdkludGVccnJpdHVzIi4uIiB8IFx2Ii4uIGV1cGhlbWlhLnVzZXJuYW1lKSwNCiAgICAgICAgdGV4dF9idWlsZCA9IGdyb3VwOmxhYmVsKCJCdWlsZCB+IFx2Ii4uZXVwaGVtaWEuYnVpbGQpLA0KICAgICAgICB0YWIgPSBncm91cDpjb21ib2JveCgiXG4gIiwgIkFudGktYWltIiwgIkRlZmVuc2l2ZSIsICJBbnRpLUJydXRlZm9yY2UiLCAiVmlzdWFscyIsICJNaXNjZWxsYW5lb3VzIiwgIkNvbmZpZyIpLCAgICANCiAgICB9LA0KDQogICAga2V5YmluZHMgPSB7DQogICAgICAgIGZyZWVzdGFuZGluZyA9IGdyb3VwX290aGVyOmhvdGtleSgiRnJlZXN0YW5kaW5nIiksDQogICAgICAgIG1hbnVhbF9sZWZ0ID0gZ3JvdXBfb3RoZXI6aG90a2V5KCJNYW51YWwgbGVmdCIpLA0KICAgICAgICBtYW51YWxfcmlnaHQgPSBncm91cF9vdGhlcjpob3RrZXkoIk1hbnVhbCByaWdodCIpLA0KICAgICAgICBtYW51YWxfZm9yd2FyZCA9IGdyb3VwX290aGVyOmhvdGtleSgiTWFudWFsIGZvcndhcmQiKSwNCiAgICAgICAgZnJlZXN0YW5kaW5nX2Rpc2FibGVycyA9IGdyb3VwX290aGVyOm11bHRpc2VsZWN0KCJGcmVlc3RhbmRpbmcgZGlzYWJsZXJzIiwgYWFfdGFibGUuc3RhdGVzKSwNCiAgICAgICAgdHdlYWtzID0gZ3JvdXBfb3RoZXI6bXVsdGlzZWxlY3QoIlR3ZWFrcyIsICJBbnRpLWJhY2tzdGFiIiwgIlNhZmUgaGVhZCIsICJFLVNwYW0iKQ0KICAgIH0sDQoNCiAgICBhbnRpYWltID0gew0KICAgICAgICBlbmFibGUgPSBncm91cDpjaGVja2JveCgiRW5hYmxlIH4gXHZCdWlsZGVyIiksDQogICAgICAgIHlhd19iYXNlID0gZ3JvdXA6Y29tYm9ib3goIllhdyBiYXNlIiwgYWFfdGFibGUueWF3X2Jhc2UpLA0KICAgICAgICBzdGF0ZSA9IGdyb3VwOmNvbWJvYm94KCJTdGF0ZSIsIGFhX3RhYmxlLnN0YXRlcykNCiAgICB9LA0KDQogICAgZGVmZW5zaXZlID0gew0KICAgICAgICBlbmFibGUgPSBncm91cDpjaGVja2JveCgiRW5hYmxlIH4gXHZEZWZlbnNpdmUiKSwNCiAgICAgICAgc3RhdGUgPSBncm91cDpjb21ib2JveCgiU3RhdGUiLCBhYV90YWJsZS5kZWZlbnNpdmVfc3RhdGVzKQ0KICAgIH0sDQoNCiAgICBhbnRpX2JmID0gew0KICAgICAgICBlbmFibGUgPSBncm91cDpjaGVja2JveCgiRW5hYmxlIH4gXHZBbnRpLUJydXRlZm9yY2UiKSwNCiAgICAgICAgcmVzZXRpZiA9IGdyb3VwOm11bHRpc2VsZWN0KCJSZXNldCB3aGVuIiwgeyJUYXJnZXQgRGVhdGgiLCAiUmVhY2hlZCBUaW1lIExpbmUifSksDQogICAgICAgIHN0YXRlID0gZ3JvdXA6bXVsdGlzZWxlY3QoIlN0YXRlIiwgYWFfdGFibGUuYW50aV9iZl9zdGF0ZXMpLA0KICAgICAgICBwaGFzZSA9IGdyb3VwOmNvbWJvYm94KCJQaGFzZSIsIGFudGlfYmZfdGFibGUucGhhc2VfdG9fc3RyaW5nKQ0KICAgIH0sDQoNCiAgICB2aXN1YWxzID0gew0KICAgICAgICBlbmFibGUgPSBncm91cDpjaGVja2JveCgiRW5hYmxlIH4gXHZWaXN1YWxzIiwgezI1NSwgMTE1LCAxMDUsIDI1NX0pLA0KICAgICAgICBoaXRsb2dzID0gZ3JvdXA6bXVsdGlzZWxlY3QoIkhpdGxvZ3MiLCB7IkhpdCIsICJNaXNzIiwgIk5hZGVkIiwgIkZpcmVkIn0pLA0KICAgICAgICBub3RpZnlfc3R5bGUgPSBncm91cDpjb21ib2JveCgiTm90aWZpY2F0aW9uIHN0eWxlIiwgeyJEZWZhdWx0IiwgIk1vZGVybiIsICJPRyJ9KSwNCiAgICAgICAgaW5kc19zdHlsZSA9IGdyb3VwOmNvbWJvYm94KCJJbmRpY2F0b3JzIiwgeyJPZmYiLCAiUGl4ZWwiLCAiTWluaW1hbCIsICJNb2Rlcm4ifSksDQogICAgICAgIGluZHNfb3B0aW9ucyA9IGdyb3VwOm11bHRpc2VsZWN0KCJJbmRpY2F0b3JzIG1vZGlmaWNhdGlvbiIsIHsiSW4gc2NvcGUiLCAiQW5pbWF0ZWQiLCAiQWxwaGEifSksDQogICAgICAgIHdhdGVybWFya3MgPSBncm91cDpjb21ib2JveCgiV2F0ZXJtYXJrIiwgeyJPZmYiLCAiRGVmYXVsdCIsICJNaW5pbWFsIiwgIkxlZ2FjeSIsICJJbnRlcml0dXMiLCAiQ291bnRyeS1CYXNlZCJ9KSwNCiAgICAgICAgd2F0ZXJtYXJrc19wb3MgPSBncm91cDpjb21ib2JveCgiUG9zIiwgeyJCb3R0b20iLCAiTGVmdCJ9KSwNCiAgICAgICAgd2F0ZXJtYXJrX29wdGlvbnMgPSBncm91cDptdWx0aXNlbGVjdCgiV2F0ZXJtYXJrIG1vZGlmaWNhdGlvbiIsIHsiRGVzeW5jIiwgIkFscGhhIn0pLA0KICAgICAgICBvdGhlcnMgPSBncm91cDptdWx0aXNlbGVjdCgiT3RoZXIiLCB7IkRlZmVuc2l2ZSIsICJTbG93LWRvd24ifSksDQogICAgICAgIGRlYnVnX3BhbmVsID0gZ3JvdXA6Y29tYm9ib3goIkRlYnVnIFBhbmVsIiwgeyJPZmYiLCAiRGVmYXVsdCIsICJNb2Rlcm4ifSksDQogICAgICAgIGFudGlhaW1fYXJyb3dzID0gZ3JvdXA6Y29tYm9ib3goIkFycm93cyIsIHsiT2ZmIiwgIlRlYW1Ta2VldCJ9KQ0KICAgIH0sDQoNCiAgICBtaXNjID0gew0KICAgICAgICBhbHRlcm5hdGl2ZV91aSA9IGdyb3VwOmNoZWNrYm94KCJBbHRlcm5hdGl2ZSB1aSIpLA0KICAgICAgICBhbmltcyA9IGdyb3VwOm11bHRpc2VsZWN0KCJBbmltcyIsICJwaXRjaCAwIiwicmV2ZXJzZWQgbGVncyIsInN0YXRpYyBsZWdzIiwgImxlZyBicmFrZXIiLCJwZXJmZWN0IiksDQogICAgICAgIGNsYW50YWcgPSBncm91cDpjaGVja2JveCgiQ2xhbnRhZyIpLA0KICAgICAgICBmYXN0X2xhZGRlciA9IGdyb3VwOmNoZWNrYm94KCJGYXN0IGxhZGRlciIpDQogICAgfSwNCg0KICAgIGNmZ3MgPSB7DQogICAgICAgIGNmZ3Nfc2VsZWN0ID0gZ3JvdXA6Y29tYm9ib3goIlxuICIsIHsiTG9jYWwiLCAiRGlzY29yZCJ9KSwNCiAgICAgICAgLS1pbXBvcnQgPSBncm91cDpidXR0b24oIlx2SW1wb3J0IiwgZnVuY3Rpb24oKSBpbXBvcnRfY2ZnKCkgZW5kKSwNCiAgICAgICAgLS1leHBvcnQgPSBncm91cDpidXR0b24oIlx2RXhwb3J0IiwgZnVuY3Rpb24oKSBleHBvcnRfY2ZnKCkgZW5kKSwNCiAgICAgICAgLS1kZWZhdWx0ID0gZ3JvdXA6YnV0dG9uKCJcdkRlZmF1bHQiLCBmdW5jdGlvbigpIGRlZmF1bHRfY2ZnKCkgZW5kKSwNCiAgICAgICAgLS1zaGFyZSA9IGdyb3VwOmJ1dHRvbigiXHZTaGFyZSBvbiBkaXNjb3JkIiwgZnVuY3Rpb24oKSBzaGFyZV9jZmcoKSBlbmQpLA0KICAgICAgICBkaXNjb3JkX2xpc3QgPSBncm91cDpsaXN0Ym94KCJEaXNjb3JkIiwgeyJObyBjZmdzIGZvdW5kLiJ9KSwNCiAgICAgICAgZGlzY29yZF9sb2FkID0gZ3JvdXA6YnV0dG9uKCJcdkxvYWQiLCBmdW5jdGlvbigpIGxvYWRfZGlzY29yZF9jZmdzKCkgZW5kKSwNCiAgICAgICAgZGlzY29yZF9yZWZyZXNoID0gZ3JvdXA6YnV0dG9uKCJcdlJlZnJlc2giLCBmdW5jdGlvbigpIHJlZnJlc2hfZGlzY29yZF9jZmdzKCkgZW5kKQ0KICAgIH0NCn0NCg0KX3VpLmx1YS50ZXh0X2J1aWxkOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSkNCl91aS5sdWEudGFiOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5taXNjLmFsdGVybmF0aXZlX3VpLCBmYWxzZX0pDQpfdWkuYW50aWFpbS5lbmFibGU6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJBbnRpLWFpbSJ9KQ0KX3VpLmFudGlhaW0ueWF3X2Jhc2U6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJBbnRpLWFpbSJ9LCB7X3VpLmFudGlhaW0uZW5hYmxlLCB0cnVlfSkNCl91aS5hbnRpYWltLnN0YXRlOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQW50aS1haW0ifSwge191aS5hbnRpYWltLmVuYWJsZSwgdHJ1ZX0pDQpfdWkuZGVmZW5zaXZlLmVuYWJsZTpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkRlZmVuc2l2ZSJ9KQ0KX3VpLmRlZmVuc2l2ZS5zdGF0ZTpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkRlZmVuc2l2ZSJ9LCB7X3VpLmRlZmVuc2l2ZS5lbmFibGUsIHRydWV9KQ0KX3VpLmNmZ3MuY2Znc19zZWxlY3Q6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJDb25maWcifSkNCi0tX3VpLmNmZ3MuaW1wb3J0OmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQ29uZmlnIn0sIHtfdWkuY2Zncy5jZmdzX3NlbGVjdCwgIkxvY2FsIn0pDQotLV91aS5jZmdzLmV4cG9ydDpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkNvbmZpZyJ9LCB7X3VpLmNmZ3MuY2Znc19zZWxlY3QsICJMb2NhbCJ9KQ0KX3VpLmNmZ3MuZGlzY29yZF9saXN0OmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQ29uZmlnIn0sIHtfdWkuY2Zncy5jZmdzX3NlbGVjdCwgIkRpc2NvcmQifSkNCl91aS5jZmdzLmRpc2NvcmRfbG9hZDpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkNvbmZpZyJ9LCB7X3VpLmNmZ3MuY2Znc19zZWxlY3QsICJEaXNjb3JkIn0pDQpfdWkuY2Zncy5kaXNjb3JkX3JlZnJlc2g6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJDb25maWcifSwge191aS5jZmdzLmNmZ3Nfc2VsZWN0LCAiRGlzY29yZCJ9KQ0KX3VpLnZpc3VhbHMuZW5hYmxlOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiVmlzdWFscyJ9KQ0KX3VpLmtleWJpbmRzLmZyZWVzdGFuZGluZzpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkFudGktYWltIn0pDQpfdWkua2V5YmluZHMubWFudWFsX2xlZnQ6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJBbnRpLWFpbSJ9KQ0KX3VpLmtleWJpbmRzLm1hbnVhbF9yaWdodDpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkFudGktYWltIn0pDQpfdWkua2V5YmluZHMubWFudWFsX2ZvcndhcmQ6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJBbnRpLWFpbSJ9KQ0KX3VpLmtleWJpbmRzLnR3ZWFrczpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkFudGktYWltIn0pDQpfdWkubWlzYy5jbGFudGFnOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiTWlzY2VsbGFuZW91cyJ9KQ0KX3VpLm1pc2MuZmFzdF9sYWRkZXI6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJNaXNjZWxsYW5lb3VzIn0pDQpfdWkubWlzYy5hbHRlcm5hdGl2ZV91aTpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIk1pc2NlbGxhbmVvdXMifSkNCl91aS5taXNjLmFuaW1zOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiTWlzY2VsbGFuZW91cyJ9KQ0KX3VpLmtleWJpbmRzLmZyZWVzdGFuZGluZ19kaXNhYmxlcnM6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJBbnRpLWFpbSJ9KQ0KX3VpLnZpc3VhbHMubm90aWZ5X3N0eWxlOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiVmlzdWFscyJ9LCB7X3VpLnZpc3VhbHMuZW5hYmxlLCB0cnVlfSkNCl91aS52aXN1YWxzLmFudGlhaW1fYXJyb3dzOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiVmlzdWFscyJ9LCB7X3VpLnZpc3VhbHMuZW5hYmxlLCB0cnVlfSkNCl91aS52aXN1YWxzLmluZHNfc3R5bGU6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJWaXN1YWxzIn0sIHtfdWkudmlzdWFscy5lbmFibGUsIHRydWV9KQ0KX3VpLnZpc3VhbHMuaGl0bG9nczpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIlZpc3VhbHMifSwge191aS52aXN1YWxzLmVuYWJsZSwgdHJ1ZX0pDQpfdWkudmlzdWFscy53YXRlcm1hcmtzOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiVmlzdWFscyJ9LCB7X3VpLnZpc3VhbHMuZW5hYmxlLCB0cnVlfSkNCl91aS52aXN1YWxzLndhdGVybWFya3NfcG9zOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiVmlzdWFscyJ9LCB7X3VpLnZpc3VhbHMuZW5hYmxlLCB0cnVlfSwge191aS52aXN1YWxzLndhdGVybWFya3MsIGZ1bmN0aW9uKCkgcmV0dXJuIF91aS52aXN1YWxzLndhdGVybWFya3MudmFsdWUgfj0gIk9mZiIgZW5kIH0pDQpfdWkudmlzdWFscy5vdGhlcnM6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJWaXN1YWxzIn0sIHtfdWkudmlzdWFscy5lbmFibGUsIHRydWV9KQ0KX3VpLnZpc3VhbHMuZGVidWdfcGFuZWw6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJWaXN1YWxzIn0sIHtfdWkudmlzdWFscy5lbmFibGUsIHRydWV9KQ0KX3VpLnZpc3VhbHMud2F0ZXJtYXJrX29wdGlvbnM6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJWaXN1YWxzIn0sIHtfdWkudmlzdWFscy5lbmFibGUsIHRydWV9LCB7X3VpLnZpc3VhbHMud2F0ZXJtYXJrcywgZnVuY3Rpb24oKSByZXR1cm4gX3VpLnZpc3VhbHMud2F0ZXJtYXJrcy52YWx1ZSB+PSAiT2ZmIiBlbmQgfSkNCl91aS52aXN1YWxzLmluZHNfb3B0aW9uczpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIlZpc3VhbHMifSwge191aS52aXN1YWxzLmluZHNfc3R5bGUsIGZ1bmN0aW9uKCkgcmV0dXJuIF91aS52aXN1YWxzLmluZHNfc3R5bGUudmFsdWUgfj0gIk9mZiIgZW5kIH0sIHtfdWkudmlzdWFscy5lbmFibGUsIHRydWV9KQ0KLS1fdWkuY2Zncy5kZWZhdWx0OmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQ29uZmlnIn0sIHtfdWkuY2Zncy5jZmdzX3NlbGVjdCwgIkxvY2FsIn0pDQotLV91aS5jZmdzLnNoYXJlOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQ29uZmlnIn0sIHtfdWkuY2Zncy5jZmdzX3NlbGVjdCwgIkxvY2FsIn0pDQpfdWkuYW50aV9iZi5lbmFibGU6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJBbnRpLUJydXRlZm9yY2UifSkNCl91aS5hbnRpX2JmLnBoYXNlOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQW50aS1CcnV0ZWZvcmNlIn0sIHtfdWkuYW50aV9iZi5lbmFibGUsIHRydWV9KQ0KX3VpLmFudGlfYmYucmVzZXRpZjpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkFudGktQnJ1dGVmb3JjZSJ9LCB7X3VpLmFudGlfYmYuZW5hYmxlLCB0cnVlfSkNCl91aS5hbnRpX2JmLnN0YXRlOmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQW50aS1CcnV0ZWZvcmNlIn0sIHtfdWkuYW50aV9iZi5lbmFibGUsIHRydWV9KQ0KDQphYV9idWlsZGVyID0ge30NCmZvciBpLCBzdGF0ZSBpbiBpcGFpcnMoYWFfdGFibGUuc3RhdGVzKSBkbw0KICAgIGFhX2J1aWxkZXJbc3RhdGVdID0ge30NCiAgICBsb2NhbCBtZW51ID0gYWFfYnVpbGRlcltzdGF0ZV0NCg0KICAgIG1lbnUuZW5hYmxlID0gZ3JvdXA6Y2hlY2tib3goIkVuYWJsZSB+IFx2ICIuLiBhYV90YWJsZS5zdGF0ZXNbaV0pDQogICAgbWVudS5waXRjaCA9IGdyb3VwOmNvbWJvYm94KCJQaXRjaCIsIGFhX3RhYmxlLnBpdGNoKQ0KICAgIG1lbnUuY3VzdG9tX3BpdGNoID0gZ3JvdXA6c2xpZGVyKCJcbiAiLCAtODksIDg5LCAwLCB0cnVlLCAiwrAiKQ0KICAgIG1lbnUueWF3ID0gZ3JvdXA6Y29tYm9ib3goIllhdyIsIGFhX3RhYmxlLnlhdykNCiAgICBtZW51Lnlhd190eXBlID0gZ3JvdXA6Y29tYm9ib3goIllhdyB0eXBlIiwgeyJTdGF0aWMiLCAiTCAmIFIiLCAiRGVsYXkifSkNCiAgICBtZW51Lnlhd19zbGlkZXJfc3RhdGljID0gZ3JvdXA6c2xpZGVyKCJcbiAiLCAtMTgwLCAxODAsIDAsIHRydWUsICLCsCIsIDEpDQogICAgbWVudS55YXdfc2xpZGVyX2wgPSBncm91cDpzbGlkZXIoIkxlZnQiLCAtMTgwLCAxODAsIDAsIHRydWUsICLCsCIsIDEpDQogICAgbWVudS55YXdfc2xpZGVyX3IgPSBncm91cDpzbGlkZXIoIlJpZ2h0IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCAiwrAiLCAxKQ0KICAgIG1lbnUueWF3X3NsaWRlcl9kZWxheSA9IGdyb3VwOnNsaWRlcigiRGVsYXkiLCAwLCAxNSwgMCwgdHJ1ZSwgIiUiLCAxKQ0KICAgIG1lbnUueWF3X2ppdHRlciA9IGdyb3VwOmNvbWJvYm94KCJZYXcgaml0dGVyIiwgeyJPZmYiLCAiT2Zmc2V0IiwgIkNlbnRlciIsICJSYW5kb20iLCAiU2tpdHRlciJ9KQ0KICAgIG1lbnUueWF3X2ppdHRlcl9tb2RlID0gZ3JvdXA6Y29tYm9ib3goIkppdHRlciB0eXBlIiwgeyJTdGF0aWMiLCAiTCAmIFIifSkNCiAgICBtZW51Lnlhd19qaXR0ZXJfc2xpZGVyX3N0YXRpYyA9IGdyb3VwOnNsaWRlcigiXG4gIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCAiwrAiLCAxKQ0KICAgIG1lbnUueWF3X2ppdHRlcl9zbGlkZXJfbCA9IGdyb3VwOnNsaWRlcigiTGVmdCIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgIsKwIiwgMSkNCiAgICBtZW51Lnlhd19qaXR0ZXJfc2xpZGVyX3IgPSBncm91cDpzbGlkZXIoIlJpZ2h0IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCAiwrAiLCAxKQ0KICAgIG1lbnUuYm9keV95YXcgPSBncm91cDpjb21ib2JveCgiQm9keSB5YXciLCB7Ik9mZiIsICJPcHBvc2l0ZSIsICJKaXR0ZXIiLCAiU3RhdGljIn0pDQogICAgbWVudS5ib2R5X3lhd19zbGlkZXIgPSBncm91cDpzbGlkZXIoIlxuICIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgIsKwIiwgMSkNCmVuZA0KDQpmb3IgaSwgc3RhdGUgaW4gaXBhaXJzKGFhX3RhYmxlLnN0YXRlcykgZG8NCiAgICBsb2NhbCBtZW51ID0gYWFfYnVpbGRlcltzdGF0ZV0NCiAgICBsb2NhbCBpc190YWIgPSB7X3VpLmx1YS50YWIsICJBbnRpLWFpbSJ9DQogICAgbG9jYWwgaXNfZW5hYmxlZF9sdWEgPSB7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfQ0KICAgIGxvY2FsIGlzX2NoZWNrYm94X2NoZWNrZWQgPSB7X3VpLmFudGlhaW0uZW5hYmxlLCB0cnVlfQ0KICAgIGxvY2FsIGlzX2VuYWJsZWQgPSB7bWVudS5lbmFibGUsIHRydWV9DQogICAgbG9jYWwgaXNfc3RhdGUgPSB7X3VpLmFudGlhaW0uc3RhdGUsIGFhX3RhYmxlLnN0YXRlc1tpXX0NCiAgICBtZW51LmVuYWJsZTpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfY2hlY2tib3hfY2hlY2tlZCwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS5waXRjaDpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfY2hlY2tib3hfY2hlY2tlZCwgaXNfZW5hYmxlZCwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS5jdXN0b21fcGl0Y2g6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2NoZWNrYm94X2NoZWNrZWQsIGlzX2VuYWJsZWQsIHttZW51LnBpdGNoLCAiQ3VzdG9tIn0sIGlzX2VuYWJsZWRfbHVhKQ0KICAgIG1lbnUueWF3OmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19jaGVja2JveF9jaGVja2VkLCBpc19lbmFibGVkLCBpc19lbmFibGVkX2x1YSkNCiAgICBtZW51Lnlhd190eXBlOmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19jaGVja2JveF9jaGVja2VkLCBpc19lbmFibGVkLCB7bWVudS55YXcsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3LnZhbHVlIH49ICJPZmYiIGVuZH0sIGlzX2VuYWJsZWRfbHVhKQ0KICAgIG1lbnUueWF3X3NsaWRlcl9zdGF0aWM6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2NoZWNrYm94X2NoZWNrZWQsIGlzX2VuYWJsZWQsIHttZW51LnlhdywgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXcudmFsdWUgfj0gIk9mZiIgZW5kfSwge21lbnUueWF3X3R5cGUsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3X3R5cGUudmFsdWUgPT0gIlN0YXRpYyIgZW5kfSwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS55YXdfc2xpZGVyX2w6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2NoZWNrYm94X2NoZWNrZWQsIGlzX2VuYWJsZWQsIHttZW51LnlhdywgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXcudmFsdWUgfj0gIk9mZiIgZW5kfSwge21lbnUueWF3X3R5cGUsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3X3R5cGUudmFsdWUgfj0gIlN0YXRpYyIgZW5kfSwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS55YXdfc2xpZGVyX3I6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2NoZWNrYm94X2NoZWNrZWQsIGlzX2VuYWJsZWQsIHttZW51LnlhdywgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXcudmFsdWUgfj0gIk9mZiIgZW5kfSwge21lbnUueWF3X3R5cGUsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3X3R5cGUudmFsdWUgfj0gIlN0YXRpYyIgZW5kfSwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS55YXdfc2xpZGVyX2RlbGF5OmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19jaGVja2JveF9jaGVja2VkLCBpc19lbmFibGVkLCB7bWVudS55YXcsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3LnZhbHVlIH49ICJPZmYiIGVuZH0sIHttZW51Lnlhd190eXBlLCBmdW5jdGlvbigpIHJldHVybiBtZW51Lnlhd190eXBlLnZhbHVlID09ICJEZWxheSIgZW5kfSwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS55YXdfaml0dGVyOmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19jaGVja2JveF9jaGVja2VkLCBpc19lbmFibGVkLCB7bWVudS55YXcsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3LnZhbHVlIH49ICJPZmYiIGVuZH0sIGlzX2VuYWJsZWRfbHVhKQ0KICAgIG1lbnUueWF3X2ppdHRlcl9tb2RlOmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19jaGVja2JveF9jaGVja2VkLCBpc19lbmFibGVkLCB7bWVudS55YXcsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3LnZhbHVlIH49ICJPZmYiIGVuZH0sIHttZW51Lnlhd19qaXR0ZXIsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3X2ppdHRlci52YWx1ZSB+PSAiT2ZmIiBlbmR9LCBpc19lbmFibGVkX2x1YSkNCiAgICBtZW51Lnlhd19qaXR0ZXJfc2xpZGVyX3N0YXRpYzpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfY2hlY2tib3hfY2hlY2tlZCwgaXNfZW5hYmxlZCwge21lbnUueWF3LCBmdW5jdGlvbigpIHJldHVybiBtZW51Lnlhdy52YWx1ZSB+PSAiT2ZmIiBlbmR9LCB7bWVudS55YXdfaml0dGVyLCBmdW5jdGlvbigpIHJldHVybiBtZW51Lnlhd19qaXR0ZXIudmFsdWUgfj0gIk9mZiIgZW5kfSwge21lbnUueWF3X2ppdHRlcl9tb2RlLCBmdW5jdGlvbigpIHJldHVybiBtZW51Lnlhd19qaXR0ZXJfbW9kZS52YWx1ZSA9PSAiU3RhdGljIiBlbmR9LCBpc19lbmFibGVkX2x1YSkNCiAgICBtZW51Lnlhd19qaXR0ZXJfc2xpZGVyX2w6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2NoZWNrYm94X2NoZWNrZWQsIGlzX2VuYWJsZWQsIHttZW51LnlhdywgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXcudmFsdWUgfj0gIk9mZiIgZW5kfSwge21lbnUueWF3X2ppdHRlciwgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXdfaml0dGVyLnZhbHVlIH49ICJPZmYiIGVuZH0sIHttZW51Lnlhd19qaXR0ZXJfbW9kZSwgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXdfaml0dGVyX21vZGUudmFsdWUgPT0gIkwgJiBSIiBlbmR9LCBpc19lbmFibGVkX2x1YSkNCiAgICBtZW51Lnlhd19qaXR0ZXJfc2xpZGVyX3I6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2NoZWNrYm94X2NoZWNrZWQsIGlzX2VuYWJsZWQsIHttZW51LnlhdywgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXcudmFsdWUgfj0gIk9mZiIgZW5kfSwge21lbnUueWF3X2ppdHRlciwgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXdfaml0dGVyLnZhbHVlIH49ICJPZmYiIGVuZH0sIHttZW51Lnlhd19qaXR0ZXJfbW9kZSwgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXdfaml0dGVyX21vZGUudmFsdWUgPT0gIkwgJiBSIiBlbmR9LCBpc19lbmFibGVkX2x1YSkNCiAgICBtZW51LmJvZHlfeWF3OmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19jaGVja2JveF9jaGVja2VkLCBpc19lbmFibGVkLCBpc19lbmFibGVkX2x1YSkNCiAgICBtZW51LmJvZHlfeWF3X3NsaWRlcjpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfY2hlY2tib3hfY2hlY2tlZCwgaXNfZW5hYmxlZCwge21lbnUuYm9keV95YXcsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUuYm9keV95YXcudmFsdWUgfj0gIk9mZiIgYW5kIG1lbnUuYm9keV95YXcudmFsdWUgfj0gIk9wcG9zaXRlIiBlbmR9LCBpc19lbmFibGVkX2x1YSkNCmVuZA0KDQpkZWZlbnNpdmVfYnVpbGRlciA9IHt9DQpmb3IgaSwgc3RhdGUgaW4gaXBhaXJzKGFhX3RhYmxlLmRlZmVuc2l2ZV9zdGF0ZXMpIGRvIA0KICAgIGRlZmVuc2l2ZV9idWlsZGVyW3N0YXRlXSA9IHt9DQogICAgbG9jYWwgbWVudSA9IGRlZmVuc2l2ZV9idWlsZGVyW3N0YXRlXQ0KDQogICAgbWVudS5mb3JjZSA9IGdyb3VwOmNoZWNrYm94KCJGb3JjZSBcdmRlZmVuc2l2ZSIpDQogICAgbWVudS5lbmFibGUgPSBncm91cDpjaGVja2JveCgiT3ZlcnJpZGUgflx2ICIuLiBhYV90YWJsZS5kZWZlbnNpdmVfc3RhdGVzW2ldKQ0KICAgIG1lbnUucGl0Y2ggPSBncm91cDpjb21ib2JveCgiUGl0Y2giLCAnRGlzYWJsZWQnLCAnVXAnLCAnWmVybycsICdSYW5kb20nLCAnSW50ZXJpdHVzJywgJ0N1c3RvbScpDQogICAgbWVudS5jdXN0b21fcGl0Y2ggPSBncm91cDpzbGlkZXIoIlxuICIsIC04OSwgODksIDAsIHRydWUsICLCsCIpDQogICAgbWVudS55YXcgPSBncm91cDpjb21ib2JveCgiWWF3IiwgJ0Rpc2FibGVkJywgJ1NpZGV3YXlzJywgJ1JhbmRvbScsICdTcGluJywgIjMtV2F5IiwgIjUtV2F5IiwgIkwgJiBSIikNCiAgICBtZW51Lnlhd19zbGlkZXIgPSBncm91cDpzbGlkZXIoIlxuICIsIDEsIDEwMCwgNzAsIHRydWUsICIlIikNCiAgICBtZW51Lnlhd19sZWZ0ID0gZ3JvdXA6c2xpZGVyKCJMZWZ0IiwgLTEwMCwgMTAwLCAwLCB0cnVlLCAiwrAiKQ0KICAgIG1lbnUueWF3X3JpZ2h0ID0gZ3JvdXA6c2xpZGVyKCJSaWdodCIsIC0xMDAsIDEwMCwgMCwgdHJ1ZSwgIsKwIikNCiAgICBtZW51Lnlhd19qaXR0ZXIgPSBncm91cDpjb21ib2JveCgiWWF3IGppdHRlciIsIHsiT2ZmIiwgIk9mZnNldCIsICJDZW50ZXIiLCAiUmFuZG9tIiwgIlNraXR0ZXIifSkNCiAgICBtZW51Lnlhd19qaXR0ZXJfc2xpZGVyID0gZ3JvdXA6c2xpZGVyKCJcbiAiLCAtMTgwLCAxODAsIDAsIHRydWUsICLCsCIpDQogICAgbWVudS5tb2RlID0gZ3JvdXA6Y29tYm9ib3goIk1vZGUiLCB7IkFsd2F5cyBvbiIsICJTd2l0Y2giLCAiSW52YWxpZCB0aWNrcyJ9KQ0KZW5kDQoNCmZvciBpLCBzdGF0ZSBpbiBpcGFpcnMoYWFfdGFibGUuZGVmZW5zaXZlX3N0YXRlcykgZG8gDQogICAgbG9jYWwgbWVudSA9IGRlZmVuc2l2ZV9idWlsZGVyW3N0YXRlXQ0KICAgIGxvY2FsIGlzX3RhYiA9IHtfdWkubHVhLnRhYiwgIkRlZmVuc2l2ZSJ9DQogICAgbG9jYWwgaXNfZW5hYmxlZCA9IHtfdWkuZGVmZW5zaXZlLmVuYWJsZSwgdHJ1ZX0NCiAgICBsb2NhbCBpc19lbmFibGVkX2x1YSA9IHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9DQogICAgbG9jYWwgaXNfc3RhdGUgPSB7X3VpLmRlZmVuc2l2ZS5zdGF0ZSwgYWFfdGFibGUuZGVmZW5zaXZlX3N0YXRlc1tpXX0NCiAgICBtZW51LmZvcmNlOmRlcGVuZChpc190YWIsIGlzX2VuYWJsZWQsIGlzX3N0YXRlLCB7bWVudS5lbmFibGUsIGZhbHNlfSwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS5lbmFibGU6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2VuYWJsZWQsIHttZW51LmZvcmNlLCBmYWxzZX0sIGlzX2VuYWJsZWRfbHVhKQ0KICAgIG1lbnUucGl0Y2g6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2VuYWJsZWQsIHttZW51LmVuYWJsZSwgdHJ1ZX0sIGlzX2VuYWJsZWRfbHVhKQ0KICAgIG1lbnUuY3VzdG9tX3BpdGNoOmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19lbmFibGVkLCB7bWVudS5lbmFibGUsIHRydWV9LCB7bWVudS5waXRjaCwgIkN1c3RvbSJ9LCBpc19lbmFibGVkX2x1YSkNCiAgICBtZW51LnlhdzpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfZW5hYmxlZCwge21lbnUuZW5hYmxlLCB0cnVlfSwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS55YXdfc2xpZGVyOmRlcGVuZChpc190YWIsIGlzX3N0YXRlLCBpc19lbmFibGVkLCB7bWVudS5lbmFibGUsIHRydWV9LCB7bWVudS55YXcsIGZ1bmN0aW9uKCkgcmV0dXJuIG1lbnUueWF3LnZhbHVlIH49ICJPZmYiIGVuZH0sIGlzX2VuYWJsZWRfbHVhLCB7bWVudS55YXcsICJTcGluIn0pDQogICAgbWVudS55YXdfbGVmdDpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfZW5hYmxlZCwge21lbnUuZW5hYmxlLCB0cnVlfSwge21lbnUueWF3LCBmdW5jdGlvbigpIHJldHVybiBtZW51Lnlhdy52YWx1ZSB+PSAiT2ZmIiBlbmR9LCBpc19lbmFibGVkX2x1YSwge21lbnUueWF3LCAiTCAmIFIifSkNCiAgICBtZW51Lnlhd19yaWdodDpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfZW5hYmxlZCwge21lbnUuZW5hYmxlLCB0cnVlfSwge21lbnUueWF3LCBmdW5jdGlvbigpIHJldHVybiBtZW51Lnlhdy52YWx1ZSB+PSAiT2ZmIiBlbmR9LCBpc19lbmFibGVkX2x1YSwge21lbnUueWF3LCAiTCAmIFIifSkNCiAgICBtZW51Lnlhd19qaXR0ZXI6ZGVwZW5kKGlzX3RhYiwgaXNfc3RhdGUsIGlzX2VuYWJsZWQsIHttZW51LmVuYWJsZSwgdHJ1ZX0sIHttZW51LnlhdywgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXcudmFsdWUgfj0gIk9mZiIgZW5kfSwgaXNfZW5hYmxlZF9sdWEpDQogICAgbWVudS55YXdfaml0dGVyX3NsaWRlcjpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfZW5hYmxlZCwge21lbnUuZW5hYmxlLCB0cnVlfSwge21lbnUueWF3X2ppdHRlciwgZnVuY3Rpb24oKSByZXR1cm4gbWVudS55YXdfaml0dGVyLnZhbHVlIH49ICJPZmYiIGVuZH0sIGlzX2VuYWJsZWRfbHVhKQ0KICAgIG1lbnUubW9kZTpkZXBlbmQoaXNfdGFiLCBpc19zdGF0ZSwgaXNfZW5hYmxlZCwge21lbnUuZW5hYmxlLCB0cnVlfSwgaXNfZW5hYmxlZF9sdWEpDQplbmQNCg0KYW50aV9iZl9idWlsZGVyID0ge30NCmZvciBpID0gMSwgYW50aV9iZl90YWJsZS5tYXhfcGhhc2UgZG8gDQogICAgYW50aV9iZl9idWlsZGVyW2ldID0ge30NCiAgICBsb2NhbCBtZW51ID0gYW50aV9iZl9idWlsZGVyW2ldDQogICAgDQogICAgbWVudS5lbmFibGVkID0gZ3JvdXA6Y2hlY2tib3goIkVuYWJsZSB+IFtcdiIuLmkuLiJccl0gcGhhc2UiKQ0KICAgIG1lbnUuaml0dGVyID0gZ3JvdXA6c2xpZGVyKCJZYXcgaml0dGVyIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCAiZyIsIDEpDQogICAgbWVudS5ib2R5X3lhdyA9IGdyb3VwOnNsaWRlcigiQm9keSB5YXcgbGltaXQiLCAtMTgwLCAxODAsIDAsIHRydWUsICJwcm9jIiwgMSkNCmVuZA0KDQpmb3IgaSA9IDEsIGFudGlfYmZfdGFibGUubWF4X3BoYXNlIGRvIA0KICAgIGxvY2FsIG1lbnUgPSBhbnRpX2JmX2J1aWxkZXJbaV0NCg0KICAgIG1lbnUuZW5hYmxlZDpkZXBlbmQoe191aS5sdWEuZW5hYmxlX2x1YSwgdHJ1ZX0sIHtfdWkubHVhLnRhYiwgIkFudGktQnJ1dGVmb3JjZSJ9LCB7X3VpLmFudGlfYmYuZW5hYmxlLCB0cnVlfSwge191aS5hbnRpX2JmLnBoYXNlLCBhbnRpX2JmX3RhYmxlLnBoYXNlX3RvX3N0cmluZ1tpXX0pDQogICAgbWVudS5qaXR0ZXI6ZGVwZW5kKHtfdWkubHVhLmVuYWJsZV9sdWEsIHRydWV9LCB7X3VpLmx1YS50YWIsICJBbnRpLUJydXRlZm9yY2UifSwge191aS5hbnRpX2JmLmVuYWJsZSwgdHJ1ZX0sIHtfdWkuYW50aV9iZi5waGFzZSwgYW50aV9iZl90YWJsZS5waGFzZV90b19zdHJpbmdbaV19LCB7bWVudS5lbmFibGVkLCB0cnVlfSkNCiAgICBtZW51LmJvZHlfeWF3OmRlcGVuZCh7X3VpLmx1YS5lbmFibGVfbHVhLCB0cnVlfSwge191aS5sdWEudGFiLCAiQW50aS1CcnV0ZWZvcmNlIn0sIHtfdWkuYW50aV9iZi5lbmFibGUsIHRydWV9LCB7X3VpLmFudGlfYmYucGhhc2UsIGFudGlfYmZfdGFibGUucGhhc2VfdG9fc3RyaW5nW2ldfSwge21lbnUuZW5hYmxlZCwgdHJ1ZX0pDQplbmQNCg0KbG9jYWwgY29uZmlnX2l0ZW1zID0gew0KICAgIF91aS5hbnRpYWltLA0KICAgIF91aS5kZWZlbnNpdmUsDQogICAgZGVmZW5zaXZlX2J1aWxkZXIsDQogICAgYWFfYnVpbGRlciwNCiAgICBfdWkuYW50aV9iZiwNCiAgICBhbnRpX2JmX2J1aWxkZXINCn0NCg0KbG9jYWwgcGFja2FnZSA9IHB1aS5zZXR1cChjb25maWdfaXRlbXMpDQoNCi0tIGZ1bmN0aW9uIGltcG9ydF9jZmcoKQ0KLS0gICAgIGxvY2FsIHByb3RlY3RlZCA9IGZ1bmN0aW9uKCkNCi0tICAgICAgICAgZGVjcnlwdGVkID0ganNvbi5wYXJzZShiYXNlNjQuZGVjb2RlKGNsaXBib2FyZC5nZXQoKSkpDQotLSAgICAgICAgIHBhY2thZ2U6bG9hZChkZWNyeXB0ZWQpDQotLSAgICAgZW5kDQoNCi0tICAgICBpZiBwY2FsbChwcm90ZWN0ZWQpIHRoZW4NCi0tICAgICAgICAgbmV3X25vdGlmeSgiU3VjY2Vzc2Z1bGx5ISBJbXBvcnRlZCBzZXR0aW5ncyBmcm9tIGNsaXBib2FyZCIsIDI1NSwgMTE1LCAxMDUpDQotLSAgICAgZWxzZQ0KLS0gICAgICAgICBuZXdfbm90aWZ5KCJFcnJvciIsIDIxNCwgMCwgMzYsMjU1KQ0KLS0gICAgIGVuZA0KLS0gZW5kDQoNCi0tIGZ1bmN0aW9uIGV4cG9ydF9jZmcoKQ0KLS0gICAgIGxvY2FsIHByb3RlY3RlZCA9IGZ1bmN0aW9uKCkNCi0tICAgICAgICAgZGF0YSA9IHBhY2thZ2U6c2F2ZSgpDQotLSAgICAgICAgIGxvY2FsIGVuY3J5cHRlZCA9IGJhc2U2NC5lbmNvZGUoanNvbi5zdHJpbmdpZnkoZGF0YSkpDQoNCi0tICAgICAgICAgY2xpcGJvYXJkLnNldChlbmNyeXB0ZWQpDQotLSAgICAgZW5kDQoNCi0tICAgICBpZiBwY2FsbChwcm90ZWN0ZWQpIHRoZW4NCi0tICAgICAgICAgbmV3X25vdGlmeSgiU3VjY2Vzc2Z1bGx5ISBFeHBvcnRlZCBzZXR0aW5ncyB0byBjbGlwYm9hcmQiLCAyNTUsIDExNSwgMTA1KQ0KLS0gICAgIGVsc2UNCi0tICAgICAgICAgbmV3X25vdGlmeSgiRXJyb3IiLCAyMTQsIDAsIDM2LDI1NSkNCi0tICAgICBlbmQNCi0tIGVuZA0KDQpsb2NhbCBjZmdzX3RvX2xpc3QgPSB7fQ0KZnVuY3Rpb24gcmVmcmVzaF9kaXNjb3JkX2NmZ3MoKQ0KICAgIGh0dHAuZ2V0KCJodHRwczovL3d5c2NpZ3VmYTkuY3Q4LnBsL2dldF9jZmdfbGlzdC5waHAiLCBmdW5jdGlvbihyLCBzKQ0KICAgICAgICBpZiByIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBqc29uLnBhcnNlKHMuYm9keSkNCiAgICAgICAgICAgIGNmZ3NfdG9fbGlzdCA9IGRhdGEuY2Zncw0KICAgICAgICAgICAgX3VpLmNmZ3MuZGlzY29yZF9saXN0OnVwZGF0ZShkYXRhLmNmZ3MpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIG5ld19ub3RpZnkoIkVycm9yIiwyMTQsIDAsIDM2LDI1NSkNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQpyZWZyZXNoX2Rpc2NvcmRfY2ZncygpDQoNCmZ1bmN0aW9uIGxvYWRfZGlzY29yZF9jZmdzKCkNCiAgICBsb2NhbCBsaXN0X2l0ZW0gPSAoX3VpLmNmZ3MuZGlzY29yZF9saXN0OmdldCgpICsgMSkNCiAgICBpZiBsaXN0X2l0ZW0gPT0gbmlsIHRoZW4gcmV0dXJuIGVuZA0KICAgIGxvY2FsIHNlbGVjdGVkX2l0ZW0gPSBjZmdzX3RvX2xpc3RbbGlzdF9pdGVtXQ0KDQogICAgaHR0cC5nZXQoImh0dHBzOi8vd3lzY2lndWZhOS5jdDgucGwvZ2V0X2NmZy5waHA/Y2Zncz0iLi5zZWxlY3RlZF9pdGVtLCBmdW5jdGlvbihyLCBzKQ0KICAgICAgICBpZiByIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBqc29uLnBhcnNlKHMuYm9keSkNCiAgICAgICAgICAgIGRlY3J5cHRlZCA9IGpzb24ucGFyc2UoYmFzZTY0LmRlY29kZShkYXRhLmNmZ3MpKQ0KICAgICAgICAgICAgcGFja2FnZTpsb2FkKGRlY3J5cHRlZCkNCg0KICAgICAgICAgICAgbmV3X25vdGlmeSgiU3VjY2Vzc2Z1bGx5ISBJbXBvcnRlZCBzZXR0aW5ncyBmcm9tIGRpc2NvcmQiLCAyNTUsIDExNSwgMTA1KQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBuZXdfbm90aWZ5KCJFcnJvciIsMjE0LCAwLCAzNiwyNTUpDQogICAgICAgIGVuZA0KICAgIGVuZCkNCiAgICAtLWRpc2NvcmRfbG9hZA0KZW5kDQoNCmZ1bmN0aW9uIGRlZmF1bHRfY2ZnKCkNCiAgICBodHRwLmdldCgiaHR0cHM6Ly93eXNjaWd1ZmE5LmN0OC5wbC9jZmdzL2RlZmF1bHQudHh0IiwgZnVuY3Rpb24ocixzKQ0KICAgICAgICBpZiByIHRoZW4NCiAgICAgICAgICAgIHBhY2thZ2U6bG9hZChqc29uLnBhcnNlKGJhc2U2NC5kZWNvZGUocy5ib2R5KSkpDQogICAgICAgICAgICBuZXdfbm90aWZ5KCJTdWNjZXNzZnVsbHkhIExvYWRlZCBkZWZhdWx0IGNvbmZpZyIsMjU1LCAxMTUsIDEwNSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbmV3X25vdGlmeSgiRXJyb3IiLDIxNCwgMCwgMzYsMjU1KQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gZG93bmxvYWRsb2dvKCkNCiAgICBodHRwLmdldCgiaHR0cHM6Ly9tZWRpYS5kaXNjb3JkYXBwLm5ldC9hdHRhY2htZW50cy84ODI1OTM2MzU2Mzg1OTk3NzMvMTE2MjA1NDgyNjI2NDM2NzMzNC9pbnRlci5wbmc/ZXg9NjYxODA2ZTQmaXM9NjYwNTkxZTQmaG09OWY2M2RjMjQ2MTc1NDIzOWFjODZhMDNkZGI3YjI0ZTQwZjYxM2IzOGVlY2QyNjliZWRiMjBlODNjZmI1ZGM0MSY9IiwgZnVuY3Rpb24oc3VjY2VzcywgcmVzcG9uc2UpDQogICAgICAgIGlmIG5vdCBzdWNjZXNzIG9yIHJlc3BvbnNlLnN0YXR1cyB+PSAyMDAgdGhlbg0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KDQogICAgd3JpdGVmaWxlKCJpbnRlci5wbmciLCByZXNwb25zZS5ib2R5KQ0KICAgIGVuZCkNCmVuZA0KZG93bmxvYWRsb2dvKCkNCg0KbG9jYWwgZnVuY3Rpb24gZG93bmxvYWRGaWxlKCkNCglodHRwLmdldChzdHJpbmcuZm9ybWF0KCJodHRwczovL2ZsYWdjZG4uY29tL3cxNjAvJXMucG5nIiwgcGFub3JhbWEub3BlbigpLk15UGVyc29uYUFQSS5HZXRNeUNvdW50cnlDb2RlKCk6bG93ZXIoKSksIGZ1bmN0aW9uKHN1Y2Nlc3MsIHJlc3BvbnNlKQ0KCQlpZiBub3Qgc3VjY2VzcyBvciByZXNwb25zZS5zdGF0dXMgfj0gMjAwIHRoZW4NCiAgICAgICAgICAgIHJldHVybg0KCQllbmQNCg0KICAgICAgICB3cml0ZWZpbGUoImZsYWdfIi4ucGFub3JhbWEub3BlbigpLk15UGVyc29uYUFQSS5HZXRNeUNvdW50cnlDb2RlKCk6bG93ZXIoKS4uIi5wbmciLCByZXNwb25zZS5ib2R5KQ0KCWVuZCkNCmVuZA0KZG93bmxvYWRGaWxlKCkNCg0KZnVuY3Rpb24gc2hhcmVfY2ZnKCkNCiAgICBkYXRhID0gcGFja2FnZTpzYXZlKCkNCiAgICBsb2NhbCBlbmNyeXB0ZWQgPSBiYXNlNjQuZW5jb2RlKGpzb24uc3RyaW5naWZ5KGRhdGEpKQ0KDQogICAgaHR0cC5nZXQoImh0dHBzOi8vd3lzY2lndWZhOS5jdDgucGwvcG9zdF9jZmcucGhwP2VuY3J5cHRlZF9kYXRhPSIuLmVuY3J5cHRlZC4uIiZ1bml4X3RpbWU9Ii4uY2xpZW50LnVuaXhfdGltZSgpLi4iJm5hbWVfY2Zncz0iLi5ldXBoZW1pYS51c2VybmFtZS4uIiIsIGZ1bmN0aW9uKHIsIHMpDQogICAgICAgIGlmIHIgdGhlbg0KDQogICAgICAgICAgICBsb2NhbCBXZWJob29rID0gZGlzY29yZC5uZXcoImNmZyB3ZWJob29rIikNCiAgICAgICAgICAgIGxvY2FsIFJpY2hFbWJlZCA9IGRpc2NvcmQubmV3RW1iZWQoKQ0KDQogICAgICAgICAgICBXZWJob29rOnNldFVzZXJuYW1lKCJJbnRlcml0dXMgY2ZnIikNCiAgICAgICAgICAgIFJpY2hFbWJlZDpzZXRUaXRsZShldXBoZW1pYS51c2VybmFtZSAuLiAiIH4gIiAuLiBldXBoZW1pYS5idWlsZCkNCiAgICAgICAgICAgIFJpY2hFbWJlZDpzZXREZXNjcmlwdGlvbigiQ2ZnIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVxueW91IGNhbiBkb3dubG9hZCBpdCBbaGVyZV0oIi4ucy5ib2R5Li4iKSIpDQogICAgICAgICAgICBSaWNoRW1iZWQ6c2V0Q29sb3IoMTY3NDEyMjUpDQogICAgICAgICAgICBXZWJob29rOnNlbmQoUmljaEVtYmVkKQ0KDQogICAgICAgICAgICBuZXdfbm90aWZ5KCJTdWNjZXNzZnVsbHkhIFNoYXJlZCBjZmciLDI1NSwgMTE1LCAxMDUpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIG5ld19ub3RpZnkoIkVycm9yIiwyMTQsIDAsIDM2LDI1NSkNCiAgICAgICAgZW5kDQoNCiAgICBlbmQpDQplbmQNCg0KbG9jYWwgcHJldl9zaW11bGF0aW9uX3RpbWUgPSAwDQoNCmxvY2FsIGZ1bmN0aW9uIHRpbWVfdG9fdGlja3ModCkNCiAgICByZXR1cm4gbWF0aC5mbG9vcigwLjUgKyAodCAvIGdsb2JhbHMudGlja2ludGVydmFsKCkpKQ0KZW5kDQoNCmxvY2FsIGRpZmZfc2ltID0gMA0KDQpmdW5jdGlvbiBzaW1fZGlmZigpIA0KICAgIGxvY2FsIGN1cnJlbnRfc2ltdWxhdGlvbl90aW1lID0gdGltZV90b190aWNrcyhlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxTaW11bGF0aW9uVGltZSIpKQ0KICAgIGxvY2FsIGRpZmYgPSBjdXJyZW50X3NpbXVsYXRpb25fdGltZSAtIHByZXZfc2ltdWxhdGlvbl90aW1lDQogICAgcHJldl9zaW11bGF0aW9uX3RpbWUgPSBjdXJyZW50X3NpbXVsYXRpb25fdGltZQ0KICAgIGRpZmZfc2ltID0gZGlmZg0KICAgIHJldHVybiBkaWZmX3NpbQ0KZW5kDQoNCmZ1bmN0aW9uIG5vcm1hbGl6ZV95YXcoeWF3KSB5YXcgPSAoeWF3ICUgMzYwICsgMzYwKSAlIDM2MCByZXR1cm4geWF3ID4gMTgwIGFuZCB5YXcgLSAzNjAgb3IgeWF3IGVuZA0KDQpsb2NhbCBncm91bmRfdGljayA9IDENCmxvY2FsIGVuZF90aW1lID0gMA0KbG9jYWwgZ3JvdW5kX3RpY2tzID0gMQ0KbG9jYWwgbGFzdF9zaW1fdGltZSA9IDANCmxvY2FsIGRlZmVuc2l2ZV91bnRpbCA9IDANCmN1cnJlbnRfdGlja2NvdW50ID0gMA0KaW5kX2FuaW1fc2NvcGUgPSAwDQppbmRfYW5pbV9zY29wZV9hbHBoYSA9IDENCndhdGVybWFya19hbHBoYSA9IDENCnRvX2ppdHRlciA9IGZhbHNlDQphbHBoYV9hbmltID0gMA0KbG9jYWwgbm90aWZ5X2hvdmVyID0gZmFsc2UNCmxvY2FsIGluZF9ob3ZlciA9IGZhbHNlDQpsb2NhbCBkZWJ1Z19ob3ZlciA9IGZhbHNlDQpsb2NhbCBmdF9wcmV2ID0gMA0KdG9fZHJhdyA9ICJubyINCnRvX3VwID0gIm5vIg0KbG9jYWwgY2hlY2tlciA9IDANCmxvY2FsIGFndXdubyA9IDANCnRvX2RyYXdfdGlja3MgPSAwDQpsb2NhbCBjbGFudGFncyA9IHsNCiAgICAnJywNCiAgICAnaScsDQogICAgJ2luJywNCiAgICAnaW50JywNCiAgICAnaW50ZScsDQogICAgJ2ludGVyJywNCiAgICAnaW50ZXJpJywNCiAgICAnaW50ZXJpdCcsDQogICAgJ2ludGVyaXR1JywNCiAgICAnaW50ZXJpdHVzLicsDQogICAgJ2ludGVyaXR1cy5yJywNCiAgICAnaW50ZXJpdHVzLnJlJywNCiAgICAnaW50ZXJpdHVzLnJlZCcsDQogICAgJ2ludGVyaXR1cy5yZWQnLA0KICAgICdpbnRlcml0dXMucmVkJywNCiAgICAnaW50ZXJpdHVzLnJlZCcsDQogICAgJ250ZXJpdHVzLnJlZCcsDQogICAgJ2VyaXR1cy5yZWQnLA0KICAgICdyaXR1cy5yZWQnLA0KICAgICdpdHVzLnJlZCcsDQogICAgJ3R1cy5yZWQnLA0KICAgICd1cy5yZWQnLA0KICAgICdzLnJlZCcsDQogICAgJ3JlZCcsDQogICAgJ2VkJywNCiAgICAnZCcsDQogICAgJycNCn0NCmxvY2FsIGNsYW50YWdfcHJldg0KDQpsb2NhbCBoaXRsb2dzX3BvcyA9IHsNCiAgICBwb3NfeCA9IFggLyAyIC0gMTgwLA0KICAgIHBvc195ID0gWSAtIDI4MCwNCiAgICBzaXplX3cgPSAzNzAsDQogICAgc2l6ZV9oID0gMjM1DQp9DQoNCmxvY2FsIGluZGljYXRvcl9wb3MgPSB7DQogICAgcG9zX3ggPSBYIC8gMiAtIDMwLA0KICAgIHBvc195ID0gWSAvMiArIDI1LA0KICAgIHNpemVfdyA9IDYwLA0KICAgIHNpemVfaCA9IDcwDQp9DQoNCmxvY2FsIGRlYnVnX3BvcyA9IHsNCiAgICBwb3NfeCA9IDQwLA0KICAgIHBvc195ID0gWSAvMiArIDI1LA0KICAgIHNpemVfdyA9IDE0MCwNCiAgICBzaXplX2ggPSA5MA0KfQ0KDQpsb2NhbCBjdHggPSAoZnVuY3Rpb24oKQ0KICAgIGxvY2FsIGN0eCA9IHt9DQoNCiAgICBjdHguY2ZncyA9IHsNCiAgICAgICAgZGVsZXRlX2NvbmZpZyA9IGZ1bmN0aW9uKG5hbWUpDQogICAgICAgICAgICBsb2NhbCBkYiA9IGRhdGFiYXNlLnJlYWQoY2ZnX2RhdGEuZGF0YWJhc2UuY29uZmlncykgb3Ige30NCiAgICAgICAgDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkYikgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lm5hbWUgPT0gbmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShkYiwgaSkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICANCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGNmZ19kYXRhLnByZXNldHMpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5uYW1lID09IG5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICANCiAgICAgICAgICAgIGRhdGFiYXNlLndyaXRlKGNmZ19kYXRhLmRhdGFiYXNlLmNvbmZpZ3MsIGRiKQ0KICAgICAgICBlbmQsDQogICAgICAgIGlmX3ByZXNldCA9IGZ1bmN0aW9uKG5hbWUpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhjZmdfZGF0YS5wcmVzZXRzKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYubmFtZSA9PSBuYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIGVuZCwNCiAgICAgICAgZ2V0X2NvbmZpZyA9IGZ1bmN0aW9uKG5hbWUpDQogICAgICAgICAgICBsb2NhbCBkYXRhYmFzZSA9IGRhdGFiYXNlLnJlYWQoY2ZnX2RhdGEuZGF0YWJhc2UuY29uZmlncykNCg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZGF0YWJhc2UpIGRvDQogICAgICAgICAgICAgICAgaWYgdi5uYW1lID09IG5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gdi5jb25maWcsDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoY2ZnX2RhdGEucHJlc2V0cykgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lm5hbWUgPT0gbmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25maWcgPSB2LmNvbmZpZywNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgZW5kLA0KICAgICAgICBzYXZlX2NvbmZpZyA9IGZ1bmN0aW9uKG5hbWUpDQogICAgICAgICAgICBsb2NhbCBkYiA9IGRhdGFiYXNlLnJlYWQoY2ZnX2RhdGEuZGF0YWJhc2UuY29uZmlncykgb3Ige30NCiAgICAgICAgICAgIGxvY2FsIGNvbmZpZyA9IHt9DQoNCiAgICAgICAgICAgIGlmIG5hbWU6bWF0Y2goIlteJXddIikgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBkYXRhID0gcGFja2FnZTpzYXZlKCkNCiAgICAgICAgICAgIGxvY2FsIGVuY3J5cHRlZCA9IGJhc2U2NC5lbmNvZGUoanNvbi5zdHJpbmdpZnkoZGF0YSkpDQogICAgICAgICAgICB0YWJsZS5pbnNlcnQoY29uZmlnLCBlbmNyeXB0ZWQpDQoNCiAgICAgICAgICAgIGxvY2FsIGNmZyA9IGN0eC5jZmdzLmdldF9jb25maWcobmFtZSkNCg0KICAgICAgICAgICAgaWYgbm90IGNmZyB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGRiLCB7bmFtZSA9IG5hbWUsIGNvbmZpZyA9IGNvbmZpZ30pDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZGJbY2ZnLmluZGV4XS5jb25maWcgPSBjb25maWcNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBkYXRhYmFzZS53cml0ZShjZmdfZGF0YS5kYXRhYmFzZS5jb25maWdzLCBkYikNCiAgICAgICAgZW5kLA0KICAgICAgICBsb2FkX2NvbmZpZyA9IGZ1bmN0aW9uKG5hbWUpDQogICAgICAgICAgICBsb2NhbCBjZmcgPSBjdHguY2Zncy5nZXRfY29uZmlnKG5hbWUpDQoNCiAgICAgICAgICAgIGxvY2FsIGxvYWRfY2ZnDQogICAgICAgICAgICBpZiBjdHguY2Zncy5pZl9wcmVzZXQobmFtZSkgdGhlbg0KICAgICAgICAgICAgICAgIGxvYWRfY2ZnID0ganNvbi5wYXJzZShiYXNlNjQuZGVjb2RlKGNmZy5jb25maWcpKQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGxvYWRfY2ZnID0ganNvbi5wYXJzZShiYXNlNjQuZGVjb2RlKHVucGFjayhjZmcuY29uZmlnKSkpDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgcGFja2FnZTpsb2FkKGxvYWRfY2ZnKQ0KICAgICAgICBlbmQsDQogICAgICAgIGdldGNvbmZpZ19saXN0ID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgZGF0YWJhc2UgPSBkYXRhYmFzZS5yZWFkKGNmZ19kYXRhLmRhdGFiYXNlLmNvbmZpZ3MpIG9yIHt9DQogICAgICAgICAgICBsb2NhbCBjb25maWcgPSB7fQ0KICAgICAgICAgICAgbG9jYWwgcHJlc2V0cyA9IGNmZ19kYXRhLnByZXNldHMNCiAgICAgICAgDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwcmVzZXRzKSBkbw0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjb25maWcsIHYubmFtZSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICANCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGRhdGFiYXNlKSBkbw0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjb25maWcsIHYubmFtZSkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICByZXR1cm4gY29uZmlnDQogICAgICAgIGVuZCwNCiAgICAgICAgZXhwb3J0X2NvbmZpZyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGRhdGEgPSBwYWNrYWdlOnNhdmUoKQ0KICAgICAgICAgICAgZW5jcnlwdGVkID0gYmFzZTY0LmVuY29kZShqc29uLnN0cmluZ2lmeShkYXRhKSkNCiAgICAgICAgICAgIGNsaXBib2FyZC5zZXQoZW5jcnlwdGVkKQ0KICAgICAgICBlbmQsDQogICAgICAgIGltcG9ydF9jb25maWcgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBkZWNyeXB0ZWQgPSBqc29uLnBhcnNlKGJhc2U2NC5kZWNvZGUoY2xpcGJvYXJkLmdldCgpKSkNCiAgICAgICAgICAgIHBhY2thZ2U6bG9hZChkZWNyeXB0ZWQpDQogICAgICAgIGVuZCwNCiAgICB9DQoNCiAgICBjdHgubV9yZW5kZXIgPSB7DQogICAgICAgIHJlYyA9IGZ1bmN0aW9uKHNlbGYsIHgsIHksIHcsIGgsIHJhZGl1cywgY29sb3IpDQogICAgICAgICAgICByYWRpdXMgPSBtYXRoLm1pbih4LzIsIHkvMiwgcmFkaXVzKQ0KICAgICAgICAgICAgbG9jYWwgciwgZywgYiwgYSA9IHVucGFjayhjb2xvcikNCiAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4LCB5ICsgcmFkaXVzLCB3LCBoIC0gcmFkaXVzKjIsIHIsIGcsIGIsIGEpDQogICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoeCArIHJhZGl1cywgeSwgdyAtIHJhZGl1cyoyLCByYWRpdXMsIHIsIGcsIGIsIGEpDQogICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoeCArIHJhZGl1cywgeSArIGggLSByYWRpdXMsIHcgLSByYWRpdXMqMiwgcmFkaXVzLCByLCBnLCBiLCBhKQ0KICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlKHggKyByYWRpdXMsIHkgKyByYWRpdXMsIHIsIGcsIGIsIGEsIHJhZGl1cywgMTgwLCAwLjI1KQ0KICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlKHggLSByYWRpdXMgKyB3LCB5ICsgcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIDkwLCAwLjI1KQ0KICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlKHggLSByYWRpdXMgKyB3LCB5IC0gcmFkaXVzICsgaCwgciwgZywgYiwgYSwgcmFkaXVzLCAwLCAwLjI1KQ0KICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlKHggKyByYWRpdXMsIHkgLSByYWRpdXMgKyBoLCByLCBnLCBiLCBhLCByYWRpdXMsIC05MCwgMC4yNSkNCiAgICAgICAgZW5kLA0KDQogICAgICAgIHJlY19vdXRsaW5lID0gZnVuY3Rpb24oc2VsZiwgeCwgeSwgdywgaCwgcmFkaXVzLCB0aGlja25lc3MsIGNvbG9yKQ0KICAgICAgICAgICAgcmFkaXVzID0gbWF0aC5taW4ody8yLCBoLzIsIHJhZGl1cykNCiAgICAgICAgICAgIGxvY2FsIHIsIGcsIGIsIGEgPSB1bnBhY2soY29sb3IpDQogICAgICAgICAgICBpZiByYWRpdXMgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHgsIHksIHcsIHRoaWNrbmVzcywgciwgZywgYiwgYSkNCiAgICAgICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoeCwgeSArIGggLSB0aGlja25lc3MsIHcgLCB0aGlja25lc3MsIHIsIGcsIGIsIGEpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHggKyByYWRpdXMsIHksIHcgLSByYWRpdXMqMiwgdGhpY2tuZXNzLCByLCBnLCBiLCBhKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4ICsgcmFkaXVzLCB5ICsgaCAtIHRoaWNrbmVzcywgdyAtIHJhZGl1cyoyLCB0aGlja25lc3MsIHIsIGcsIGIsIGEpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKHgsIHkgKyByYWRpdXMsIHRoaWNrbmVzcywgaCAtIHJhZGl1cyoyLCByLCBnLCBiLCBhKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4ICsgdyAtIHRoaWNrbmVzcywgeSArIHJhZGl1cywgdGhpY2tuZXNzLCBoIC0gcmFkaXVzKjIsIHIsIGcsIGIsIGEpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIuY2lyY2xlX291dGxpbmUoeCArIHJhZGl1cywgeSArIHJhZGl1cywgciwgZywgYiwgYSwgcmFkaXVzLCAxODAsIDAuMjUsIHRoaWNrbmVzcykNCiAgICAgICAgICAgICAgICByZW5kZXJlci5jaXJjbGVfb3V0bGluZSh4ICsgcmFkaXVzLCB5ICsgaCAtIHJhZGl1cywgciwgZywgYiwgYSwgcmFkaXVzLCA5MCwgMC4yNSwgdGhpY2tuZXNzKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLmNpcmNsZV9vdXRsaW5lKHggKyB3IC0gcmFkaXVzLCB5ICsgcmFkaXVzLCByLCBnLCBiLCBhLCByYWRpdXMsIC05MCwgMC4yNSwgdGhpY2tuZXNzKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLmNpcmNsZV9vdXRsaW5lKHggKyB3IC0gcmFkaXVzLCB5ICsgaCAtIHJhZGl1cywgciwgZywgYiwgYSwgcmFkaXVzLCAwLCAwLjI1LCB0aGlja25lc3MpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KDQogICAgICAgIGdsb3dfbW9kdWxlID0gZnVuY3Rpb24oc2VsZiwgeCwgeSwgdywgaCwgd2lkdGgsIHJvdW5kaW5nLCBhY2NlbnQsIGFjY2VudF9pbm5lcikNCiAgICAgICAgICAgIGxvY2FsIHRoaWNrbmVzcyA9IDENCiAgICAgICAgICAgIGxvY2FsIG9mZnNldCA9IDENCiAgICAgICAgICAgIGxvY2FsIHIsIGcsIGIsIGEgPSB1bnBhY2soYWNjZW50KQ0KICAgICAgICAgICAgaWYgYWNjZW50X2lubmVyIHRoZW4NCiAgICAgICAgICAgICAgICBzZWxmOnJlYyh4ICwgeSwgdywgaCArIDEsIHJvdW5kaW5nLCBhY2NlbnRfaW5uZXIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBrID0gMCwgd2lkdGggZG8NCiAgICAgICAgICAgICAgICBpZiBhICogKGsvd2lkdGgpXigxKSA+IDUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBhY2NlbnQgPSB7ciwgZywgYiwgYSAqIChrL3dpZHRoKV4oMil9DQogICAgICAgICAgICAgICAgICAgIHNlbGY6cmVjX291dGxpbmUoeCArIChrIC0gd2lkdGggLSBvZmZzZXQpKnRoaWNrbmVzcywgeSArIChrIC0gd2lkdGggLSBvZmZzZXQpICogdGhpY2tuZXNzLCB3IC0gKGsgLSB3aWR0aCAtIG9mZnNldCkqdGhpY2tuZXNzKjIsIGggKyAxIC0gKGsgLSB3aWR0aCAtIG9mZnNldCkqdGhpY2tuZXNzKjIsIHJvdW5kaW5nICsgdGhpY2tuZXNzICogKHdpZHRoIC0gayArIG9mZnNldCksIHRoaWNrbmVzcywgYWNjZW50KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCwNCg0KICAgICAgICBwYW5kb3JhX29nID0gZnVuY3Rpb24oc2VsZiwgeCx5LHcsaCxyLGcsYixhLCB0ZXh0KQ0KICAgICAgICAgICAgc2VsZjpyZWMoeCx5LHcsaCwzLCB7MCwwLDAsYX0pDQogICAgICAgICAgICBzZWxmOnJlY19vdXRsaW5lKHggKyAxLCB5ICsgMSwgdyAtIDIsIGggLSAyLCAzLCAxLCB7NDUsNDUsNDUsYX0pDQogICAgICAgICAgICBzZWxmOnJlYyh4ICsgMywgeSArIDMsIHcgLSA2LCBoIC0gNiwgMiwgezE1LDE1LDE1LGF9KQ0KICAgICAgICAgICAgcmVuZGVyZXIudGV4dCh4ICsgNSwgeSArIDYsIHIsZyxiLGEsICcnLCBuaWwsIHRleHQpDQogICAgICAgIGVuZA0KICAgIH0NCg0KICAgIGN0eC5oZWxwcyA9IHsNCiAgICAgICAgc3BlZWQgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBub3QgZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgIGxvY2FsIGZpcnN0X3ZlbG9jaXR5LCBzZWNvbmRfdmVsb2NpdHkgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fdmVjVmVsb2NpdHkiKQ0KICAgICAgICAgICAgbG9jYWwgc3BlZWQgPSBtYXRoLmZsb29yKG1hdGguc3FydChmaXJzdF92ZWxvY2l0eSpmaXJzdF92ZWxvY2l0eStzZWNvbmRfdmVsb2NpdHkqc2Vjb25kX3ZlbG9jaXR5KSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHNwZWVkDQogICAgICAgIGVuZCwNCiAgICAgICAgZ2V0X3N0YXRlID0gZnVuY3Rpb24oc3BlZWQsIGNtZCkNCiAgICAgICAgICAgIGlmIG5vdCBlbnRpdHkuaXNfYWxpdmUoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSkgdGhlbiByZXR1cm4gZW5kDQogICAgICAgICAgICBsb2NhbCBmbGFncyA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mRmxhZ3MiKQ0KICAgICAgICAgICAgbG9jYWwgbGFuZCA9IGJpdC5iYW5kKGZsYWdzLCBiaXQubHNoaWZ0KDEsIDApKSB+PSAwDQogICAgICAgICAgICBpZiBsYW5kID09IHRydWUgdGhlbiBncm91bmRfdGljayA9IGdyb3VuZF90aWNrICsgMSBlbHNlIGdyb3VuZF90aWNrID0gMCBlbmQNCiAgICAgICAgDQogICAgICAgICAgICBpZiBiaXQuYmFuZChmbGFncywgMSkgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgaWYgY21kLmFsbG93X3NlbmRfcGFja2V0ID09IGZhbHNlIG9yIGNtZC5jaG9rZWRjb21tYW5kcyA+IDEgdGhlbiByZXR1cm4gIkZha2VsYWciIGVuZA0KICAgICAgICAgICAgICAgIGlmIGdyb3VuZF90aWNrIDwgMTAgdGhlbiBpZiBiaXQuYmFuZChmbGFncywgNCkgPT0gNCB0aGVuIHJldHVybiAiRHVjay1qdW1wIiBlbHNlIHJldHVybiAiSnVtcCIgZW5kIGVuZA0KICAgICAgICAgICAgICAgIGlmIGJpdC5iYW5kKGZsYWdzLCA0KSA9PSA0IGFuZCBzcGVlZCA+IDkgdGhlbiANCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJEdWNrLW1vdmUiDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgYml0LmJhbmQoZmxhZ3MsIDQpID09IDQgb3IgdWkuZ2V0KHJlZnMucmVmLmZha2VkdWNrKSB0aGVuIA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkR1Y2siIC0tIGNyb3VjaGluZw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgaWYgc3BlZWQgPD0gMyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIlN0YW5kIiAtLSBzdGFuZGluZw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB1aS5nZXQocmVmcy5yZWYuc2xpZGVbMl0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIlNsb3d3YWxrIiAtLSBzbG93d2Fsaw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiUnVuIiAtLSBtb3ZpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBiaXQuYmFuZChmbGFncywgMSkgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgaWYgYml0LmJhbmQoZmxhZ3MsIDQpID09IDQgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkR1Y2stanVtcCIgLS0gYWlyLWMNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiSnVtcCIgLS0gYWlyDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBnZXRfc3RhdGVfZGVmZW5zaXZlID0gZnVuY3Rpb24oc3BlZWQpDQogICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2FsaXZlKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgbG9jYWwgZmxhZ3MgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZkZsYWdzIikNCiAgICAgICAgICAgIGxvY2FsIGxhbmQgPSBiaXQuYmFuZChmbGFncywgYml0LmxzaGlmdCgxLCAwKSkgfj0gMA0KICAgICAgICAgICAgaWYgbGFuZCA9PSB0cnVlIHRoZW4gZ3JvdW5kX3RpY2sgPSBncm91bmRfdGljayArIDEgZWxzZSBncm91bmRfdGljayA9IDAgZW5kDQogICAgICAgICAgICBsb2NhbCBuZXh0X2F0dGFjayA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAnbV9mbE5leHRBdHRhY2snKSAtIGdsb2JhbHMuY3VydGltZSgpDQoNCiAgICAgICAgICAgIGlmIGJpdC5iYW5kKGZsYWdzLCAxKSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBncm91bmRfdGljayA8IDEwIHRoZW4gaWYgYml0LmJhbmQoZmxhZ3MsIDQpID09IDQgdGhlbiByZXR1cm4gIkR1Y2stanVtcCIgZWxzZSByZXR1cm4gIkp1bXAiIGVuZCBlbmQNCiAgICAgICAgICAgICAgICBpZiBiaXQuYmFuZChmbGFncywgNCkgPT0gNCBhbmQgc3BlZWQgPiA5IHRoZW4gDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiRHVjay1tb3ZlIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGJpdC5iYW5kKGZsYWdzLCA0KSA9PSA0IG9yIHVpLmdldChyZWZzLnJlZi5mYWtlZHVjaykgdGhlbiANCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJEdWNrIiAtLSBjcm91Y2hpbmcNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIHNwZWVkIDw9IDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJTdGFuZCIgLS0gc3RhbmRpbmcNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdWkuZ2V0KHJlZnMucmVmLnNsaWRlWzJdKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJTbG93d2FsayIgLS0gc2xvd3dhbGsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIlJ1biIgLS0gbW92aW5nDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgYml0LmJhbmQoZmxhZ3MsIDEpID09IDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGJpdC5iYW5kKGZsYWdzLCA0KSA9PSA0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJEdWNrLWp1bXAiIC0tIGFpci1jDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkp1bXAiIC0tIGFpcg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCwNCiAgICAgICAgZ2VuX3RhYmxlX2Zyb21fbnVtYmVyID0gZnVuY3Rpb24obnVtKQ0KICAgICAgICAgICAgbG9jYWwgc2VxdWVuY2UgPSB7fQ0KICAgICAgICAgICAgZm9yIGkgPSAxLCBudW0gZG8NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2VxdWVuY2UsIHRvc3RyaW5nKGkpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICByZXR1cm4gdGFibGUuY29uY2F0KHNlcXVlbmNlLCAnLCAnKQ0KICAgICAgICBlbmQNCiAgICAgICAgDQogICAgfQ0KDQogICAgY3R4LmRlZmVuc2l2ZV9jaGVja3MgPSB7DQogICAgICAgIGlzX2RlZmVuc2l2ZV9hY3RpdmUgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCB0aWNrY291bnQgPSBnbG9iYWxzLnRpY2tjb3VudCgpDQogICAgICAgICAgICBsb2NhbCBzaW1fdGltZSA9IHRvdGlja3MoZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsU2ltdWxhdGlvblRpbWUiKSkNCiAgICAgICAgICAgIGxvY2FsIHNpbV9kaWZmID0gc2ltX3RpbWUgLSBsYXN0X3NpbV90aW1lDQoNCiAgICAgICAgICAgIGlmIHNpbV9kaWZmIDwgMCB0aGVuDQogICAgICAgICAgICAgICAgZGVmZW5zaXZlX3VudGlsID0gdGlja2NvdW50ICsgbWF0aC5hYnMoc2ltX2RpZmYpIC0gdG90aWNrcyhjbGllbnQubGF0ZW5jeSgpKQ0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGxhc3Rfc2ltX3RpbWUgPSBzaW1fdGltZQ0KDQogICAgICAgICAgICByZXR1cm4gZGVmZW5zaXZlX3VudGlsID4gdGlja2NvdW50DQogICAgICAgIGVuZCwNCiAgICAgICAgY2hva2luZyA9IGZ1bmN0aW9uKGNtZCkNCiAgICAgICAgICAgIGxvY2FsIGNob2tlID0gZmFsc2UNCiAgICAgICAgDQogICAgICAgICAgICBpZiBjbWQuYWxsb3dfc2VuZF9wYWNrZXQgPT0gZmFsc2Ugb3IgY21kLmNob2tlZGNvbW1hbmRzID4gMSB0aGVuDQogICAgICAgICAgICAgICAgY2hva2UgPSB0cnVlDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY2hva2UgPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIGNob2tlDQogICAgICAgIGVuZA0KICAgIH0NCg0KICAgIGN0eC5hbnRpYWltID0gew0KICAgICAgICBydW4gPSBmdW5jdGlvbihjbWQpDQogICAgICAgICAgICBsb2NhbCBtZSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICAgICAgICAgIGlmIG5vdCBlbnRpdHkuaXNfYWxpdmUobWUpIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgZGVzeW5jX3R5cGUgPSBlbnRpdHkuZ2V0X3Byb3AobWUsICJtX2ZsUG9zZVBhcmFtZXRlciIsIDExKSAqIDEyMCAtIDYwDQogICAgICAgICAgICBkZXN5bmNfc2lkZSA9IGRlc3luY190eXBlID4gMCBhbmQgMSBvciAtMQ0KDQogICAgICAgICAgICBsb2NhbCBzdGF0ZSA9IGN0eC5oZWxwcy5nZXRfc3RhdGUoY3R4LmhlbHBzLnNwZWVkKCksIGNtZCkNCiAgICAgICAgICAgIGlmIGFhX2J1aWxkZXJbY3R4LmhlbHBzLmdldF9zdGF0ZShjdHguaGVscHMuc3BlZWQoKSwgY21kKV0uZW5hYmxlLnZhbHVlID09IGZhbHNlIHRoZW4gc3RhdGUgPSAiR2xvYmFsIiBlbmQgDQogICAgICAgICAgICBsb2NhbCBhYV92YWx1ZXMgPSBhYV9idWlsZGVyW3N0YXRlXQ0KICAgICAgICAgICAgbG9jYWwgYWFfZGVmZW5zaXZlID0gZGVmZW5zaXZlX2J1aWxkZXJbY3R4LmhlbHBzLmdldF9zdGF0ZV9kZWZlbnNpdmUoY3R4LmhlbHBzLnNwZWVkKCkpXQ0KDQogICAgICAgICAgICBsb2NhbCBwaXRjaF90YmwgPSB7DQogICAgICAgICAgICAgICAgWydEaXNhYmxlZCddID0gODksDQogICAgICAgICAgICAgICAgWydVcCddID0gLTg5LA0KICAgICAgICAgICAgICAgIFsnWmVybyddID0gMCwNCiAgICAgICAgICAgICAgICBbJ1JhbmRvbSddID0gbWF0aC5yYW5kb20oLTg5LCA4OSksDQogICAgICAgICAgICAgICAgWydJbnRlcml0dXMnXSA9IGFndXdubyA+IDIgYW5kIGFndXdubyA8IDE0IGFuZCAtODkgb3IgODksDQogICAgICAgICAgICAgICAgWydDdXN0b20nXSA9IGFhX2RlZmVuc2l2ZS5jdXN0b21fcGl0Y2gudmFsdWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbG9jYWwgeWF3X3RibCA9IHsNCiAgICAgICAgICAgICAgICBbJ0Rpc2FibGVkJ10gPSAwLA0KICAgICAgICAgICAgICAgIFsnU2lkZXdheXMnXSA9IGdsb2JhbHMudGlja2NvdW50KCkgJSAzID09IDAgYW5kIGNsaWVudC5yYW5kb21faW50KC0xMDAsIC05MCkgb3IgZ2xvYmFscy50aWNrY291bnQoKSAlIDMgPT0gMSBhbmQgMTgwIG9yIGdsb2JhbHMudGlja2NvdW50KCkgJSAzID09IDIgYW5kIGNsaWVudC5yYW5kb21faW50KDkwLCAxMDApIG9yIDAsDQogICAgICAgICAgICAgICAgWydSYW5kb20nXSA9IG1hdGgucmFuZG9tKC0xODAsIDE4MCksDQogICAgICAgICAgICAgICAgWydTcGluJ10gPSBub3JtYWxpemVfeWF3KGdsb2JhbHMuY3VydGltZSgpICogMTAwMCAqIChhYV9kZWZlbnNpdmUueWF3X3NsaWRlci52YWx1ZSAvIDEwMCkpLA0KICAgICAgICAgICAgICAgIFsnMy1XYXknXSA9IGdsb2JhbHMudGlja2NvdW50KCkgJSAzID09IDAgYW5kIGNsaWVudC5yYW5kb21faW50KC0xMTAsIC05MCkgb3IgZ2xvYmFscy50aWNrY291bnQoKSAlIDMgPT0gMSBhbmQgY2xpZW50LnJhbmRvbV9pbnQoOTAsIDEyMCkgb3IgZ2xvYmFscy50aWNrY291bnQoKSAlIDMgPT0gMiBhbmQgY2xpZW50LnJhbmRvbV9pbnQoLTE4MCwgLTE1MCkgb3IgMCwNCiAgICAgICAgICAgICAgICBbJzUtV2F5J10gPSBnbG9iYWxzLnRpY2tjb3VudCgpICUgNSA9PSAwIGFuZCBjbGllbnQucmFuZG9tX2ludCgtOTAsIC03NSkgb3IgZ2xvYmFscy50aWNrY291bnQoKSAlIDUgPT0gMSBhbmQgY2xpZW50LnJhbmRvbV9pbnQoLTQ1LCAtMzApIG9yIGdsb2JhbHMudGlja2NvdW50KCkgJSA1ID09IDIgYW5kIGNsaWVudC5yYW5kb21faW50KC0xODAsIC0xNjApIG9yIGdsb2JhbHMudGlja2NvdW50KCkgJSA1ID09IDMgYW5kIGNsaWVudC5yYW5kb21faW50KDQ1LCA2MCkgb3IgZ2xvYmFscy50aWNrY291bnQoKSAlIDUgPT0gMyBhbmQgY2xpZW50LnJhbmRvbV9pbnQoOTAsIDExMCkgb3IgMCwNCiAgICAgICAgICAgICAgICBbJ0wgJiBSJ10gPSBkZXN5bmNfc2lkZSA9PSAxIGFuZCBhYV9kZWZlbnNpdmUueWF3X2xlZnQudmFsdWUgb3IgYWFfZGVmZW5zaXZlLnlhd19yaWdodC52YWx1ZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiBhYV9kZWZlbnNpdmUuZm9yY2UudmFsdWUgYW5kIG5vdCBhYV9kZWZlbnNpdmUuZW5hYmxlLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICBjbWQuZm9yY2VfZGVmZW5zaXZlID0gdHJ1ZQ0KICAgICAgICAgICAgZWxzZWlmIGFhX2RlZmVuc2l2ZS5lbmFibGUudmFsdWUgYW5kIG5vdCBhYV9kZWZlbnNpdmUuZm9yY2UudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGFhX2RlZmVuc2l2ZS5tb2RlLnZhbHVlID09ICJBbHdheXMgb24iIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY21kLmZvcmNlX2RlZmVuc2l2ZSA9IHRydWUNCiAgICAgICAgICAgICAgICBlbHNlaWYgYWFfZGVmZW5zaXZlLm1vZGUudmFsdWUgPT0gIlN3aXRjaCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBjbWQuZm9yY2VfZGVmZW5zaXZlID0gY21kLmNvbW1hbmRfbnVtYmVyICUgY2xpZW50LnJhbmRvbV9pbnQoMyw2KSA9PSAxDQogICAgICAgICAgICAgICAgZWxzZWlmIGFhX2RlZmVuc2l2ZS5tb2RlLnZhbHVlID09ICJJbnZhbGlkIHRpY2tzIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNtZC5mb3JjZV9kZWZlbnNpdmUgPSBjbWQuY2hva2VkY29tbWFuZHMgJSAyID09IDEgYW5kIG5vdCBjbWQubm9fY2hva2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBmdW5jcy5jb250YWlucyhfdWkua2V5YmluZHMuZnJlZXN0YW5kaW5nX2Rpc2FibGVycy52YWx1ZSwgc3RhdGUpIHRoZW4NCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuZnJlZXN0YW5kWzFdLCBmYWxzZSkNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpZiBfdWkua2V5YmluZHMuZnJlZXN0YW5kaW5nOmdldCgpID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuZnJlZXN0YW5kWzFdLCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuZnJlZXN0YW5kWzJdLCAiQWx3YXlzIG9uIikNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5mcmVlc3RhbmRbMV0sIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuZnJlZXN0YW5kWzJdLCAiT24gaG90a2V5IikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBhYV9kZWZlbnNpdmUuZW5hYmxlLnZhbHVlIGFuZCBjdHguZGVmZW5zaXZlX2NoZWNrcy5pc19kZWZlbnNpdmVfYWN0aXZlKCkgYW5kIG5vdCBjdHguZGVmZW5zaXZlX2NoZWNrcy5jaG9raW5nKGNtZCkgYW5kIG5vdCBhYV9kZWZlbnNpdmUuZm9yY2UudmFsdWUgYW5kIF91aS5kZWZlbnNpdmUuZW5hYmxlLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3LCAiMTgwIikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X3ZhbHVlLCB5YXdfdGJsW2FhX2RlZmVuc2l2ZS55YXcudmFsdWVdKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5waXRjaCwgIkN1c3RvbSIpIA0KICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5waXRjaF92YWx1ZSwgcGl0Y2hfdGJsW2FhX2RlZmVuc2l2ZS5waXRjaC52YWx1ZV0pDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd19qaXR0ZXIsIGFhX2RlZmVuc2l2ZS55YXdfaml0dGVyLnZhbHVlKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfaml0dGVyX3ZhbHVlLCBhYV9kZWZlbnNpdmUueWF3X2ppdHRlcl9zbGlkZXIudmFsdWUpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmFhX2VuYWJsZSwgX3VpLmFudGlhaW0uZW5hYmxlLnZhbHVlKQ0KICAgICAgICAgICAgICAgIGlmIGFhX3ZhbHVlcy5lbmFibGUudmFsdWUgYW5kIF91aS5hbnRpYWltLmVuYWJsZS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGdsb2JhbHMudGlja2NvdW50KCkgPiBjdXJyZW50X3RpY2tjb3VudCArIGFhX3ZhbHVlcy55YXdfc2xpZGVyX2RlbGF5LnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNtZC5jaG9rZWRjb21tYW5kcyA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvX2ppdHRlciA9IG5vdCB0b19qaXR0ZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfdGlja2NvdW50ID0gZ2xvYmFscy50aWNrY291bnQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnbG9iYWxzLnRpY2tjb3VudCgpIDwgIGN1cnJlbnRfdGlja2NvdW50IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfdGlja2NvdW50ID0gZ2xvYmFscy50aWNrY291bnQoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYucGl0Y2gsYWFfdmFsdWVzLnBpdGNoLnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYucGl0Y2hfdmFsdWUsIGFhX3ZhbHVlcy5jdXN0b21fcGl0Y2gudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfYmFzZSwgX3VpLmFudGlhaW0ueWF3X2Jhc2UudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXcsIGFhX3ZhbHVlcy55YXcudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhdywgYWFfdmFsdWVzLmJvZHlfeWF3LnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X2ppdHRlciwgYWFfdmFsdWVzLnlhd19qaXR0ZXIudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhd192YWx1ZSwgYWFfdmFsdWVzLmJvZHlfeWF3X3NsaWRlci52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgaWYgYWFfdmFsdWVzLnlhd19qaXR0ZXJfbW9kZS52YWx1ZSA9PSAiU3RhdGljIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X2ppdHRlcl92YWx1ZSwgYWFfdmFsdWVzLnlhd19qaXR0ZXJfc2xpZGVyX3N0YXRpYy52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGFhX3ZhbHVlcy55YXdfaml0dGVyX21vZGUudmFsdWUgPT0gIkwgJiBSIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X2ppdHRlcl92YWx1ZSwgZGVzeW5jX3NpZGUgPT0gMSBhbmQgYWFfdmFsdWVzLnlhd19qaXR0ZXJfc2xpZGVyX2wudmFsdWUgb3IgYWFfdmFsdWVzLnlhd19qaXR0ZXJfc2xpZGVyX3IudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBhYV92YWx1ZXMueWF3X3R5cGUudmFsdWUgPT0gIlN0YXRpYyIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd192YWx1ZSwgYWFfdmFsdWVzLnlhd19zbGlkZXJfc3RhdGljLnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgYWFfdmFsdWVzLnlhd190eXBlLnZhbHVlID09ICJMICYgUiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd192YWx1ZSwgZGVzeW5jX3NpZGUgPT0gMSBhbmQgYWFfdmFsdWVzLnlhd19zbGlkZXJfbC52YWx1ZSBvciBhYV92YWx1ZXMueWF3X3NsaWRlcl9yLnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmJvZHlfeWF3LCAiSml0dGVyIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhd192YWx1ZSwgLTEpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBhYV92YWx1ZXMueWF3X3R5cGUudmFsdWUgPT0gIkRlbGF5IiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X3ZhbHVlLCB0b19qaXR0ZXIgYW5kIGFhX3ZhbHVlcy55YXdfc2xpZGVyX2wudmFsdWUgb3IgYWFfdmFsdWVzLnlhd19zbGlkZXJfci52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhdywgIlN0YXRpYyIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgICAgIGlmIGFudGlfYmZfdGFibGUubWlzc19jb3VudGVyID09IDEgYW5kIGFudGlfYmZfYnVpbGRlclthbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlcl0uZW5hYmxlZC52YWx1ZSBhbmQgZnVuY3MuY29udGFpbnMoX3VpLmFudGlfYmYuc3RhdGUudmFsdWUsIGN0eC5oZWxwcy5nZXRfc3RhdGVfZGVmZW5zaXZlKGN0eC5oZWxwcy5zcGVlZCgpKSkgYW5kIF91aS5hbnRpX2JmLmVuYWJsZS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X2ppdHRlcl92YWx1ZSwgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXS5qaXR0ZXIudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9PSAyIGFuZCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmVuYWJsZWQudmFsdWUgYW5kIGZ1bmNzLmNvbnRhaW5zKF91aS5hbnRpX2JmLnN0YXRlLnZhbHVlLCBjdHguaGVscHMuZ2V0X3N0YXRlX2RlZmVuc2l2ZShjdHguaGVscHMuc3BlZWQoKSkpIGFuZCBfdWkuYW50aV9iZi5lbmFibGUudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd19qaXR0ZXJfdmFsdWUsIGFudGlfYmZfYnVpbGRlclthbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlcl0uaml0dGVyLnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXIgPT0gMyBhbmQgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXS5lbmFibGVkLnZhbHVlIGFuZCBmdW5jcy5jb250YWlucyhfdWkuYW50aV9iZi5zdGF0ZS52YWx1ZSwgY3R4LmhlbHBzLmdldF9zdGF0ZV9kZWZlbnNpdmUoY3R4LmhlbHBzLnNwZWVkKCkpKSBhbmQgX3VpLmFudGlfYmYuZW5hYmxlLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfaml0dGVyX3ZhbHVlLCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmppdHRlci52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGFudGlfYmZfdGFibGUubWlzc19jb3VudGVyID09IDQgYW5kIGFudGlfYmZfYnVpbGRlclthbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlcl0uZW5hYmxlZC52YWx1ZSBhbmQgZnVuY3MuY29udGFpbnMoX3VpLmFudGlfYmYuc3RhdGUudmFsdWUsIGN0eC5oZWxwcy5nZXRfc3RhdGVfZGVmZW5zaXZlKGN0eC5oZWxwcy5zcGVlZCgpKSkgYW5kIF91aS5hbnRpX2JmLmVuYWJsZS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X2ppdHRlcl92YWx1ZSwgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXS5qaXR0ZXIudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9PSA1IGFuZCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmVuYWJsZWQudmFsdWUgYW5kIGZ1bmNzLmNvbnRhaW5zKF91aS5hbnRpX2JmLnN0YXRlLnZhbHVlLCBjdHguaGVscHMuZ2V0X3N0YXRlX2RlZmVuc2l2ZShjdHguaGVscHMuc3BlZWQoKSkpIGFuZCBfdWkuYW50aV9iZi5lbmFibGUudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd19qaXR0ZXJfdmFsdWUsIGFudGlfYmZfYnVpbGRlclthbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlcl0uaml0dGVyLnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICBpZiBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9PSAxIGFuZCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmVuYWJsZWQudmFsdWUgYW5kIGZ1bmNzLmNvbnRhaW5zKF91aS5hbnRpX2JmLnN0YXRlLnZhbHVlLCBjdHguaGVscHMuZ2V0X3N0YXRlX2RlZmVuc2l2ZShjdHguaGVscHMuc3BlZWQoKSkpIGFuZCBfdWkuYW50aV9iZi5lbmFibGUudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmJvZHlfeWF3X3ZhbHVlLCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmJvZHlfeWF3LnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXIgPT0gMiBhbmQgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXS5lbmFibGVkLnZhbHVlIGFuZCBmdW5jcy5jb250YWlucyhfdWkuYW50aV9iZi5zdGF0ZS52YWx1ZSwgY3R4LmhlbHBzLmdldF9zdGF0ZV9kZWZlbnNpdmUoY3R4LmhlbHBzLnNwZWVkKCkpKSBhbmQgX3VpLmFudGlfYmYuZW5hYmxlLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhd192YWx1ZSwgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXS5ib2R5X3lhdy52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGFudGlfYmZfdGFibGUubWlzc19jb3VudGVyID09IDMgYW5kIGFudGlfYmZfYnVpbGRlclthbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlcl0uZW5hYmxlZC52YWx1ZSBhbmQgZnVuY3MuY29udGFpbnMoX3VpLmFudGlfYmYuc3RhdGUudmFsdWUsIGN0eC5oZWxwcy5nZXRfc3RhdGVfZGVmZW5zaXZlKGN0eC5oZWxwcy5zcGVlZCgpKSkgYW5kIF91aS5hbnRpX2JmLmVuYWJsZS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuYm9keV95YXdfdmFsdWUsIGFudGlfYmZfYnVpbGRlclthbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlcl0uYm9keV95YXcudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9PSA0IGFuZCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmVuYWJsZWQudmFsdWUgYW5kIGZ1bmNzLmNvbnRhaW5zKF91aS5hbnRpX2JmLnN0YXRlLnZhbHVlLCBjdHguaGVscHMuZ2V0X3N0YXRlX2RlZmVuc2l2ZShjdHguaGVscHMuc3BlZWQoKSkpIGFuZCBfdWkuYW50aV9iZi5lbmFibGUudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmJvZHlfeWF3X3ZhbHVlLCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmJvZHlfeWF3LnZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXIgPT0gNSBhbmQgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXS5lbmFibGVkLnZhbHVlIGFuZCBmdW5jcy5jb250YWlucyhfdWkuYW50aV9iZi5zdGF0ZS52YWx1ZSwgY3R4LmhlbHBzLmdldF9zdGF0ZV9kZWZlbnNpdmUoY3R4LmhlbHBzLnNwZWVkKCkpKSBhbmQgX3VpLmFudGlfYmYuZW5hYmxlLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhd192YWx1ZSwgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXS5ib2R5X3lhdy52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgX3VpLmtleWJpbmRzLm1hbnVhbF9sZWZ0OmdldCgpID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnBpdGNoLCAiZG93biIpDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3LCAiMTgwIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfdmFsdWUsIC05MCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfYmFzZSwgIkF0IHRhcmdldHMiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd19qaXR0ZXIsICJPZmYiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmJvZHlfeWF3LCAiU3RhdGljIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhd192YWx1ZSwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5mcmVlc3RhbmRfYm9keV95YXcsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICBpZiBfdWkua2V5YmluZHMubWFudWFsX3JpZ2h0OmdldCgpID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnBpdGNoLCAiZG93biIpDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3LCAiMTgwIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfdmFsdWUsIDkwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X2ppdHRlciwgIk9mZiIpDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuYm9keV95YXcsICJTdGF0aWMiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmJvZHlfeWF3X3ZhbHVlLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmZyZWVzdGFuZF9ib2R5X3lhdywgZmFsc2UpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgICAgIGlmIF91aS5rZXliaW5kcy5tYW51YWxfZm9yd2FyZDpnZXQoKSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5waXRjaCwgImRvd24iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhdywgIjE4MCIpDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X3ZhbHVlLCAxODApDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X2Jhc2UsICJBdCB0YXJnZXRzIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfaml0dGVyLCAiT2ZmIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhdywgIlN0YXRpYyIpDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuYm9keV95YXdfdmFsdWUsIDApDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYuZnJlZXN0YW5kX2JvZHlfeWF3LCBmYWxzZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgLS1fdWkua2V5YmluZHMudHdlYWtzDQoNCiAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS5rZXliaW5kcy50d2Vha3MudmFsdWUsICJTYWZlIGhlYWQiKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZW50aXR5LmdldF9wbGF5ZXJzKHRydWUpKSBkbw0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsb2NhbF9wbGF5ZXJfb3JpZ2luID0gdmVjdG9yKGVudGl0eS5nZXRfb3JpZ2luKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXJfb3JpZ2luID0gdmVjdG9yKGVudGl0eS5nZXRfb3JpZ2luKHYpKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBkaWZmZXJlbmNlID0gKGxvY2FsX3BsYXllcl9vcmlnaW4ueiAtIHBsYXllcl9vcmlnaW4ueikNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbG9jYWxfcGxheWVyX3dlYXBvbiA9IGVudGl0eS5nZXRfY2xhc3NuYW1lKGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpKSkNCiAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC0tcHJpbnQobG9jYWxfcGxheWVyX3dlYXBvbikNCiAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbF9wbGF5ZXJfd2VhcG9uID09ICJDS25pZmUiIGFuZCBzdGF0ZSA9PSAiRHVjay1qdW1wIiBhbmQgZGlmZmVyZW5jZSA+IC03MCkgdGhlbiAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5waXRjaCwgImRvd24iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhdywgIjE4MCIpDQogICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X3ZhbHVlLCAtMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfYmFzZSwgIkF0IHRhcmdldHMiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd19qaXR0ZXIsICJPZmYiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLmJvZHlfeWF3LCAiU3RhdGljIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5ib2R5X3lhd192YWx1ZSwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5mcmVlc3RhbmRfYm9keV95YXcsIGZhbHNlKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBmdW5jcy5jb250YWlucyhfdWkua2V5YmluZHMudHdlYWtzLnZhbHVlLCAiRS1TcGFtIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN0eC5kZWZlbnNpdmVfY2hlY2tzLmlzX2RlZmVuc2l2ZV9hY3RpdmUoKSBhbmQgbm90IGN0eC5kZWZlbnNpdmVfY2hlY2tzLmNob2tpbmcoY21kKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXcsICIxODAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X3ZhbHVlLCAxODApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi5waXRjaCwgIkN1c3RvbSIpIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYucGl0Y2hfdmFsdWUsIDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfaml0dGVyLCAiT2ZmIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZnMucmVmLnlhd19qaXR0ZXJfdmFsdWUsIDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLS0gYW50aS1iYWNrc3RhYg0KICAgICAgICAgICAgaWYgZnVuY3MuY29udGFpbnMoX3VpLmtleWJpbmRzLnR3ZWFrcy52YWx1ZSwgIkFudGktYmFja3N0YWIiKSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZW50aXR5LmdldF9wbGF5ZXJzKHRydWUpKSBkbw0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXJfd2VhcG9uID0gZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKHYpKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXJfZGlzdGFuY2UgPSBtYXRoLmZsb29yKHZlY3RvcihlbnRpdHkuZ2V0X29yaWdpbih2KSk6ZGlzdCh2ZWN0b3IoZW50aXR5LmdldF9vcmlnaW4oZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSkpKSAvIDcpDQogICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXJfd2VhcG9uID09ICJDS25pZmUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBsYXllcl9kaXN0YW5jZSA8IDM1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3LCAiMTgwIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmcy5yZWYueWF3X3ZhbHVlLCAtMTgwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfYmFzZSwgIkF0IHRhcmdldHMiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWZzLnJlZi55YXdfaml0dGVyLCAiT2ZmIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9DQoNCiAgICBjdHgubm90aWZ5ID0gew0KICAgICAgICByZW5kZXJfcmVjdF9vdXRsaW5lID0gZnVuY3Rpb24oeCx5LHcsaCxyLGcsYixhKSANCiAgICAgICAgICAgIHJlbmRlcmVyLmxpbmUoeCwgeSwgeCArIHcsIHksIHIsZyxiLGEpDQogICAgICAgICAgICByZW5kZXJlci5saW5lKHgsIHksIHgsIHkgKyBoLCByLGcsYixhKQ0KICAgICAgICAgICAgcmVuZGVyZXIubGluZSh4LCB5ICsgaCwgeCArIHcsIHkgKyBoLCByLGcsYixhKQ0KICAgICAgICAgICAgcmVuZGVyZXIubGluZSh4ICsgdywgeSwgeCArIHcsIHkgKyBoLCByLGcsYixhKQ0KICAgICAgICBlbmQsDQogICAgICAgIGVhc2VJbk91dCA9IGZ1bmN0aW9uKHQpDQoJCQlyZXR1cm4gKHQgPiAwLjUpIGFuZCA0KigodC0xKV4zKSsxIG9yIDQqdF4zOw0KCQllbmQsDQogICAgICAgIGNsYW1wID0gZnVuY3Rpb24odmFsLCBsb3dlciwgdXBwZXIpDQoJCQlpZiBsb3dlciA+IHVwcGVyIHRoZW4gbG93ZXIsIHVwcGVyID0gdXBwZXIsIGxvd2VyIGVuZA0KCQkJcmV0dXJuIG1hdGgubWF4KGxvd2VyLCBtYXRoLm1pbih1cHBlciwgdmFsKSkNCgkJZW5kLA0KICAgICAgICByZW5kZXIgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBPZmZzZXQgPSAwDQoNCiAgICAgICAgICAgIGlmIHVpLmlzX21lbnVfb3BlbigpIGFuZCBfdWkudmlzdWFscy5lbmFibGUudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgIGN0eC5ub3RpZnkucmVuZGVyX3JlY3Rfb3V0bGluZShoaXRsb2dzX3Bvcy5wb3NfeCwgaGl0bG9nc19wb3MucG9zX3ksIGhpdGxvZ3NfcG9zLnNpemVfdywgaGl0bG9nc19wb3Muc2l6ZV9oLCAyNTUsMjU1LDI1NSwyNTUpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChoaXRsb2dzX3Bvcy5wb3NfeCArIGhpdGxvZ3NfcG9zLnNpemVfdyAvMiwgaGl0bG9nc19wb3MucG9zX3ktMTAsIDI1NSwgMjU1LCAyNTUsIDIwMCwgImMiLCBuaWwsICJNMiAtIENFTlRFUiIpDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgaWYgY2xpZW50LmtleV9zdGF0ZSgweDAxKSBhbmQgdWkuaXNfbWVudV9vcGVuKCkgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1vdXNlX3BvcyA9IHsgdWkubW91c2VfcG9zaXRpb24oKSB9DQogICAgICAgICAgICAgICAgaWYgZnVuY3MuaW50ZXJzZWN0KGhpdGxvZ3NfcG9zLnBvc194LCBoaXRsb2dzX3Bvcy5wb3NfeSwgaGl0bG9nc19wb3Muc2l6ZV93LCBoaXRsb2dzX3Bvcy5zaXplX2gpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbm90aWZ5X2hvdmVyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBoaXRsb2dzX3Bvcy5wb3NfeCA9IG1vdXNlX3Bvc1sxXSAtIGhpdGxvZ3NfcG9zLnNpemVfdyAvMiANCiAgICAgICAgICAgICAgICAgICAgaGl0bG9nc19wb3MucG9zX3kgPSBtb3VzZV9wb3NbMl0gLSBoaXRsb2dzX3Bvcy5zaXplX2ggLzINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBub3RpZnlfaG92ZXIgPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGlmIGNsaWVudC5rZXlfc3RhdGUoMHgwMikgYW5kIHVpLmlzX21lbnVfb3BlbigpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBmdW5jcy5pbnRlcnNlY3QoaGl0bG9nc19wb3MucG9zX3gsIGhpdGxvZ3NfcG9zLnBvc195LCBoaXRsb2dzX3Bvcy5zaXplX3csIGhpdGxvZ3NfcG9zLnNpemVfaCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICBoaXRsb2dzX3Bvcy5wb3NfeCA9IFggLyAyIC0gaGl0bG9nc19wb3Muc2l6ZV93IC8yDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgZm9yIGksIGluZm9fbm90aSBpbiBpcGFpcnMobm90aWZ5X2RhdGEpIGRvDQogICAgICAgICAgICAgICAgaWYgaSA+IDcgdGhlbg0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUobm90aWZ5X2RhdGEsIGkpDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBpbmZvX25vdGkudGV4dCB+PSBuaWwgYW5kIGluZm9fbm90aS50ZXh0IH49ICIiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgaW5mb19ub3RpLnRpbWVyICsgNC4xIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGluZm9fbm90aS5mcmFjdGlvbiA9IGN0eC5ub3RpZnkuY2xhbXAoaW5mb19ub3RpLmZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKSAvIDAuMywgMCwgMSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaW5mb19ub3RpLmZyYWN0aW9uID0gY3R4Lm5vdGlmeS5jbGFtcChpbmZvX25vdGkuZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC4zLCAwLCAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaW5mb19ub3RpLnRpbWVfbGVmdCA9IGN0eC5ub3RpZnkuY2xhbXAoaW5mb19ub3RpLnRpbWVfbGVmdCArIGdsb2JhbHMuZnJhbWV0aW1lKCkgLyA0LjEsIDAsIDEpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGxvY2FsIGZyYWN0aW9uID0gY3R4Lm5vdGlmeS5lYXNlSW5PdXQoaW5mb19ub3RpLmZyYWN0aW9uKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGxvY2FsIHdpZHRoID0gdmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYyIsIGluZm9fbm90aS50ZXh0KSkNCiAgICAgICAgICAgICAgICBsb2NhbCBjb2xvciA9IGluZm9fbm90aS5jb2xvcg0KICAgICAgICAgICAgICAgIGxvY2FsIHgseSx3LGggPSBoaXRsb2dzX3Bvcy5wb3NfeCwgaGl0bG9nc19wb3MucG9zX3ksIGhpdGxvZ3NfcG9zLnNpemVfdywgaGl0bG9nc19wb3Muc2l6ZV9oDQoNCiAgICAgICAgICAgICAgICBpZiBfdWkudmlzdWFscy5ub3RpZnlfc3R5bGUudmFsdWUgPT0gIkRlZmF1bHQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlYWRmaWxlKCJpbnRlci5wbmciKSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHBuZyA9IGltYWdlcy5sb2FkX3BuZyhyZWFkZmlsZSgiaW50ZXIucG5nIikpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1fcmVuZGVyOmdsb3dfbW9kdWxlKHggKyAody8yKSAtIHdpZHRoLnggLzIgLSAxNywgeSAtIDIwICsgMzEgKiBpICogZnJhY3Rpb24sIHdpZHRoLnggKyAzNSwgd2lkdGgueSArIDEwLCAxLCAxMCwge2NvbG9yWzFdLCBjb2xvclsyXSwgY29sb3JbM10sMjU1ICogZnJhY3Rpb259LCB7MTUsMTUsMTUsMjU1ICogZnJhY3Rpb259KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBuZzpkcmF3KHggKyAody8yKSAtIHdpZHRoLnggLzIgLSAxMiwgeSAtIDIwICsgMzEgKiBpICogZnJhY3Rpb24gKyA0LCAxNywgMTUsIGNvbG9yWzFdLCBjb2xvclsyXSwgY29sb3JbM10sMjU1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoeCArICh3LzIpIC0gd2lkdGgueCAvMiArIDEwLCB5IC0gMjAgKyAzMSAqIGkgKiBmcmFjdGlvbiArIDUsIDI1NSwyNTUsMjU1LDI1NSpmcmFjdGlvbiwgJycsIDAsIGluZm9fbm90aS50ZXh0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBfdWkudmlzdWFscy5ub3RpZnlfc3R5bGUudmFsdWUgPT0gIk1vZGVybiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVhZGZpbGUoImludGVyLnBuZyIpIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcG5nID0gaW1hZ2VzLmxvYWRfcG5nKHJlYWRmaWxlKCJpbnRlci5wbmciKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubV9yZW5kZXI6Z2xvd19tb2R1bGUoeCArICh3LzIpIC0gd2lkdGgueCAvMiAtIDE3LCB5IC0gMjAgKyAzMSAqIGkgKiBmcmFjdGlvbiwgd2lkdGgueCArIDM1LCB3aWR0aC55ICsgMTAsIDEwLCA1LCB7Y29sb3JbMV0sIGNvbG9yWzJdLCBjb2xvclszXSw2MCAqIGZyYWN0aW9ufSwgezE1LDE1LDE1LDI1NSAqIGZyYWN0aW9ufSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbmc6ZHJhdyh4ICsgKHcvMikgLSB3aWR0aC54IC8yIC0gMTIsIHkgLSAyMCArIDMxICogaSAqIGZyYWN0aW9uICsgNCwgMTcsIDE1LCBjb2xvclsxXSwgY29sb3JbMl0sIGNvbG9yWzNdLDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KHggKyAody8yKSAtIHdpZHRoLnggLzIgKyAxMCwgeSAtIDIwICsgMzEgKiBpICogZnJhY3Rpb24gKyA1LCAyNTUsMjU1LDI1NSwyNTUqZnJhY3Rpb24sICcnLCAwLCBpbmZvX25vdGkudGV4dCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgX3VpLnZpc3VhbHMubm90aWZ5X3N0eWxlLnZhbHVlID09ICJPRyIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyX29nc2tlZXRfYm9yZGVyKHggKyAody8yKSAtIHdpZHRoLnggLzIsIHkgKyAyNSArIDM1ICogaSAqIGZyYWN0aW9uLCB3aWR0aC54LCB3aWR0aC55ICsgMiwgMjU1ICogZnJhY3Rpb24sIGluZm9fbm90aS50ZXh0KQ0KICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgaWYgaW5mb19ub3RpLnRpbWVyICsgNC4zIDwgZ2xvYmFscy5yZWFsdGltZSgpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKG5vdGlmeV9kYXRhLGkpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LmluZGljYXRvcnMgPSB7DQogICAgICAgIHJlbmRlciA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIG1lID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgICAgICAgICAgaWYgbm90IGVudGl0eS5pc19hbGl2ZShtZSkgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAgICAgICAgIGxvY2FsIGlzX2R0ID0gdWkuZ2V0KHJlZnMucmVmZXJlbmNlcy5kb3VibGVfdGFwWzJdKQ0KICAgICAgICAgICAgbG9jYWwgaXNfaHMgPSB1aS5nZXQocmVmcy5yZWZlcmVuY2VzLm9uX3Nob3RfYW50aV9haW1bMl0pDQogICAgICAgICAgICBsb2NhbCBpc19mZCA9IHVpLmdldChyZWZzLnJlZmVyZW5jZXMuZHVja19wZWVrX2Fzc2lzdCkNCiAgICAgICAgICAgIGxvY2FsIGlzX3FwID0gdWkuZ2V0KHJlZnMucmVmLnF1aWNrX3BlZWtbMl0pDQogICAgICAgICAgICBsb2NhbCByLGcsYixhID0gX3VpLnZpc3VhbHMuZW5hYmxlOmdldF9jb2xvcigpDQoNCiAgICAgICAgICAgIGlmIHVpLmlzX21lbnVfb3BlbigpIGFuZCBfdWkudmlzdWFscy5lbmFibGUudmFsdWUgYW5kIF91aS52aXN1YWxzLmluZHNfc3R5bGUudmFsdWUgfj0gIk9mZiIgdGhlbg0KICAgICAgICAgICAgICAgIGN0eC5ub3RpZnkucmVuZGVyX3JlY3Rfb3V0bGluZShpbmRpY2F0b3JfcG9zLnBvc194LCBpbmRpY2F0b3JfcG9zLnBvc195LCBpbmRpY2F0b3JfcG9zLnNpemVfdywgaW5kaWNhdG9yX3Bvcy5zaXplX2gsIDI1NSwyNTUsMjU1LDI1NSkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBjbGllbnQua2V5X3N0YXRlKDB4MDEpIGFuZCB1aS5pc19tZW51X29wZW4oKSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbW91c2VfcG9zID0geyB1aS5tb3VzZV9wb3NpdGlvbigpIH0NCiAgICAgICAgICAgICAgICBpZiBmdW5jcy5pbnRlcnNlY3QoaW5kaWNhdG9yX3Bvcy5wb3NfeCwgaW5kaWNhdG9yX3Bvcy5wb3NfeSwgaW5kaWNhdG9yX3Bvcy5zaXplX3csIGluZGljYXRvcl9wb3Muc2l6ZV9oKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGluZF9ob3ZlciA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yX3Bvcy5wb3NfeSA9IG1vdXNlX3Bvc1syXSAtIGluZGljYXRvcl9wb3Muc2l6ZV9oIC8yDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBpbmRpY2F0b3JfcG9zLnBvc195ID4gWSAtIGluZGljYXRvcl9wb3Muc2l6ZV9oIG9yIGluZGljYXRvcl9wb3MucG9zX3kgPCA1MCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGluZGljYXRvcl9wb3MucG9zX3kgPSBZIC8yICsgMjUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpbmRfaG92ZXIgPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGxvY2FsIHgseSx3LGggPSBpbmRpY2F0b3JfcG9zLnBvc194LCBpbmRpY2F0b3JfcG9zLnBvc195LCBpbmRpY2F0b3JfcG9zLnNpemVfdywgaW5kaWNhdG9yX3Bvcy5zaXplX2gNCg0KICAgICAgICAgICAgLS1fdWkudmlzdWFscy5pbmRzX29wdGlvbnMNCiAgICAgICAgICAgIC0tZnVuY3MuY29udGFpbnMNCiAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLmluZHNfb3B0aW9ucy52YWx1ZSwgIkluIHNjb3BlIikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGVudGl0eS5nZXRfcHJvcChtZSwgIm1fYklzU2NvcGVkIikgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGluZF9hbmltX3Njb3BlID0gY3R4Lm5vdGlmeS5jbGFtcChpbmRfYW5pbV9zY29wZSArIGdsb2JhbHMuZnJhbWV0aW1lKCkgLyAwLjYsIDAsIDEpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpbmRfYW5pbV9zY29wZSA9IGN0eC5ub3RpZnkuY2xhbXAoaW5kX2FuaW1fc2NvcGUgLSBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC42LCAwLCAxKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLmluZHNfb3B0aW9ucy52YWx1ZSwgIkFscGhhIikgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGVudGl0eS5nZXRfcHJvcChtZSwgIm1fYklzU2NvcGVkIikgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGluZF9hbmltX3Njb3BlX2FscGhhID0gY3R4Lm5vdGlmeS5jbGFtcChpbmRfYW5pbV9zY29wZV9hbHBoYSAtIGdsb2JhbHMuZnJhbWV0aW1lKCkgLyAwLjYsIDAsIDEpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpbmRfYW5pbV9zY29wZV9hbHBoYSA9IGN0eC5ub3RpZnkuY2xhbXAoaW5kX2FuaW1fc2NvcGVfYWxwaGEgKyBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC42LCAwLCAxKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGxvY2FsIGZyYWN0aW9uID0gY3R4Lm5vdGlmeS5lYXNlSW5PdXQoaW5kX2FuaW1fc2NvcGUpDQogICAgICAgICAgICBsb2NhbCBmcmFjdGlvbl9hbHBoYSA9IGN0eC5ub3RpZnkuZWFzZUluT3V0KGluZF9hbmltX3Njb3BlX2FscGhhKQ0KDQogICAgICAgICAgICAtLXByaW50KGZyYWN0aW9uX2FscGhhKQ0KDQogICAgICAgICAgICBpZiBfdWkudmlzdWFscy5pbmRzX3N0eWxlLnZhbHVlID09ICJQaXhlbCIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLmluZHNfb3B0aW9ucy52YWx1ZSwgIkFuaW1hdGVkIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgKyAodmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYy0iLCAiaW50ZXJpdHVzICAiIC4uIGV1cGhlbWlhLmJ1aWxkKSkueCAvMiArIDUpICogZnJhY3Rpb24sIHkgKyA4LCByLCBnLCBiLCAyNTUgKiBmcmFjdGlvbl9hbHBoYSwgImMtIiwgMCwgZnVuY3MudGV4dF9mYWRlX2FuaW1hdGlvbig1LCByLCBnLCBiLCAyNTUgKiBmcmFjdGlvbl9hbHBoYSwgc3RyaW5nLnVwcGVyKCJpbnRlcml0dXMgICIgLi4gZXVwaGVtaWEuYnVpbGQpKSkNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8yICsgKHZlY3RvcihyZW5kZXJlci5tZWFzdXJlX3RleHQoImMtIiwgc3RyaW5nLnVwcGVyKGN0eC5oZWxwcy5nZXRfc3RhdGVfZGVmZW5zaXZlKGN0eC5oZWxwcy5zcGVlZCgpKSkpKS54IC8yICsgMikgKiBmcmFjdGlvbiwgeSArIDE2LCByLCBnLCBiLCAyNTUgKiBmcmFjdGlvbl9hbHBoYSwgImMtIiwgMCwgc3RyaW5nLnVwcGVyKGN0eC5oZWxwcy5nZXRfc3RhdGVfZGVmZW5zaXZlKGN0eC5oZWxwcy5zcGVlZCgpKSkpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1faW5kaWNhdG9ycyA9IHt7dGV4dCA9ICJEVCIsIGNvbG9yID0gaXNfZHQgPT0gdHJ1ZSBhbmQge3IsZyxifSBvciB7OTIsOTIsOTJ9fSx7dGV4dCA9ICJPUyIsY29sb3IgPSBpc19ocyA9PSB0cnVlIGFuZCB7cixnLGJ9IG9yIHs5Miw5Miw5Mn19LCB7dGV4dCA9ICJRUCIsIGNvbG9yID0gaXNfcXAgPT0gdHJ1ZSBhbmQge3IsZyxifSBvciB7OTIsOTIsOTJ9fSwge3RleHQgPSAiRkQiLCBjb2xvciA9IGlzX2ZkID09IHRydWUgYW5kIHtyLGcsYn0gb3IgezkyLDkyLDkyfX19DQogICAgICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKG1faW5kaWNhdG9ycykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIHIsZyxiID0gdW5wYWNrKHYuY29sb3IpDQogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLyAyIC0gMzAgKyBpKjEyICsgMjMgKiBmcmFjdGlvbiwgeSArIDI0LCByLGcsYiwgMjIwICogZnJhY3Rpb25fYWxwaGEsICJjLSIsIDAsIHYudGV4dCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgKyAodmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYy0iLCAiaW50ZXJpdHVzICAiIC4uIGV1cGhlbWlhLmJ1aWxkKSkueCAvMiArIDUpICogZnJhY3Rpb24sIHkgKyA4LCByLCBnLCBiLCAyNTUgKiBmcmFjdGlvbl9hbHBoYSwgImMtIiwgMCwgc3RyaW5nLnVwcGVyKCJpbnRlcml0dXMgICIgLi4gZXVwaGVtaWEuYnVpbGQpKQ0KICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgKyAodmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYy0iLCBzdHJpbmcudXBwZXIoY3R4LmhlbHBzLmdldF9zdGF0ZV9kZWZlbnNpdmUoY3R4LmhlbHBzLnNwZWVkKCkpKSkpLnggLzIgKyAyKSAqIGZyYWN0aW9uLCB5ICsgMTYsIHIsIGcsIGIsIDI1NSAqIGZyYWN0aW9uX2FscGhhLCAiYy0iLCAwLCBzdHJpbmcudXBwZXIoY3R4LmhlbHBzLmdldF9zdGF0ZV9kZWZlbnNpdmUoY3R4LmhlbHBzLnNwZWVkKCkpKSkNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbV9pbmRpY2F0b3JzID0ge3t0ZXh0ID0gIkRUIiwgY29sb3IgPSBpc19kdCA9PSB0cnVlIGFuZCB7cixnLGJ9IG9yIHs5Miw5Miw5Mn19LHt0ZXh0ID0gIk9TIixjb2xvciA9IGlzX2hzID09IHRydWUgYW5kIHtyLGcsYn0gb3IgezkyLDkyLDkyfX0sIHt0ZXh0ID0gIlFQIiwgY29sb3IgPSBpc19xcCA9PSB0cnVlIGFuZCB7cixnLGJ9IG9yIHs5Miw5Miw5Mn19LCB7dGV4dCA9ICJGRCIsIGNvbG9yID0gaXNfZmQgPT0gdHJ1ZSBhbmQge3IsZyxifSBvciB7OTIsOTIsOTJ9fX0NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMobV9pbmRpY2F0b3JzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgcixnLGIgPSB1bnBhY2sodi5jb2xvcikNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWCAvIDIgLSAzMCArIGkqMTIgKyAyMyAqIGZyYWN0aW9uLCB5ICsgMjQsIHIsZyxiLCAyMjAgKiBmcmFjdGlvbl9hbHBoYSwgImMtIiwgMCwgdi50ZXh0KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBfdWkudmlzdWFscy5pbmRzX3N0eWxlLnZhbHVlID09ICJNaW5pbWFsIiB0aGVuDQogICAgICAgICAgICAgICAgaWYgZnVuY3MuY29udGFpbnMoX3VpLnZpc3VhbHMuaW5kc19vcHRpb25zLnZhbHVlLCAiQW5pbWF0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWCAvMiArICh2ZWN0b3IocmVuZGVyZXIubWVhc3VyZV90ZXh0KCJjLSIsICJpbnRlcml0dXMiKSkueCAvMiArIDcpICogZnJhY3Rpb24sIHkgKyA4LCByLCBnLCBiLCAyNTUgKiBmcmFjdGlvbl9hbHBoYSwgImMiLCAwLCBmdW5jcy50ZXh0X2ZhZGVfYW5pbWF0aW9uKDEuNSwgcixnLGIsYSAqIGZyYWN0aW9uX2FscGhhLCAiaW50ZXJpdHVzIikpDQogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoWCAvMiArICh2ZWN0b3IocmVuZGVyZXIubWVhc3VyZV90ZXh0KCJjLSIsIGV1cGhlbWlhLmJ1aWxkKSkueCAvMiArIDYpICogZnJhY3Rpb24sIHkgKyAxOCwgciwgZywgYiwgMjU1KiBmcmFjdGlvbl9hbHBoYSwgImMiLCAwLCBmdW5jcy50ZXh0X2ZhZGVfYW5pbWF0aW9uKDEuNSwgcixnLGIsYSAqIGZyYWN0aW9uX2FscGhhLCBldXBoZW1pYS5idWlsZCkpDQogICAgICAgICAgICAgICAgZWxzZSANCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8yICsgKHZlY3RvcihyZW5kZXJlci5tZWFzdXJlX3RleHQoImMtIiwgImludGVyaXR1cyIpKS54IC8yICsgNykgKiBmcmFjdGlvbiwgeSArIDgsIHIsIGcsIGIsIDI1NSAqIGZyYWN0aW9uX2FscGhhLCAiYyIsIDAsICJpbnRlcml0dXMiKQ0KICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgKyAodmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYy0iLCBldXBoZW1pYS5idWlsZCkpLnggLzIgKyA2KSAqIGZyYWN0aW9uLCB5ICsgMTgsIHIsIGcsIGIsIDI1NSogZnJhY3Rpb25fYWxwaGEgLCAiYyIsIDAsIGV1cGhlbWlhLmJ1aWxkKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGlmIF91aS52aXN1YWxzLmluZHNfc3R5bGUudmFsdWUgPT0gIk1vZGVybiIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLmluZHNfb3B0aW9ucy52YWx1ZSwgIkFuaW1hdGVkIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgKyAodmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYy0iLCAiaW50ZXJpdHVzIikpLnggLzIgKyA3KSAqIGZyYWN0aW9uLCB5ICsgOCwgciwgZywgYiwgMjU1ICogZnJhY3Rpb25fYWxwaGEsICJjIiwgMCwgdG9faml0dGVyIGFuZCAiXGEiLi5mdW5jcy5yZ2JhX3RvX2hleChyLGcsYiwyNTUpLi4iaW50ZVxhRkZGRkZGRkZyaXR1cyIgb3IgIlxhRkZGRkZGRkZpbnRlXGEiLi5mdW5jcy5yZ2JhX3RvX2hleChyLGcsYiwyNTUpLi4icml0dXMiKQ0KICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgKyAodmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYy0iLCBldXBoZW1pYS5idWlsZCkpLnggLzIgKyA2KSAqIGZyYWN0aW9uLCB5ICsgMTgsIHIsIGcsIGIsIDI1NSogZnJhY3Rpb25fYWxwaGEsICJjIiwgMCwgZnVuY3MudGV4dF9mYWRlX2FuaW1hdGlvbigxLjUsIHIsZyxiLGEgKiBmcmFjdGlvbl9hbHBoYSwgZXVwaGVtaWEuYnVpbGQpKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBtX2luZGljYXRvcnMgPSB7e3RleHQgPSAiZHQiLCBjb2xvciA9IGlzX2R0ID09IHRydWUgYW5kIHtyLGcsYn0gb3IgezkyLDkyLDkyfX0se3RleHQgPSAib3MiLGNvbG9yID0gaXNfaHMgPT0gdHJ1ZSBhbmQge3IsZyxifSBvciB7OTIsOTIsOTJ9fSwge3RleHQgPSAicXAiLCBjb2xvciA9IGlzX3FwID09IHRydWUgYW5kIHtyLGcsYn0gb3IgezkyLDkyLDkyfX0sIHt0ZXh0ID0gImZkIiwgY29sb3IgPSBpc19mZCA9PSB0cnVlIGFuZCB7cixnLGJ9IG9yIHs5Miw5Miw5Mn19fQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhtX2luZGljYXRvcnMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICByLGcsYiA9IHVucGFjayh2LmNvbG9yKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8gMiAtIDMwICsgaSoxMiArIDIzICogZnJhY3Rpb24sIHkgKyAyOCwgcixnLGIsIDIyMCAqIGZyYWN0aW9uX2FscGhhLCAiYyIsIDAsIHYudGV4dCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZSANCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8yICsgKHZlY3RvcihyZW5kZXJlci5tZWFzdXJlX3RleHQoImMtIiwgImludGVyaXR1cyIpKS54IC8yICsgNykgKiBmcmFjdGlvbiwgeSArIDgsIHIsIGcsIGIsIDI1NSAqIGZyYWN0aW9uX2FscGhhLCAiYyIsIDAsICJpbnRlcml0dXMiKQ0KICAgICAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KFggLzIgKyAodmVjdG9yKHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYy0iLCBldXBoZW1pYS5idWlsZCkpLnggLzIgKyA2KSAqIGZyYWN0aW9uLCB5ICsgMTgsIHIsIGcsIGIsIDI1NSogZnJhY3Rpb25fYWxwaGEgLCAiYyIsIDAsIGV1cGhlbWlhLmJ1aWxkKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBtX2luZGljYXRvcnMgPSB7e3RleHQgPSAiZHQiLCBjb2xvciA9IGlzX2R0ID09IHRydWUgYW5kIHtyLGcsYn0gb3IgezkyLDkyLDkyfX0se3RleHQgPSAib3MiLGNvbG9yID0gaXNfaHMgPT0gdHJ1ZSBhbmQge3IsZyxifSBvciB7OTIsOTIsOTJ9fSwge3RleHQgPSAicXAiLCBjb2xvciA9IGlzX3FwID09IHRydWUgYW5kIHtyLGcsYn0gb3IgezkyLDkyLDkyfX0sIHt0ZXh0ID0gImZkIiwgY29sb3IgPSBpc19mZCA9PSB0cnVlIGFuZCB7cixnLGJ9IG9yIHs5Miw5Miw5Mn19fQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhtX2luZGljYXRvcnMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICByLGcsYiA9IHVucGFjayh2LmNvbG9yKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8gMiAtIDMwICsgaSoxMiArIDIzICogZnJhY3Rpb24sIHkgKyAyOCwgcixnLGIsIDIyMCAqIGZyYWN0aW9uX2FscGhhLCAiYyIsIDAsIHYudGV4dCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LndhdGVybWFyayA9IHsNCiAgICAgICAgdGFibGVfbGVycCA9IGZ1bmN0aW9uKGEsIGIsIHBlcmNlbnRhZ2UpDQogICAgICAgICAgICBsb2NhbCByZXN1bHQgPSB7fQ0KICAgICAgICAgICAgZm9yIGk9MSwgI2EgZG8NCiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBsZXJwKGFbaV0sIGJbaV0sIHBlcmNlbnRhZ2UpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQNCiAgICAgICAgZW5kLA0KICAgICAgICByb3VuZCA9IGZ1bmN0aW9uKG51bSwgbnVtRGVjaW1hbFBsYWNlcykNCiAgICAgICAgICAgIGxvY2FsIG11bHQgPSAxMF4obnVtRGVjaW1hbFBsYWNlcyBvciAwKQ0KICAgICAgICAgICAgcmV0dXJuIG1hdGguZmxvb3IobnVtICogbXVsdCArIDAuNSkgLyBtdWx0DQogICAgICAgIGVuZCwNCiAgICAgICAgY2xhbXAgPSBmdW5jdGlvbihjdXJfdmFsLCBtaW5fdmFsLCBtYXhfdmFsKQ0KICAgICAgICAgICAgcmV0dXJuIG1hdGgubWluKG1hdGgubWF4KGN1cl92YWwsIG1pbl92YWwpLCBtYXhfdmFsKQ0KICAgICAgICBlbmQsDQogICAgICAgIGNvbG9yZWQgPSBmdW5jdGlvbihyLGcsYixhLCB0ZXh0LCByMixnMixiMixhMikgDQogICAgICAgICAgICByZXR1cm4gIlxhIi4uZnVuY3MucmdiYV90b19oZXgocixnLGIsYSkuLnRleHQuLiJcYSIuLmZ1bmNzLnJnYmFfdG9faGV4KHIyLGcyLGIyLGEyKQ0KICAgICAgICBlbmQsDQogICAgICAgIGxlcnBfY29sb3JfeWVsbG93X3JlZCA9IGZ1bmN0aW9uKHZhbCwgbWF4X25vcm1hbCwgbWF4X3llbGxvdywgbWF4X3JlZCwgZGVmYXVsdCwgeWVsbG93LCByZWQpDQogICAgICAgICAgICBkZWZhdWx0ID0gZGVmYXVsdCBvciB7MjU1LCAyNTUsIDI1NX0NCiAgICAgICAgICAgIHllbGxvdyA9IHllbGxvdyBvciB7MjMwLCAyMTAsIDQwfQ0KICAgICAgICAgICAgcmVkID0gcmVkIG9yIHsyNTUsIDMyLCAzMn0NCiAgICAgICAgICAgIGlmIHZhbCA+IG1heF95ZWxsb3cgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybiB1bnBhY2soY3R4LndhdGVybWFyay50YWJsZV9sZXJwKHllbGxvdywgcmVkLCBjdHgud2F0ZXJtYXJrLmNsYW1wKCh2YWwtbWF4X3llbGxvdykvKG1heF9yZWQtbWF4X3llbGxvdyksIDAsIDEpKSkNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gdW5wYWNrKGN0eC53YXRlcm1hcmsudGFibGVfbGVycChkZWZhdWx0LCB5ZWxsb3csIGN0eC53YXRlcm1hcmsuY2xhbXAoKHZhbC1tYXhfbm9ybWFsKS8obWF4X3llbGxvdy1tYXhfbm9ybWFsKSwgMCwgMSkpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCwNCiAgICAgICAgZ2V0X2ZwcyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZ0X3ByZXYgPSBmdF9wcmV2ICogMC45ICsgZ2xvYmFscy5hYnNvbHV0ZWZyYW1ldGltZSgpICogMC4xDQogICAgICAgICAgICByZXR1cm4gY3R4LndhdGVybWFyay5yb3VuZCgxIC8gZnRfcHJldikNCiAgICAgICAgZW5kLA0KICAgICAgICByZW5kZXIgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBtZSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICAgICAgICAgIGlmIG5vdCBlbnRpdHkuaXNfYWxpdmUobWUpIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgbG9jYWwgcixnLGIsYSA9IF91aS52aXN1YWxzLmVuYWJsZTpnZXRfY29sb3IoKQ0KICAgICAgICAgICAgbG9jYWwgcG9zID0gX3VpLnZpc3VhbHMud2F0ZXJtYXJrc19wb3M6Z2V0KCkNCiAgICAgICAgICAgIGxvY2FsIG9wdHMgPSBfdWkudmlzdWFscy53YXRlcm1hcmtfb3B0aW9uczpnZXQoKQ0KICAgICAgICAgICAgbG9jYWwgeCwgeSA9IHBvcyA9PSAiQm90dG9tIiBhbmQgWCAvIDIgb3IgNDUsIHBvcyA9PSAiQm90dG9tIiBhbmQgWSAtIDEwIG9yIFkgLyAyIC0gNDANCiAgICAgICAgICAgIC0tZnVuY3MuY29udGFpbnMoX3VpLnZpc3VhbHMuaW5kc19vcHRpb25zLnZhbHVlLCAiQW5pbWF0ZWQiKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiBlbnRpdHkuZ2V0X3Byb3AobWUsICJtX2JJc1Njb3BlZCIpID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKG9wdHMsICJBbHBoYSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgd2F0ZXJtYXJrX2FscGhhID0gY3R4Lm5vdGlmeS5jbGFtcCh3YXRlcm1hcmtfYWxwaGEgLSBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC42LCAwLCAxKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgd2F0ZXJtYXJrX2FscGhhID0gY3R4Lm5vdGlmeS5jbGFtcCh3YXRlcm1hcmtfYWxwaGEgKyBnbG9iYWxzLmZyYW1ldGltZSgpIC8gMC42LCAwLCAxKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHdhdGVybWFya19hbHBoYSA9IGN0eC5ub3RpZnkuY2xhbXAod2F0ZXJtYXJrX2FscGhhICsgZ2xvYmFscy5mcmFtZXRpbWUoKSAvIDAuNiwgMCwgMSkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBsb2NhbCBmcmFjdGlvbiA9IGN0eC5ub3RpZnkuZWFzZUluT3V0KHdhdGVybWFya19hbHBoYSkNCiAgICAgICAgICAgIGxvY2FsIHdhdGVybWFya190ZXh0ID0gIlxhIi4uZnVuY3MucmdiYV90b19oZXgoMjAwLDIwMCwyMDAsMjMwICogZnJhY3Rpb24pLi4iSSBOIFQgRSAiLi4gZnVuY3MudGV4dF9mYWRlX2FuaW1hdGlvbigtMiwgcixnLGIsIDI1NSAqIGZyYWN0aW9uLCAiUiBJIFQgVSBTIikNCg0KICAgICAgICAgICAgaWYgZnVuY3MuY29udGFpbnMob3B0cywgIkRlc3luYyIpIHRoZW4NCiAgICAgICAgICAgICAgICB3YXRlcm1hcmtfdGV4dCA9IHRvX2ppdHRlciBhbmQgIlxhIi4uZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KmZyYWN0aW9uKS4uIkkgTiBUIEUgXGEiLi5mdW5jcy5yZ2JhX3RvX2hleCgyMDAsMjAwLDIwMCwyMzAgKiBmcmFjdGlvbikuLiJSIEkgVCBVIFMiIG9yICJcYSIuLmZ1bmNzLnJnYmFfdG9faGV4KDIwMCwyMDAsMjAwLDIzMCAqIGZyYWN0aW9uKS4uIkkgTiBUIEUgXGEiLi5mdW5jcy5yZ2JhX3RvX2hleChyLGcsYiwyNTUqZnJhY3Rpb24pLi4iUiBJIFQgVSBTIg0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHdhdGVybWFya190ZXh0ID0gIlxhIi4uZnVuY3MucmdiYV90b19oZXgoMjAwLDIwMCwyMDAsMjMwICogZnJhY3Rpb24pLi4iSSBOIFQgRSAiLi4gZnVuY3MudGV4dF9mYWRlX2FuaW1hdGlvbigtMiwgcixnLGIsIDI1NSAqIGZyYWN0aW9uLCAiUiBJIFQgVSBTIikNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBsb2NhbCBmaW5hbF90ZXh0ID0gdG9faml0dGVyIGFuZCBmdW5jcy5ncmFkaWVudF90ZXh0KHIsZyxiLCAyNTUqIGZyYWN0aW9uLCByLGcsYiwgNTUsICJJTlRFUklUVVMuUkVEIikgb3IgZnVuY3MuZ3JhZGllbnRfdGV4dChyLGcsYiwgNTUsIHIsZyxiLCAyNTUqIGZyYWN0aW9uLCAiSU5URVJJVFVTLlJFRCIpDQogICAgICAgICAgICBsb2NhbCBmbGFnYV9jb2xvciA9IHBvcyA9PSAiQm90dG9tIiBhbmQge3IsZyxiLCAwfSBvciB7cixnLGIsMjU1fQ0KICAgICAgICAgICAgbG9jYWwgZmxhZ2FfY29sb3IyID0gcG9zID09ICJCb3R0b20iIGFuZCB7cixnLGIsMjU1fSBvciB7cixnLGIsMH0NCg0KICAgICAgICAgICAgaWYgX3VpLnZpc3VhbHMud2F0ZXJtYXJrcy52YWx1ZSA9PSAiRGVmYXVsdCIgdGhlbg0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoeCwgeSwxNTAsIDE1MCwgMTUwLCAyNTUgKiBmcmFjdGlvbiwgImMiLCBuaWwsIHdhdGVybWFya190ZXh0KQ0KICAgICAgICAgICAgZWxzZWlmIF91aS52aXN1YWxzLndhdGVybWFya3MudmFsdWUgPT0gIk1pbmltYWwiIHRoZW4NCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KHBvcyA9PSAiQm90dG9tIiBhbmQgeCBvciB4ICsgMjUsIHksIHIsIGcsIGIsIDI1NSAqIGZyYWN0aW9uLCAiYyIsIDAsIHdhdGVybWFya190ZXh0Li4iIFxhIi4uZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1ICogZnJhY3Rpb24pLi4iWyIuLnN0cmluZy51cHBlcihldXBoZW1pYS5idWlsZCkuLiJdIikNCiAgICAgICAgICAgIGVsc2VpZiBfdWkudmlzdWFscy53YXRlcm1hcmtzLnZhbHVlID09ICJPZmYiIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBwbmcgPSBpbWFnZXMubG9hZF9wbmcocmVhZGZpbGUoImludGVyLnBuZyIpKQ0KICAgICAgICAgICAgICAgIHBuZzpkcmF3KFgvMiAtIDcsIFkgLSAzMCwgMTUsIDE1LCByLGcsYiwyNTUpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYLzIsIFkgLSAxMCwgciwgZywgYiwgMjU1LCAiYyIsIDAsICJpbnRlcml0dXMucmVkIikNCiAgICAgICAgICAgIGVsc2VpZiBfdWkudmlzdWFscy53YXRlcm1hcmtzLnZhbHVlID09ICJMZWdhY3kiIHRoZW4NCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KHBvcyA9PSAiQm90dG9tIiBhbmQgeCArIDEgb3IgeCArIDEsIHkgKyAxLCAwLDAsMCwyNTUqIGZyYWN0aW9uLCAiY2IiLCAwLCAiSU5URVJJVFVTLlJFRCIpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChwb3MgPT0gIkJvdHRvbSIgYW5kIHggKyAxIG9yIHggKyAxLCB5IC0gMSwgMCwwLDAsMjU1KiBmcmFjdGlvbiwgImNiIiwgMCwgIklOVEVSSVRVUy5SRUQiKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQocG9zID09ICJCb3R0b20iIGFuZCB4IC0gMSBvciB4IC0gMSwgeSAtIDEsIDAsMCwwLDI1NSogZnJhY3Rpb24sICJjYiIsIDAsICJJTlRFUklUVVMuUkVEIikNCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KHBvcyA9PSAiQm90dG9tIiBhbmQgeCAtIDEgb3IgeCAtIDEsIHkgKyAxLCAwLDAsMCwyNTUqIGZyYWN0aW9uLCAiY2IiLCAwLCAiSU5URVJJVFVTLlJFRCIpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChwb3MgPT0gIkJvdHRvbSIgYW5kIHggb3IgeCwgeSwgMjU1LCAyNTUsIDI1NSwgMjU1KiBmcmFjdGlvbiwgImNiIiwgbmlsLCBmaW5hbF90ZXh0KQ0KICAgICAgICAgICAgZWxzZWlmIF91aS52aXN1YWxzLndhdGVybWFya3MudmFsdWUgPT0gIkludGVyaXR1cyIgdGhlbg0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQocG9zID09ICJCb3R0b20iIGFuZCB4IG9yIHgsIHksIDI1NSwgMjU1LCAyNTUsIDI1NSogZnJhY3Rpb24sICJjYiIsIG5pbCwgZmluYWxfdGV4dCkNCiAgICAgICAgICAgIGVsc2VpZiBfdWkudmlzdWFscy53YXRlcm1hcmtzLnZhbHVlID09ICJDb3VudHJ5LUJhc2VkIiB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgdGV4dF93aWR0aCA9IHZlY3RvcihyZW5kZXJlci5tZWFzdXJlX3RleHQoIiIsIHN0cmluZy51cHBlcihldXBoZW1pYS51c2VybmFtZS4uIiBbIiAuLiBldXBoZW1pYS5idWlsZCAuLiAiXSIpKSkNCiAgICAgICAgICAgICAgICBsb2NhbCBmbGFnID0gaW1hZ2VzLmxvYWRfcG5nKHJlYWRmaWxlKCJmbGFnXyIuLnBhbm9yYW1hLm9wZW4oKS5NeVBlcnNvbmFBUEkuR2V0TXlDb3VudHJ5Q29kZSgpOmxvd2VyKCkuLiIucG5nIikpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIuZ3JhZGllbnQocG9zID09ICJCb3R0b20iIGFuZCB4IC0gMjUgb3IgeCAtIDQ0LCB5IC0gMTUsIDI1ICsgdGV4dF93aWR0aC54ICsgMTUsIDI1LCBmbGFnYV9jb2xvclsxXSwgZmxhZ2FfY29sb3JbMl0sIGZsYWdhX2NvbG9yWzNdLCBwb3MgPT0gIkJvdHRvbSIgYW5kIDAgb3IgZmxhZ2FfY29sb3JbNF0qIGZyYWN0aW9uLCBmbGFnYV9jb2xvcjJbMV0sIGZsYWdhX2NvbG9yMlsyXSwgZmxhZ2FfY29sb3IyWzNdLCBwb3MgPT0gIkJvdHRvbSIgYW5kIDAgb3IgZmxhZ2FfY29sb3IyWzRdKiBmcmFjdGlvbiwgdHJ1ZSkNCiAgICAgICAgICAgICAgICBmbGFnOmRyYXcocG9zID09ICJCb3R0b20iIGFuZCB4IC0gNDUgb3IgeCAtIDQyLCB5IC0gMTAsIDI1LDE2LjUsIDI1NSwyNTUsMjU1LDI1NSogZnJhY3Rpb24pDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChwb3MgPT0gIkJvdHRvbSIgYW5kIHggLSAxNyBvciAzMiwgcG9zID09ICJCb3R0b20iIGFuZCB5IC0gMTEgb3IgeSAtIDExLCAyNTUsMjU1LDI1NSwyNTUqIGZyYWN0aW9uLCAiLSIsIDAsICJJTlRFUklUVVMuUkVEIikNCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KHBvcyA9PSAiQm90dG9tIiBhbmQgeCAtIDE3IG9yIDMyLCBwb3MgPT0gIkJvdHRvbSIgYW5kIHkgLSAzIG9yIHkgLSAzLCAyNTUsMjU1LDI1NSwyNTUqIGZyYWN0aW9uLCAiLSIsIDAsIHN0cmluZy51cHBlcihldXBoZW1pYS51c2VybmFtZS4uIiBbXGEiLi4gZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KiBmcmFjdGlvbikgLi4gZXVwaGVtaWEuYnVpbGQgLi4gIlxhIi4uZnVuY3MucmdiYV90b19oZXgoMjU1LDI1NSwyNTUsMjU1KiBmcmFjdGlvbikuLiJdIikpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LmdldF9kZWZlbnNpdmUgPSB7DQogICAgICAgIGdldCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIGRpZmYgPSBzaW1fZGlmZigpDQoNCiAgICAgICAgICAgIGlmIGRpZmYgPD0gLTEgdGhlbg0KICAgICAgICAgICAgICAgIHRvX2RyYXcgPSAieWVzIg0KICAgICAgICAgICAgICAgIHRvX3VwID0gInllcyINCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9DQoNCiAgICBjdHguZGVmZW5zaXZlX2luZCA9IHsNCiAgICAgICAgcmVuZGVyID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgZGVmZW5zaXZlID0ge191aS52aXN1YWxzLmVuYWJsZTpnZXRfY29sb3IoKX0NCg0KICAgICAgICAgICAgaWYgdG9fZHJhdyA9PSAieWVzIiBhbmQgdWkuZ2V0KHJlZnMucmVmLmRvdWJsZXRhcFsyXSkgYW5kIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLm90aGVycy52YWx1ZSwgIkRlZmVuc2l2ZSIpIHRoZW4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGRyYXdfYXJ0ID0gdG9fZHJhd190aWNrcyAqIDEwMCAvIDI3DQogICAgICAgICAgICAgICAgbG9jYWwgd2FybmluZyA9IGltYWdlcy5sb2FkX3BuZyhiYXNlNjQuZGVjb2RlKCJpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRElBQUFBeUNBTUFBQUFwNFhpREFBQUFBWE5TUjBJQjJja3Nmd0FBQUFsd1NGbHpBQUFMRXdBQUN4TUJBSnFjR0FBQUFueFFURlJGQUFBQS8vKzkvLys5Ly8rOS8vKzkvLys5Ly8rKy8vLzEvLy8vLy8vKy8vL2cvLys5Ly8rOS8vKzkvLys5Ly8rOS8vKzkvLys5Ly8rOS8vL1kvLy9oLy8rOS8vKzkvLys5Ly8rOS8vKzkvLys5Ly8rOS8vL3cvLy82Ly8vQS8vKzkvLys5Ly8rOS8vL0svLy8vLy8vai8vKzkvLys5Ly8rOS8vKzkvLys5Ly8vbC8vLzkvLy9GLy8rOS8vKzkvLys5Ly8rOS8vKzkvLy9CLy8vNy8vL28vLys5Ly8rOS8vKzkvLys5Ly8rOS8vKzkvLy9iLy8vSy8vKzkvLys5Ly8rOS8vKzkvLys5Ly8rOS8vLzAvLy91Ly8rOS8vKzkvLys5Ly8rOS8vL1AvLy9SLy8rOS8vKzkvLys5Ly8rOS8vL3IvLys5Ly8rOS8vKzkvLys5Ly8rOS8vKzkvLy9FLy8vOS8vL1ovLys5Ly8rOS8vKzkvLys5Ly8rOS8vL2cvLy81Ly8rLy8vKzkvLys5Ly8rOS8vKzkvLysrLy8vNC8vL2cvLys5Ly8vVy8vLzgvLy9ELy8rOS8vKzkvLys5Ly8vdi8vL20vLys5Ly8vSi8vLysvLy9JLy8rOS8vKzkvLy90Ly8rOS8vKzkvLys5Ly8rOS8vL0IvLy9QLy8rOS8vKzkvLys5Ly8vei8vKzkvLys5Ly8rOS8vKzkvLy8wLy8vMy8vL1AvLy80Ly8rOS8vL1cvLys5Ly8vRi8vL28vLys5Ly8rOS8vL2svLy80Ly8vQy8vLzYvLy9TLy8rOS8vLzMvLy9wLy8rOS8vKzkvLys5Ly8rOS8vKzkvLy9tLy8vNS8vL0MvLys5Ly8vVi8vKzkvLys5Ly8vcS8vLzYvLy9FLy8rOS8vL1gvLys5Ly8vUi8vL3MvLys5Ly8vRi8vKzkvLy9aLy8vUi8vKzkvLy84Ly8vSS8vL2IvLy9SLy8veC8vL2UvLy9SLy8rKy8vKzkvLy9uLy8vTC8vKzkvLy9oLy8vUy8vLzAvLysrLy8vcC8vLysvLy9OLy8rKy8vLzYvLy9rLy8rOS8vL1cvLy8zLy8rLy8vL3UvLy9ULy8vNy8vL3MvLy80Ly8vNS8vL0NNaG9YY0FBQUFOUjBVazVUQUFFSkZTdExjT1gvKzRzNkh3MERCQ0UvWjdTaFJTUVBCeTVWaGV2MmVVWU1iSy8rMDNKQ0JoSlI0dnlrWkRrWkcyYWcrdVNJVkJNbFNYelN0VzlBRmpOZGxQTHJqbGd3YzcvQ2RTSXRpdWRlR0FvY1BHcXEvYzU3RUNoT2dkdjRuR00zTm1HYTl0bDR5ZnltYVZxUTdPS0x0UDdCVWpIcHVJZGdRNkxOdjU5KzhLeVhUelR4MmIzbktwMWJtZHAyU01YM25PN0ZlZHpsallLV3FMN2o5NlMweUhDZDUvbW1iY3dld09tRXE1blF2NVA3cjlPKzd0VzVsWC9lc2lmVnNmQ1MxdjJ0ZmZUUFY1bnRoc0dhNjd2UDJGYjU4RjYrQUFBRE5VbEVRVlI0bkkyVTkxOFNjUmpIaGNPNlloeFdMSzA4TTFZbVloYkRRaEZEcUNCbG1LVlFvYlpkV1ZCQmtTWTJ6TkoyYVdXbExjdjJIclJzNy9xSHVtTjAxSEVIejgvZjkrdDVQOS92NS91a3BPQ0tRZ1ZvcVdQR2d0RWFONTdPWUxMdzUySUtZckxUSmt3RXNackU0ZklnTW9MQ0J3VHBHWk14WXNyVVRDNlB0QXNMWnFSbFRjdkdrT2xDRVJzbVF5aGlDVTJhTVFNamNtYm15dktvRkRLRUtwZmx6eXJBa05sekZEU2xtQVNoUUR5VnVuQXVSbVRQMHhReHlMMzR4ZG9TWFNtR3pOZVhHUUErbVJlTHlSWVpGOFRjOE1KRkhCTVRJdk1TSzgzcGk4c3hvbFJYb2JXUURzK3kydXlWUzZvd1pPa3l0WXBIMmdTcXJuRTRsMlBFaXBXdTJrUTNuRmRYdjJvMWhxeHhPbW9rWkRlY0F2RzRtV3ZYWWNUNkRRMTJtNVg4aGdGRFkxTXpoclJzTEROWXJCQ0Z1QTBhTDAwckZxOU5tNTF1ajAwQzh5RVdBWVNMMTVhdDI3dytqMG91Z1luR0NjVnJlMHk4ZHZoM3R1VXJmRm9UWUkzZkJoZXZkci9mdjZ2RDJSRG9aUERpdHduSGF6ZUlxejJjR29Jb3MyQzJTTGdYVDREN0FtYUNZSW9sWGRLTWNqeVJ2VjlLOEdFUUwwLzNnU284Y3JDblYxVWRIMEhDNGoyRUp3NGZjY2xzOGY4WWhXcnBiRHlLUjQ0ZFQrMVN4aDhGU1lzNTlRU09PSG1xdXpPUDZGbkUxZXhhZDFaZi8ra3pmdi9aS0RGd3JyS0lUZkFxeUV0YUFhN1dKNjAzNnMvN0I2TEloVUlIVGNrbnlqSkZEQ3ZsWERNOU1EaTBJMHBjMUpmVXlRbTBVSVFGOGEwOHdHUjM5VWU5TGwyK0lqSVJhWVVoaElMbHN0eWhxTmZWdGdBTklOU0tGTXM2WENTOEZpR3VOMVhVeVdGQ3JVZ2greUl3RXZFcXVLSHhjZU8vZTZ3YWttYnZ6WWpYTGFmVURGQVRhSVc5Ym9lSjVqdmVXaHRNdHNQKzk3cDdiNUNUV0N2czFSSDJ1dC9uRmhRbjFBcDVEVDRJRVE5MTliSmgwdjJOZWZXMW9FUk9xekZUUmI0bi8zcFY2RUplajBZVWhpUzBRbDZheHlqUi9zUkZUMFlMOVhJOGZZWVFWYytOdmNFa3RNSmJTWTk2dlJoSlIzWnhZaTNVSzYzeUpVSzhldTJ5SjZXRmVBWFZQVzlBY1BTdE1Ea3Q1SXNCQXZlNzl5RDRvVkRoc1JEL3EzOUdzV2cvZmdMQnoxKzhka1pTV3VnaTB5cStncVBmY2psQmdpMkVSeXdDOVhmd1I3MWFrSnhXYUpFRjZUOS8vZllaaHBsa3MvOEJacHpRSjlzTGtTZ0FBQUFBU1VWT1JLNUNZSUk9IikpDQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICB3YXJuaW5nOmRyYXcoWCAvIDIgLSAyMCwgWSAvIDIgKiAwLjUgLSA0NSwgbmlsLCAzNSwgZGVmZW5zaXZlWzFdLGRlZmVuc2l2ZVsyXSxkZWZlbnNpdmVbM10sIDI1NSkNCiAgICAgICAgICAgICAgICBjdHgubV9yZW5kZXI6Z2xvd19tb2R1bGUoWCAvIDIgLSAyIC0gKG1hdGguZmxvb3IoZHJhd19hcnQpIC8gMiksIFkgLyAyICAqIDAuNSxtYXRoLmZsb29yKGRyYXdfYXJ0KSw0LCAxMCwyLHtkZWZlbnNpdmVbMV0sZGVmZW5zaXZlWzJdLGRlZmVuc2l2ZVszXSwxODB9LCB7ZGVmZW5zaXZlWzFdLGRlZmVuc2l2ZVsyXSxkZWZlbnNpdmVbM10sMjU1fSkNCg0KICAgICAgICAgICAgICAgIC0tIGN0eC5tX3JlbmRlcjpnbG93X21vZHVsZShYIC8gMiAtIDUwLCBZIC8gMiAqIDAuNSwgMTAwLDQsIDEwLDIse2RlZmVuc2l2ZVsxXSxkZWZlbnNpdmVbMl0sZGVmZW5zaXZlWzNdLDUwfSwgezMwLDMwLDMwLDEwMH0pDQogICAgICAgICAgICAgICAgLS0gcmVuZGVyZXIuYmx1cihYIC8gMiAtIDUwLCBZIC8gMiAgKiAwLjUsLWRyYXdfYXJ0IC8yLCAxMDAsIDYsIDEsIDEpDQogICAgICAgICAgICAgICAgLS0gcmVuZGVyZXIucmVjdGFuZ2xlKFggLyAyLCBZIC8gMiAgKiAwLjUsLWRyYXdfYXJ0IC8yICsgMSw0LGRlZmVuc2l2ZVsxXSxkZWZlbnNpdmVbMl0sZGVmZW5zaXZlWzNdLDI1NSkNCiAgICAgICAgICAgICAgICAtLSByZW5kZXJlci5yZWN0YW5nbGUoWCAvIDIsIFkgLyAyICAqIDAuNSxkcmF3X2FydCAvMiAtIDEsNCxkZWZlbnNpdmVbMV0sZGVmZW5zaXZlWzJdLGRlZmVuc2l2ZVszXSwyNTUpDQogICAgICAgICAgICAgICAgLS0gcmVuZGVyZXIudGV4dChYIC8gMiAsIFkgLyAyICAqIDAuNSAtIDEwICwyNTUsMjU1LDI1NSwyNTUsImMiLDAsIi0gZGVmZW5zaXZlIC0iKQ0KDQogICAgICAgICAgICAgICAgaWYgdG9fZHJhd190aWNrcyA9PSAyNyB0aGVuDQogICAgICAgICAgICAgICAgICAgIHRvX2RyYXdfdGlja3MgPSAwDQogICAgICAgICAgICAgICAgICAgIHRvX2RyYXcgPSAibm8iDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgdG9fZHJhd190aWNrcyA9IHRvX2RyYXdfdGlja3MgKyAxDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LnNsb3dlZF9kb3duID0gew0KICAgICAgICByZW5kZXIgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBtZSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICAgICAgICAgIGlmIG1lID09IG5pbCB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgIGlmIG5vdCBlbnRpdHkuaXNfYWxpdmUobWUpIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgbG9jYWwgcixnLGIsYSA9IF91aS52aXN1YWxzLmVuYWJsZTpnZXRfY29sb3IoKQ0KDQogICAgICAgICAgICBsb2NhbCBzbG93ZWRfZG93bl92YWx1ZSA9IGVudGl0eS5nZXRfcHJvcChtZSwibV9mbFZlbG9jaXR5TW9kaWZpZXIiKSAqIDEwMA0KICAgICAgICAgICAgbG9jYWwgaXNfZGVmZW5zaXZlID0gdG9fZHJhdyA9PSAieWVzIiBhbmQgdWkuZ2V0KHJlZnMucmVmLmRvdWJsZXRhcFsyXSkgYW5kIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLm90aGVycy52YWx1ZSwgIkRlZmVuc2l2ZSIpDQoNCiAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLm90aGVycy52YWx1ZSwgIlNsb3ctZG93biIpIGFuZCBzbG93ZWRfZG93bl92YWx1ZSA8IDEwMCB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgc2l6ZV9iYXIgPSBzbG93ZWRfZG93bl92YWx1ZSAqIDk4IC8gMTAwDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChYIC8gMiAsIFkgLyAyICAqIDAuNiAtIDE1ICwgMjU1LCAyNTUsIDI1NSwgMjU1LCAiYyIsIDAsICItIHNsb3dlZCBkb3duIC0iKQ0KICAgICAgICAgICAgICAgIGN0eC5tX3JlbmRlcjpnbG93X21vZHVsZShYIC8gMiAtIDIgLSAobWF0aC5mbG9vcihzaXplX2JhcikgLyAyKSwgWSAvIDIgICogMC42LG1hdGguZmxvb3Ioc2l6ZV9iYXIpLDQsIDEwLDIse3IsZyxiLDE4MH0sIHtyLGcsYiwyNTV9KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIH0NCg0KICAgIGN0eC5jbGFudGFnID0gew0KICAgICAgICBydW4gPSBmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBjdXIgPSBtYXRoLmZsb29yKGdsb2JhbHMudGlja2NvdW50KCkgLyAzMCkgJSAjY2xhbnRhZ3MNCiAgICAgICAgICAgIGxvY2FsIGNsYW50YWcgPSBjbGFudGFnc1tjdXIrMV0NCiAgICAgICAgDQogICAgICAgICAgICBpZiBjbGFudGFnIH49IGNsYW50YWdfcHJldiB0aGVuDQogICAgICAgICAgICAgICAgY2xhbnRhZ19wcmV2ID0gY2xhbnRhZw0KICAgICAgICAgICAgICAgIGlmIF91aS5taXNjLmNsYW50YWcudmFsdWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZXRfY2xhbl90YWcoY2xhbnRhZykNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZXRfY2xhbl90YWcoIiIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LmFuaW1zID0gew0KICAgICAgICBydW4gPSBmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2FsaXZlKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpIHRoZW4NCiAgICAgICAgICAgICAgICBlbmRfdGltZSA9IDANCiAgICAgICAgICAgICAgICBncm91bmRfdGlja3MgPSAwDQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICBlbmQNCiAgICAgICAgDQogICAgICAgICAgICBpZiBmdW5jcy5jb250YWlucyhfdWkubWlzYy5hbmltcy52YWx1ZSwicGl0Y2ggMCIpIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBvbl9ncm91bmQgPSBiaXQuYmFuZChlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZkZsYWdzIiksIDEpDQogICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIG9uX2dyb3VuZCA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ3JvdW5kX3RpY2tzID0gZ3JvdW5kX3RpY2tzICsgMQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZ3JvdW5kX3RpY2tzID0gMA0KICAgICAgICAgICAgICAgICAgICBlbmRfdGltZSA9IGdsb2JhbHMuY3VydGltZSgpICsgMQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAgZ3JvdW5kX3RpY2tzID4gNSBhbmQgZW5kX3RpbWUgKyAwLjUgPiBnbG9iYWxzLmN1cnRpbWUoKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAwLjUsIDEyKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIA0KICAgICAgICAgICAgaWYgZnVuY3MuY29udGFpbnMoX3VpLm1pc2MuYW5pbXMudmFsdWUsInJldmVyc2VkIGxlZ3MiKSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWF0aF9yYW5kb21pemVkID0gbWF0aC5yYW5kb20oMSwyKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICB1aS5zZXQodWkucmVmZXJlbmNlKCJBQSIsICJPdGhlciIsICJMZWcgbW92ZW1lbnQiKSwgbWF0aF9yYW5kb21pemVkID09IDEgYW5kICJBbHdheXMgc2xpZGUiIG9yICJOZXZlciBzbGlkZSIpDQogICAgICAgICAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDgsIDApDQogICAgICAgICAgICBlbmQNCiAgICAgICAgDQogICAgICAgICAgICBpZiBmdW5jcy5jb250YWlucyhfdWkubWlzYy5hbmltcy52YWx1ZSwic3RhdGljIGxlZ3MiKSB0aGVuDQogICAgICAgICAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDEsIDYpIA0KICAgICAgICAgICAgZW5kDQogICAgICAgIA0KICAgICAgICAgICAgaWYgZnVuY3MuY29udGFpbnMoX3VpLm1pc2MuYW5pbXMudmFsdWUsICJsZWcgYnJha2VyIikgdGhlbg0KICAgICAgICAgICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCBjbGllbnQucmFuZG9tX2Zsb2F0KDAuNzUsIDEpLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldCh1aS5yZWZlcmVuY2UoJ0FBJywgJ090aGVyJywgJ0xlZyBtb3ZlbWVudCcpLCBjbGllbnQucmFuZG9tX2ludCgxLCAyKSA9PSAxIGFuZCAiT2ZmIiBvciAiQWx3YXlzIHNsaWRlIikNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBmdW5jcy5jb250YWlucyhfdWkubWlzYy5hbmltcy52YWx1ZSwgInBlcmZlY3QiKSB0aGVuDQogICAgICAgICAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIG1hdGgucmFuZG9tKDAsIDEwKS8xMCwgMykNCiAgICAgICAgICAgICAgICBlbnRpdHkuc2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgbWF0aC5yYW5kb20oMCwgMTApLzEwLCA3KQ0KICAgICAgICAgICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCBtYXRoLnJhbmRvbSgwLCAxMCkvMTAsIDYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LmRlYnVnX3BhbmVsID0gew0KICAgICAgICByZW5kZXIgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBpZiB1aS5pc19tZW51X29wZW4oKSBhbmQgX3VpLnZpc3VhbHMuZW5hYmxlLnZhbHVlIGFuZCBfdWkudmlzdWFscy5kZWJ1Z19wYW5lbDpnZXQoKSB+PSAiT2ZmIiB0aGVuDQogICAgICAgICAgICAgICAgY3R4Lm5vdGlmeS5yZW5kZXJfcmVjdF9vdXRsaW5lKGRlYnVnX3Bvcy5wb3NfeCwgZGVidWdfcG9zLnBvc195LCBkZWJ1Z19wb3Muc2l6ZV93LCBkZWJ1Z19wb3Muc2l6ZV9oLCAyNTUsMjU1LDI1NSwyNTUpDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgaWYgY2xpZW50LmtleV9zdGF0ZSgweDAxKSBhbmQgdWkuaXNfbWVudV9vcGVuKCkgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1vdXNlX3BvcyA9IHsgdWkubW91c2VfcG9zaXRpb24oKSB9DQogICAgICAgICAgICAgICAgaWYgZnVuY3MuaW50ZXJzZWN0KGRlYnVnX3Bvcy5wb3NfeCwgZGVidWdfcG9zLnBvc195LCBkZWJ1Z19wb3Muc2l6ZV93LCBkZWJ1Z19wb3Muc2l6ZV9oKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGRlYnVnX2hvdmVyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBkZWJ1Z19wb3MucG9zX3ggPSBtb3VzZV9wb3NbMV0gLSBkZWJ1Z19wb3Muc2l6ZV93IC8yIA0KICAgICAgICAgICAgICAgICAgICBkZWJ1Z19wb3MucG9zX3kgPSBtb3VzZV9wb3NbMl0gLSBkZWJ1Z19wb3Muc2l6ZV9oIC8yDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZGVidWdfaG92ZXIgPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgIGxvY2FsIGxvY2FsX3BsYXllciA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICAgICAgICAgIGlmIGxvY2FsX3BsYXllciA9PSBuaWwgdGhlbiByZXR1cm4gZW5kDQogICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2FsaXZlKGxvY2FsX3BsYXllcikgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAgICAgICAgIGxvY2FsIHIsZyxiLGEgPSBfdWkudmlzdWFscy5lbmFibGU6Z2V0X2NvbG9yKCkNCg0KICAgICAgICAgICAgaWYgX3VpLnZpc3VhbHMuZGVidWdfcGFuZWw6Z2V0KCkgPT0gIk1vZGVybiIgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIHRleHQgPSAiaW50ZXJpdHVzICBbIi4uZXVwaGVtaWEuYnVpbGQuLiJdICB8ICAiLi5ldXBoZW1pYS51c2VybmFtZS4uIiAgfCAgIi4uY3R4LndhdGVybWFyay5yb3VuZChjbGllbnQubGF0ZW5jeSgpICogMTAwMCwgMCkuLiJtcyINCiAgICAgICAgICAgICAgICBsb2NhbCB3aWR0aCA9IHZlY3RvcihyZW5kZXJlci5tZWFzdXJlX3RleHQoIiIsdGV4dCkpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIuZ3JhZGllbnQoZGVidWdfcG9zLnBvc194LCBkZWJ1Z19wb3MucG9zX3ksIGRlYnVnX3Bvcy5zaXplX3cgLyAyLCB3aWR0aC55ICsgNSwgMCwwLDAsMCwgMCwwLDAsMTQwLCB0cnVlKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdyYWRpZW50KGRlYnVnX3Bvcy5wb3NfeCArIGRlYnVnX3Bvcy5zaXplX3cgLyAyLCBkZWJ1Z19wb3MucG9zX3ksIGRlYnVnX3Bvcy5zaXplX3cgLyAyLCB3aWR0aC55ICsgNSwgMCwwLDAsMTQwLCAwLDAsMCwwLCB0cnVlKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdyYWRpZW50KGRlYnVnX3Bvcy5wb3NfeCArIGRlYnVnX3Bvcy5zaXplX3cgLyAyLCBkZWJ1Z19wb3MucG9zX3kgKyB3aWR0aC55ICsgNiwgZGVidWdfcG9zLnNpemVfdyAvIDIsIDEsIHIsZyxiLDI1NSwgcixnLGIsMCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICByZW5kZXJlci5ncmFkaWVudChkZWJ1Z19wb3MucG9zX3gsIGRlYnVnX3Bvcy5wb3NfeSArIHdpZHRoLnkgKyA2LCBkZWJ1Z19wb3Muc2l6ZV93IC8gMiwgMSwgcixnLGIsMCwgcixnLGIsMjU1LCB0cnVlKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoZGVidWdfcG9zLnBvc194ICsgNSwgZGVidWdfcG9zLnBvc195ICsgNCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAiLSIsIDAsIHN0cmluZy51cHBlcih0ZXh0KSkNCg0KICAgICAgICAgICAgICAgIC0tb3RoZXINCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KGRlYnVnX3Bvcy5wb3NfeCArIDUsIGRlYnVnX3Bvcy5wb3NfeSArIHdpZHRoLnkgKyA4LCAyNTUsIDI1NSwgMjU1LCAyNTUsICItIiwgMCwgIi0gQ09ORElUSU9OOiAiLi5zdHJpbmcudXBwZXIoY3R4LmhlbHBzLmdldF9zdGF0ZV9kZWZlbnNpdmUoY3R4LmhlbHBzLnNwZWVkKCkpKSkNCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KGRlYnVnX3Bvcy5wb3NfeCArIDUsIGRlYnVnX3Bvcy5wb3NfeSArIHdpZHRoLnkgKyAxNiwgMjU1LCAyNTUsIDI1NSwgMjU1LCAiLSIsIDAsICItIENIT0tFOiAiLi5zdHJpbmcudXBwZXIoZ2xvYmFscy5jaG9rZWRjb21tYW5kcygpKSkNCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KGRlYnVnX3Bvcy5wb3NfeCArIDUsIGRlYnVnX3Bvcy5wb3NfeSArIHdpZHRoLnkgKyAyNCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAiLSIsIDAsICItIEVYUExPSVQgQ0hBUkdFOiAiLi5zdHJpbmcudXBwZXIoYW50aWFpbV9mdW5jcy5nZXRfdGlja2Jhc2Vfc2hpZnRpbmcoKSkpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChkZWJ1Z19wb3MucG9zX3ggKyA1LCBkZWJ1Z19wb3MucG9zX3kgKyB3aWR0aC55ICsgMzIsIDI1NSwgMjU1LCAyNTUsIDI1NSwgIi0iLCAwLCAiLSBERVNZTkM6ICIuLnN0cmluZy51cHBlcihtYXRoLmZsb29yKGFudGlhaW1fZnVuY3MuZ2V0X2Rlc3luYygxKSkpKQ0KICAgICAgICAgICAgZWxzZWlmIF91aS52aXN1YWxzLmRlYnVnX3BhbmVsOmdldCgpID09ICJEZWZhdWx0IiB0aGVuDQogICAgICAgICAgICAgICAgLS0qIG1hdGguYWJzKG1hdGguY29zKGdsb2JhbHMuY3VydGltZSgpKjEuNSkpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChkZWJ1Z19wb3MucG9zX3ggKyA4LCBkZWJ1Z19wb3MucG9zX3ksIDI1NSwgMjU1LCAyNTUsIDI1NSwgIiIsIDAsICJpbnRlcml0dXMgLSAiLi5ldXBoZW1pYS51c2VybmFtZSkNCiAgICAgICAgICAgICAgICByZW5kZXJlci50ZXh0KGRlYnVnX3Bvcy5wb3NfeCArIDgsIGRlYnVnX3Bvcy5wb3NfeSArIDksIDI1NSwgMjU1LCAyNTUsIDI1NSwgIiIsIDAsICJ2ZXJzaW9uOiBcYSIuLmZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLDI0MCAqIG1hdGguYWJzKG1hdGguY29zKGdsb2JhbHMuY3VydGltZSgpKjIpKSkuLmV1cGhlbWlhLmJ1aWxkKQ0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoZGVidWdfcG9zLnBvc194ICsgOCwgZGVidWdfcG9zLnBvc195ICsgMTgsIDI1NSwgMjU1LCAyNTUsIDI1NSwgIiIsIDAsICJleHBsb2l0IGNoYXJnZTogIi4uIGFudGlhaW1fZnVuY3MuZ2V0X3RpY2tiYXNlX3NoaWZ0aW5nKCkpDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudGV4dChkZWJ1Z19wb3MucG9zX3ggKyA4LCBkZWJ1Z19wb3MucG9zX3kgKyAyNywgMjU1LCAyNTUsIDI1NSwgMjU1LCAiIiwgMCwgImRlc3luYyBhbW91bnQ6ICIuLiBtYXRoLmZsb29yKGFudGlhaW1fZnVuY3MuZ2V0X2Rlc3luYygxKSkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LmFudGlicnV0ZWZvcmNlID0gew0KICAgICAgICB2ZWN0b3IzX2Rpc3RhbmNlID0gZnVuY3Rpb24oeDEsIHkxLCB6MSwgeDIsIHkyLCB6MikNCiAgICAgICAgICAgIHJldHVybiBtYXRoLnNxcnQoKHgxIC0geDIpXjIgKyAoeTEgLSB5MileMiArICh6MSAtIHoyKV4yKQ0KICAgICAgICBlbmQsDQogICAgICAgIGNsb3Nlc3RfcG9pbnRfb25fcmF5ID0gZnVuY3Rpb24odHgsIHR5LCB0eiwgc3RhcnR4LCBzdGFydHksIHN0YXJ0eiwgZW5keCwgZW5keSwgZW5keikNCiAgICAgICAgICAgIGxvY2FsIHRveCwgdG95LCB0b3ogPSB0eCAtIHN0YXJ0eCwgdHkgLSBzdGFydHksIHR6IC0gc3RhcnR6DQogICAgICAgICAgICBsb2NhbCBkaXJ4LCBkaXJ5LCBkaXJ6ID0gZW5keCAtIHN0YXJ0eCwgZW5keSAtIHN0YXJ0eSwgZW5keiAtIHN0YXJ0eg0KICAgICAgICAgICAgbG9jYWwgbGVuZ3RoID0gbWF0aC5zcXJ0KGRpcnheMiArIGRpcnleMiArIGRpcnpeMikNCiAgICAgICAgICAgIGRpcngsIGRpcnksIGRpcnogPSBkaXJ4IC8gbGVuZ3RoLCBkaXJ5IC8gbGVuZ3RoLCBkaXJ6IC8gbGVuZ3RoDQogICAgICAgICAgICBsb2NhbCByYW5nZV9hbG9uZyA9IGRpcnggKiB0b3ggKyBkaXJ5ICogdG95ICsgZGlyeiAqIHRveg0KICAgICAgICAgICAgaWYgcmFuZ2VfYWxvbmcgPCAwIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnR4LCBzdGFydHksIHN0YXJ0eg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiByYW5nZV9hbG9uZyA+IGxlbmd0aCB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIGVuZHgsIGVuZHksIGVuZHoNCiAgICAgICAgICAgIGVuZAkNCiAgICAgICAgICAgIHJldHVybiBzdGFydHggKyBkaXJ4ICogcmFuZ2VfYWxvbmcsIHN0YXJ0eSArIGRpcnkgKiByYW5nZV9hbG9uZywgc3RhcnR6ICsgZGlyeiAqIHJhbmdlX2Fsb25nDQogICAgICAgIGVuZCwNCiAgICAgICAgcmVzZXQgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBpZiBub3QgX3VpLmFudGlfYmYuZW5hYmxlLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9IDANCiAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eSA9IG5pbA0KICAgICAgICAgICAgICAgIGFudGlfYmZfdGFibGUuZW50aXR5XzIgPSBuaWwNCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9PSAwIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgaWYgYW50aV9iZl9idWlsZGVyW2FudGlfYmZfdGFibGUubWlzc19jb3VudGVyXSA9PSBuaWwgdGhlbiBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9IDAgcmV0dXJuIGVuZA0KDQogICAgICAgICAgICBhbnRpX2JmX3RhYmxlLnJlY29yZGVkX2VudCA9IGFudGlfYmZfdGFibGUuZW50aXR5XzINCg0KICAgICAgICAgICAgbG9jYWwgcixnLGIsYSA9IF91aS52aXN1YWxzLmVuYWJsZTpnZXRfY29sb3IoKQ0KDQogICAgICAgICAgICBpZiBmdW5jcy5jb250YWlucyhfdWkuYW50aV9iZi5yZXNldGlmLnZhbHVlLCAiUmVhY2hlZCBUaW1lIExpbmUiKSB0aGVuDQogICAgICAgICAgICAgICAgaWYgbWF0aC5jZWlsKGFudGlfYmZfdGFibGUudGltZXJfYnJ1dGUgKyA5KSA9PSBtYXRoLmNlaWwoZ2xvYmFscy5jdXJ0aW1lKCkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXIgPSAwDQogICAgICAgICAgICAgICAgICAgIGFudGlfYmZfdGFibGUuZW50aXR5ID0gbmlsDQogICAgICAgICAgICAgICAgICAgIGFudGlfYmZfdGFibGUuZW50aXR5XzIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHlfY2hhbmdlZCA9IGZhbHNlDQoNCiAgICAgICAgICAgICAgICAgICAgbmV3X25vdGlmeShzdHJpbmcuZm9ybWF0KCJcYSVzQW50aS1CcnV0ZVxhRkZGRkZGRkYgcmVzZXR0ZWQgZHVlIHRvIFxhJXNyZWFjaGVkIHRpbWUtbGluZSIsIGZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLDI1NSksIGZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLDI1NSkpLCByLGcsYiwyNTUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgaWYgZnVuY3MuY29udGFpbnMoX3VpLmFudGlfYmYucmVzZXRpZi52YWx1ZSwgIlRhcmdldCBEZWF0aCIpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2FsaXZlKGFudGlfYmZfdGFibGUuZW50aXR5KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGFudGlfYmZfdGFibGUubWlzc19jb3VudGVyID0gMA0KICAgICAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eSA9IG5pbA0KICAgICAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eV8yID0gbmlsDQogICAgICAgICAgICAgICAgICAgIGFudGlfYmZfdGFibGUuZW50aXR5X2NoYW5nZWQgPSBmYWxzZQ0KDQogICAgICAgICAgICAgICAgICAgIG5ld19ub3RpZnkoc3RyaW5nLmZvcm1hdCgiXGElc0FudGktQnJ1dGVcYUZGRkZGRkZGIHJlc2V0dGVkIGR1ZSB0byBcYSVzdGFyZ2V0IGRlYXRoIiwgZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KSwgZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KSksIHIsZyxiLDI1NSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBhbnRpX2JmX3RhYmxlLm1heF9waGFzZSA8IGFudGlfYmZfdGFibGUubWlzc19jb3VudGVyIHRoZW4NCiAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9IDANCiAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eSA9IG5pbA0KICAgICAgICAgICAgICAgIGFudGlfYmZfdGFibGUuZW50aXR5XzIgPSBuaWwNCiAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eV9jaGFuZ2VkID0gZmFsc2UNCg0KICAgICAgICAgICAgICAgIG5ld19ub3RpZnkoc3RyaW5nLmZvcm1hdCgiXGElc0FudGktQnJ1dGVcYUZGRkZGRkZGIHJlc2V0dGVkIGR1ZSB0byBcYSVzcmVhY2ggbWF4IGNhcGFjaXR5IiwgZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KSwgZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KSksIHIsZyxiLDI1NSkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA+IDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIG5vdCBhbnRpX2JmX2J1aWxkZXJbYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXJdLmVuYWJsZWQudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9IDANCiAgICAgICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHkgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHlfMiA9IG5pbA0KICAgICAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eV9jaGFuZ2VkID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQsDQogICAgICAgIHJlc2V0MiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIHIsZyxiLGEgPSBfdWkudmlzdWFscy5lbmFibGU6Z2V0X2NvbG9yKCkNCg0KICAgICAgICAgICAgaWYgbm90IF91aS5hbnRpX2JmLmVuYWJsZS52YWx1ZSB0aGVuIHJldHVybiBlbmQNCg0KICAgICAgICAgICAgYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXIgPSAwDQogICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eSA9IG5pbA0KICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHlfMiA9IG5pbA0KICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHlfY2hhbmdlZCA9IGZhbHNlDQoNCiAgICAgICAgICAgIG5ld19ub3RpZnkoc3RyaW5nLmZvcm1hdCgiXGElc0FudGktQnJ1dGVcYUZGRkZGRkZGIHJlc2V0dGVkIiwgZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KSksIHIsZyxiLDI1NSkNCiAgICAgICAgZW5kLA0KICAgICAgICBydW4gPSBmdW5jdGlvbihlKQ0KICAgICAgICAgICAgaWYgbm90IF91aS5hbnRpX2JmLmVuYWJsZS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXIgPSAwDQogICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHkgPSBuaWwNCiAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLmVudGl0eV8yID0gbmlsDQogICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHlfY2hhbmdlZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgbG9jYWwgcixnLGIsYSA9IF91aS52aXN1YWxzLmVuYWJsZTpnZXRfY29sb3IoKQ0KDQogICAgICAgICAgICBpZiBlbnRpdHkuaXNfYWxpdmUoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSkgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS5hbnRpX2JmLnN0YXRlLnZhbHVlLCBjdHguaGVscHMuZ2V0X3N0YXRlX2RlZmVuc2l2ZShjdHguaGVscHMuc3BlZWQoKSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbWF0aC5hYnMoYW50aV9iZl90YWJsZS50aW1lcl9icnV0ZSAtIGdsb2JhbHMuY3VydGltZSgpKSA+IDAuMjUwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGVudCA9IGNsaWVudC51c2VyaWRfdG9fZW50aW5kZXgoZS51c2VyaWQpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2Rvcm1hbnQoZW50KSBhbmQgZW50aXR5LmlzX2VuZW15KGVudCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGhlYWR4LCBoZWFkeSwgaGVhZHogPSBlbnRpdHkuaGl0Ym94X3Bvc2l0aW9uKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksIDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZXlleCwgZXlleSwgZXlleiA9IGVudGl0eS5nZXRfb3JpZ2luKGVudCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleWV6ID0gZXlleiArIDY0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgeCwgeSwgeiA9IGN0eC5hbnRpYnJ1dGVmb3JjZS5jbG9zZXN0X3BvaW50X29uX3JheShoZWFkeCwgaGVhZHksIGhlYWR6LCBleWV4LCBleWV5LCBleWV6LCBlLngsIGUueSwgZS56KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN0eC5hbnRpYnJ1dGVmb3JjZS52ZWN0b3IzX2Rpc3RhbmNlKHgsIHksIHosIGhlYWR4LCBoZWFkeSwgaGVhZHopIDwgODggdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLm1pc3NfY291bnRlciA9IGFudGlfYmZfdGFibGUubWlzc19jb3VudGVyICsgMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnRpX2JmX3RhYmxlLnRpbWVyX2JydXRlID0gZ2xvYmFscy5jdXJ0aW1lKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHkgPSBlbnQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW50aV9iZl90YWJsZS5lbnRpdHlfMiA9IGVudA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfbm90aWZ5KHN0cmluZy5mb3JtYXQoIlxhJXNBbnRpLUJydXRlXGFGRkZGRkZGRiBDaGFuZ2VkIGR1ZSB0b1xhJXMgJXNcYUZGRkZGRkZGJ3Mgc2hvdCBbXGElcyAlc1xhRkZGRkZGRkYgXSIsIGZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLDI1NSksIGZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLDI1NSksIGVudGl0eS5nZXRfcGxheWVyX25hbWUoZW50KSwgZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KSwgYW50aV9iZl90YWJsZS5taXNzX2NvdW50ZXIpLCByLGcsYiwyNTUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfQ0KDQogICAgY3R4LmZhc3RfbGFkID0gew0KICAgICAgICBydW4gPSBmdW5jdGlvbihlKQ0KICAgICAgICAgICAgaWYgX3VpLm1pc2MuZmFzdF9sYWRkZXIudmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGxvY2FsX3BsYXllciA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICAgICAgICAgICAgICBsb2NhbCBwaXRjaCwgeWF3ID0gY2xpZW50LmNhbWVyYV9hbmdsZXMoKQ0KICAgICAgICAgICAgICAgIGlmIGVudGl0eS5nZXRfcHJvcChsb2NhbF9wbGF5ZXIsICJtX01vdmVUeXBlIikgPT0gOSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGUueWF3ID0gbWF0aC5mbG9vcihlLnlhdyArIDAuNSkNCiAgICAgICAgICAgICAgICAgICAgZS5yb2xsID0gMA0KICAgICAgICAgICAgICAgICAgICBpZiBlLmZvcndhcmRtb3ZlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZS5waXRjaCA9IDg5DQogICAgICAgICAgICAgICAgICAgICAgICBlLnlhdyA9IGUueWF3ICsgMTgwDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXRoLmFicygxODApID4gMCBhbmQgbWF0aC5hYnMoMTgwKSA8IDE4MCBhbmQgZS5zaWRlbW92ZSB+PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnlhdyA9IGUueWF3IC0gdWkuZ2V0KDE4MCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWF0aC5hYnMoMTgwKSA9PSAxODAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGUuc2lkZW1vdmUgPCAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pbl9tb3ZlbGVmdCA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pbl9tb3ZlcmlnaHQgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZS5zaWRlbW92ZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluX21vdmVsZWZ0ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluX21vdmVyaWdodCA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiBlLmZvcndhcmRtb3ZlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwaXRjaCA8IDQ1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnBpdGNoID0gODkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluX21vdmVyaWdodCA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluX21vdmVsZWZ0ID0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaW5fZm9yd2FyZCA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluX2JhY2sgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZS5zaWRlbW92ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS55YXcgPSBlLnlhdyArIDkwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZS5zaWRlbW92ZSA8IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnlhdyA9IGUueWF3ICsgMTUwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZS5zaWRlbW92ZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnlhdyA9IGUueWF3ICsgMzANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCANCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGUuZm9yd2FyZG1vdmUgPCAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGUucGl0Y2ggPSA4OQ0KICAgICAgICAgICAgICAgICAgICAgICAgZS5pbl9tb3ZlbGVmdCA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgIGUuaW5fbW92ZXJpZ2h0ID0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgZS5pbl9mb3J3YXJkID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZS5pbl9iYWNrID0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZS5zaWRlbW92ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnlhdyA9IGUueWF3ICsgOTANCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZS5zaWRlbW92ZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUueWF3ID0gZS55YXcgKyAxNTANCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZS5zaWRlbW92ZSA8IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUueWF3ID0gZS55YXcgKyAzMA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIH0NCg0KICAgIGN0eC5hbnRpYWltX2Fycm93cyA9IHsNCiAgICAgICAgcmVuZGVyID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgbWUgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2FsaXZlKG1lKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgIGRlc3luY190eXBlID0gZW50aXR5LmdldF9wcm9wKG1lLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAxMSkgKiAxMjAgLSA2MA0KICAgICAgICAgICAgZGVzeW5jX3NpZGUgPSBkZXN5bmNfdHlwZSA+IDAgYW5kIDEgb3IgLTENCiAgICAgICAgICAgIGxvY2FsIHZlbF9hZGFwID0gY3R4LmhlbHBzLnNwZWVkKCkgKiA0NSAvIDQ1MA0KICAgICAgICAgICAgbG9jYWwgcixnLGIsYSA9IF91aS52aXN1YWxzLmVuYWJsZTpnZXRfY29sb3IoKQ0KDQogICAgICAgICAgICBpZiBfdWkudmlzdWFscy5hbnRpYWltX2Fycm93cy52YWx1ZSB+PSAiT2ZmIiB0aGVuDQogICAgICAgICAgICAgICAgcmVuZGVyZXIudHJpYW5nbGUoWCAvIDIgKyA1NSArIHZlbF9hZGFwLCBZIC8gMiArIDIsIFggLyAyICsgNDIgKyB2ZWxfYWRhcCwgWSAvIDIgLSA3LCBYIC8gMiArIDQyICsgdmVsX2FkYXAsIFkgLyAyICsgMTEsIA0KICAgICAgICAgICAgICAgIF91aS5rZXliaW5kcy5tYW51YWxfcmlnaHQ6Z2V0KCkgYW5kIHIgb3IgMjUsIA0KICAgICAgICAgICAgICAgIF91aS5rZXliaW5kcy5tYW51YWxfcmlnaHQ6Z2V0KCkgYW5kIGcgb3IgMjUsIA0KICAgICAgICAgICAgICAgIF91aS5rZXliaW5kcy5tYW51YWxfcmlnaHQ6Z2V0KCkgYW5kIGIgb3IgMjUsIA0KICAgICAgICAgICAgICAgIF91aS5rZXliaW5kcy5tYW51YWxfcmlnaHQ6Z2V0KCkgYW5kIGEgb3IgMTYwKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICByZW5kZXJlci50cmlhbmdsZShYIC8gMiAtIDU1ICsgLXZlbF9hZGFwLCBZIC8gMiArIDIsIFggLyAyIC0gNDIgKyAtdmVsX2FkYXAsIFkgLyAyIC0gNywgWCAvIDIgLSA0MiArIC12ZWxfYWRhcCwgWSAvIDIgKyAxMSwgDQogICAgICAgICAgICAgICAgX3VpLmtleWJpbmRzLm1hbnVhbF9sZWZ0OmdldCgpIGFuZCByIG9yIDI1LCANCiAgICAgICAgICAgICAgICBfdWkua2V5YmluZHMubWFudWFsX2xlZnQ6Z2V0KCkgYW5kIGcgb3IgMjUsIA0KICAgICAgICAgICAgICAgIF91aS5rZXliaW5kcy5tYW51YWxfbGVmdDpnZXQoKSBhbmQgYiBvciAyNSwgDQogICAgICAgICAgICAgICAgX3VpLmtleWJpbmRzLm1hbnVhbF9sZWZ0OmdldCgpIGFuZCBhIG9yIDE2MCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZShYIC8gMiArIDM4ICsgdmVsX2FkYXAsIFkgLyAyIC0gNywgMiwgMTgsIA0KICAgICAgICAgICAgICAgIGRlc3luY19zaWRlID4gMCBhbmQgciBvciAyNSwNCiAgICAgICAgICAgICAgICBkZXN5bmNfc2lkZSA+IDAgYW5kIGcgb3IgMjUsDQogICAgICAgICAgICAgICAgZGVzeW5jX3NpZGUgPiAwIGFuZCBiIG9yIDI1LA0KICAgICAgICAgICAgICAgIGRlc3luY19zaWRlID4gMCBhbmQgYSBvciAxNjApDQogICAgICAgICAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKFggLyAyIC0gNDAgKyAtdmVsX2FkYXAsIFkgLyAyIC0gNywgMiwgMTgsCQkJDQogICAgICAgICAgICAgICAgZGVzeW5jX3NpZGUgPCAwIGFuZCByIG9yIDI1LA0KICAgICAgICAgICAgICAgIGRlc3luY19zaWRlIDwgMCBhbmQgZyBvciAyNSwNCiAgICAgICAgICAgICAgICBkZXN5bmNfc2lkZSA8IDAgYW5kIGIgb3IgMjUsDQogICAgICAgICAgICAgICAgZGVzeW5jX3NpZGUgPCAwIGFuZCBhIG9yIDE2MCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9DQoNCiAgICByZXR1cm4gY3R4DQplbmQpKCkNCg0KZnVuY3Rpb24gbmV3X25vdGlmeShzdHJpbmcsIHIsIGcsIGIsIGEpDQogICAgbG9jYWwgbm90aWZpY2F0aW9uID0gew0KICAgICAgICB0ZXh0ID0gc3RyaW5nLA0KICAgICAgICB0aW1lciA9IGdsb2JhbHMucmVhbHRpbWUoKSwNCiAgICAgICAgY29sb3IgPSB7IHIsIGcsIGIsIGEgfSwNCiAgICAgICAgYWxwaGEgPSAwLA0KICAgICAgICBmcmFjdGlvbiA9IDAsDQogICAgICAgIHRpbWVfbGVmdCA9IDANCiAgICB9DQoNCiAgICBpZiAjbm90aWZ5X2RhdGEgPT0gMCB0aGVuDQogICAgICAgIG5vdGlmaWNhdGlvbi55ID0gWSArIDIwDQogICAgZWxzZQ0KICAgICAgICBsb2NhbCBsYXN0Tm90aWZpY2F0aW9uID0gbm90aWZ5X2RhdGFbI25vdGlmeV9kYXRhXQ0KICAgICAgICBub3RpZmljYXRpb24ueSA9IGxhc3ROb3RpZmljYXRpb24ueSArIDIwIA0KICAgIGVuZA0KDQogICAgdGFibGUuaW5zZXJ0KG5vdGlmeV9kYXRhLCBub3RpZmljYXRpb24pDQplbmQNCg0KbG9jYWwgaGl0Z3JvdXBfbmFtZXMgPSB7ImdlbmVyaWMiLCAiaGVhZCIsICJjaGVzdCIsICJzdG9tYWNoIiwgImxlZnQgYXJtIiwgInJpZ2h0IGFybSIsICJsZWZ0IGxlZyIsICJyaWdodCBsZWciLCAibmVjayIsICI/IiwgImdlYXIifQ0KbG9jYWwgd2VhcG9uX3RvX3ZlcmIgPSB7IGtuaWZlID0gJ0tuaWZlZCcsIGhlZ3JlbmFkZSA9ICdOYWRlZCcsIGluZmVybm8gPSAnQnVybmVkJyB9DQoNCmxvY2FsIGZ1bmN0aW9uIGFpbV9oaXQoZSkNCiAgICBsb2NhbCBncm91cCA9IGhpdGdyb3VwX25hbWVzW2UuaGl0Z3JvdXAgKyAxXSBvciAiPyINCiAgICBsb2NhbCByLGcsYixhID0gX3VpLnZpc3VhbHMuZW5hYmxlOmdldF9jb2xvcigpDQoNCiAgICBpZiBmdW5jcy5jb250YWlucyhfdWkudmlzdWFscy5oaXRsb2dzLnZhbHVlLCAiSGl0IikgdGhlbg0KICAgICAgICBuZXdfbm90aWZ5KHN0cmluZy5mb3JtYXQoIlxhRkZGRkZGRkZIaXQgXGElcyVzXGFGRkZGRkZGRiBpbiB0aGUgXGElcyVzXGFGRkZGRkZGRiBmb3IgXGElcyVkXGFGRkZGRkZGRiBkYW1hZ2UgKCVkIGhlYWx0aCByZW1haW5pbmcpIiwgZnVuY3MucmdiYV90b19oZXgocixnLGIsMjU1KSwgZW50aXR5LmdldF9wbGF5ZXJfbmFtZShlLnRhcmdldCksIGZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLDI1NSksIGdyb3VwLCBmdW5jcy5yZ2JhX3RvX2hleChyLGcsYiwyNTUpLCBlLmRhbWFnZSwgZW50aXR5LmdldF9wcm9wKGUudGFyZ2V0LCAibV9pSGVhbHRoIikgKSwgcixnLGIsMjU1KQ0KICAgICAgICBmdW5jcy5tdWx0aWNvbG9yX2NvbnNvbGUoezIwMCwgMjAwLCAyMDAsICJbIn0sIHtyLGcsYiwgIisifSwgezIwMCwgMjAwLCAyMDAsICJdICJ9LCB7MjAwLCAyMDAsIDIwMCwgIkhpdCAifSwge3IsZyxiLCBlbnRpdHkuZ2V0X3BsYXllcl9uYW1lKGUudGFyZ2V0KX0sIHsyMDAsIDIwMCwgMjAwLCAiIGluIHRoZSAifSwge3IsZyxiLCBncm91cH0sIHsyMDAsIDIwMCwgMjAwLCAiIGZvciAifSwge3IsZyxiLCBlLmRhbWFnZX0sIHsyMDAsIDIwMCwgMjAwLCAiIGRhbWFnZSAoIn0sIHtyLGcsYiwgZW50aXR5LmdldF9wcm9wKGUudGFyZ2V0LCAibV9pSGVhbHRoIil9LCB7MjAwLCAyMDAsIDIwMCwgIiBoZWFsdGggcmVtYWluaW5nKSJ9KQ0KICAgIGVuZA0KZW5kDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soImFpbV9oaXQiLCBhaW1faGl0KQ0KDQpsb2NhbCBmdW5jdGlvbiBhaW1fbWlzcyhlKQ0KICAgIGxvY2FsIGdyb3VwID0gaGl0Z3JvdXBfbmFtZXNbZS5oaXRncm91cCArIDFdIG9yICI/Ig0KICAgIGxvY2FsIHIsZyxiLGEgPSBfdWkudmlzdWFscy5lbmFibGU6Z2V0X2NvbG9yKCkNCg0KICAgIGlmIGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLmhpdGxvZ3MudmFsdWUsICJNaXNzIikgdGhlbg0KICAgICAgICBuZXdfbm90aWZ5KHN0cmluZy5mb3JtYXQoIlxhRkZGRkZGRkZNaXNzZWQgXGElcyVzXGFGRkZGRkZGRiAoXGElcyVzXGFGRkZGRkZGRikgZHVlIHRvIFxhJXMlcyIsIGZ1bmNzLnJnYmFfdG9faGV4KHIsIGcsIGIsMjU1KSwgZW50aXR5LmdldF9wbGF5ZXJfbmFtZShlLnRhcmdldCksIGZ1bmNzLnJnYmFfdG9faGV4KHIsIGcsIGIsMjU1KSwgZ3JvdXAsIGZ1bmNzLnJnYmFfdG9faGV4KHIsIGcsIGIsMjU1KSwgZS5yZWFzb24pLCByLCBnLCBiLDI1NSkNCiAgICAgICAgZnVuY3MubXVsdGljb2xvcl9jb25zb2xlKHsyMDAsIDIwMCwgMjAwLCAiWyJ9LCB7cixnLGIsICItIn0sIHsyMDAsIDIwMCwgMjAwLCAiXSAifSwgezIwMCwgMjAwLCAyMDAsICJNaXNzZWQgIn0sIHtyLGcsYiwgZW50aXR5LmdldF9wbGF5ZXJfbmFtZShlLnRhcmdldCl9LCB7MjAwLCAyMDAsIDIwMCwgIiAoIn0sIHtyLGcsYiwgZ3JvdXB9LCB7MjAwLCAyMDAsIDIwMCwgIikgZHVlIHRvICJ9LCB7cixnLGIsIGUucmVhc29ufSkNCiAgICBlbmQNCmVuZA0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJhaW1fbWlzcyIsIGFpbV9taXNzKQ0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdwbGF5ZXJfaHVydCcsIGZ1bmN0aW9uKGUpDQoJaWYgbm90IGZ1bmNzLmNvbnRhaW5zKF91aS52aXN1YWxzLmhpdGxvZ3MudmFsdWUsICJOYWRlZCIpIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoJDQoJbG9jYWwgYXR0YWNrZXJfaWQgPSBjbGllbnQudXNlcmlkX3RvX2VudGluZGV4KGUuYXR0YWNrZXIpDQoNCglpZiBhdHRhY2tlcl9pZCA9PSBuaWwgb3IgYXR0YWNrZXJfaWQgfj0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSB0aGVuDQogICAgICAgIHJldHVybg0KICAgIGVuZA0KDQoJaWYgd2VhcG9uX3RvX3ZlcmJbZS53ZWFwb25dIH49IG5pbCB0aGVuDQogICAgICAgIGxvY2FsIHRhcmdldF9pZCA9IGNsaWVudC51c2VyaWRfdG9fZW50aW5kZXgoZS51c2VyaWQpDQoJCWxvY2FsIHRhcmdldF9uYW1lID0gZW50aXR5LmdldF9wbGF5ZXJfbmFtZSh0YXJnZXRfaWQpDQoNCiAgICAgICAgbG9jYWwgcixnLGIsYSA9IF91aS52aXN1YWxzLmVuYWJsZTpnZXRfY29sb3IoKQ0KICAgICAgICBuZXdfbm90aWZ5KHdlYXBvbl90b192ZXJiW2Uud2VhcG9uXS4uIiBcYSIuLmZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLGEpLi50YXJnZXRfbmFtZS4uIlxhRkZGRkZGRkYgZm9yIi4uIiBcYSIuLmZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLGEpLi5lLmRtZ19oZWFsdGguLiJcYUZGRkZGRkZGIGRhbWFnZSAoIi4uIlxhIi4uZnVuY3MucmdiYV90b19oZXgocixnLGIsYSkuLmUuaGVhbHRoLi4iXGFGRkZGRkZGRikiLCByLGcsYixhKQ0KICAgICAgICBmdW5jcy5tdWx0aWNvbG9yX2NvbnNvbGUoezIwMCwgMjAwLCAyMDAsICJbIn0sIHtyLGcsYiwgIn4ifSwgezIwMCwgMjAwLCAyMDAsICJdICJ9LCB7MjAwLCAyMDAsIDIwMCwgd2VhcG9uX3RvX3ZlcmJbZS53ZWFwb25dfSwgezIwMCwyMDAsMjAwLCAiICJ9LCB7cixnLGIsIHRhcmdldF9uYW1lfSwgezIwMCwgMjAwLCAyMDAsICIgZm9yICJ9LCB7cixnLGIsIGUuZG1nX2hlYWx0aH0sIHsyMDAsIDIwMCwgMjAwLCAiIGRhbWFnZSAoIn0sIHtyLGcsYiwgZS5oZWFsdGh9LCB7MjAwLDIwMCwyMDAsICIpIn0pDQoJZW5kDQplbmQpDQoNCmxvY2FsIGZ1bmN0aW9uIGFpbV9maXJlKGUpDQogICAgbG9jYWwgZmxhZ3MgPSB7DQogICAgICAgIGUudGVsZXBvcnRlZCBhbmQgIlQiIG9yICIiLA0KICAgICAgICBlLmludGVycG9sYXRlZCBhbmQgIkkiIG9yICIiLA0KICAgICAgICBlLmV4dHJhcG9sYXRlZCBhbmQgIkUiIG9yICIiLA0KICAgICAgICBlLmJvb3N0ZWQgYW5kICJCIiBvciAiIiwNCiAgICAgICAgZS5oaWdoX3ByaW9yaXR5IGFuZCAiSCIgb3IgIiINCiAgICB9DQoNCiAgICBsb2NhbCBncm91cCA9IGhpdGdyb3VwX25hbWVzW2UuaGl0Z3JvdXAgKyAxXSBvciAiPyINCiAgICBsb2NhbCByLGcsYixhID0gX3VpLnZpc3VhbHMuZW5hYmxlOmdldF9jb2xvcigpDQogICAgaWYgZnVuY3MuY29udGFpbnMoX3VpLnZpc3VhbHMuaGl0bG9ncy52YWx1ZSwgIkZpcmVkIikgdGhlbg0KICAgICAgICBuZXdfbm90aWZ5KHN0cmluZy5mb3JtYXQoDQogICAgICAgICAgICAiXGFGRkZGRkZGRkZpcmVkIGF0IFxhJXMlcyBcYUZGRkZGRkZGKFxhJXMlc1xhRkZGRkZGRkYpIGZvciBcYSVzJWQgXGFGRkZGRkZGRmRtZyAoIGNoYW5jZT1cYSVzJWQlJVxhRkZGRkZGRkYsIGZsYWdzPVxhJXMlcyBcYUZGRkZGRkZGKSIsDQogICAgICAgICAgICBmdW5jcy5yZ2JhX3RvX2hleChyLGcsYiwyNTUpLGVudGl0eS5nZXRfcGxheWVyX25hbWUoZS50YXJnZXQpLCBmdW5jcy5yZ2JhX3RvX2hleChyLGcsYixhKSwgZ3JvdXAsIGZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLGEpLCBlLmRhbWFnZSwNCiAgICAgICAgICAgIGZ1bmNzLnJnYmFfdG9faGV4KHIsZyxiLGEpLCBtYXRoLmZsb29yKGUuaGl0X2NoYW5jZSArIDAuNSksDQogICAgICAgICAgICBmdW5jcy5yZ2JhX3RvX2hleChyLGcsYixhKSwgdGFibGUuY29uY2F0KGZsYWdzKQ0KICAgICAgICApLCByLGcsYiwyNTUpDQogICAgICAgIGZ1bmNzLm11bHRpY29sb3JfY29uc29sZSh7MjAwLCAyMDAsIDIwMCwgIlsifSwge3IsZyxiLCAiLyJ9LCB7MjAwLCAyMDAsIDIwMCwgIl0gIn0sIHsyMDAsIDIwMCwgMjAwLCAiRmlyZWQgYXQgIn0sIHtyLGcsYiwgZW50aXR5LmdldF9wbGF5ZXJfbmFtZShlLnRhcmdldCl9LCB7MjAwLCAyMDAsIDIwMCwgIiAoIn0sIHtyLGcsYiwgZ3JvdXB9LCB7MjAwLCAyMDAsIDIwMCwgIikgZm9yICJ9LCB7cixnLGIsIGUuZGFtYWdlfSwgezIwMCwyMDAsMjAwLCAiIGRtZyJ9LCB7MjAwLDIwMCwyMDAsICIoIGNoYW5jZT0ifSwge3IsZyxiLCBtYXRoLmZsb29yKGUuaGl0X2NoYW5jZSArIDAuNSl9LCB7MjAwLDIwMCwyMDAsICIsIGZsYWdzPSJ9LCB7cixnLGIsIHRhYmxlLmNvbmNhdChmbGFncyl9LCB7MjAwLDIwMCwyMDAsICIgKSJ9KQ0KICAgIGVuZA0KDQplbmQNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygiYWltX2ZpcmUiLCBhaW1fZmlyZSkNCg0KLS1PTkxPQUQNCmNsaWVudC5leGVjKCJjbGVhciIpDQpjbGllbnQuY29sb3JfbG9nKDI1NSwgMjU1LCAyNTUsICJXZWxjb21lIHRvXDAiKQ0KY2xpZW50LmNvbG9yX2xvZygyNTUsIDExNSwgMTA1LCAiIGludGVyaXR1c1wwIikNCmNsaWVudC5jb2xvcl9sb2coMjU1LCAyNTUsIDI1NSwgIiwgIiAuLiBldXBoZW1pYS51c2VybmFtZSkNCg0KbmV3X25vdGlmeSgiV2VsY29tZSB0byBcYSIuLmZ1bmNzLnJnYmFfdG9faGV4KDI1NSwxMTUsMTA1LDI1NSkuLiJpbnRlcml0dXMgXGFGRkZGRkZGRiIuLmV1cGhlbWlhLnVzZXJuYW1lLCAyNTUsIDExNSwgMTA1LDI1NSkNCg0KbG9jYWwgV2ViaG9vayA9IGRpc2NvcmQubmV3KCJsb2FkIGluZm8iKQ0KbG9jYWwgUmljaEVtYmVkID0gZGlzY29yZC5uZXdFbWJlZCgpDQoNCldlYmhvb2s6c2V0VXNlcm5hbWUoIklOVEVSSVRVUyIpDQpSaWNoRW1iZWQ6c2V0VGl0bGUoIkx1YSBoYXMgYmVlbiBsb2FkZWQhIikNClJpY2hFbWJlZDphZGRGaWVsZCgiQnVpbGQ6ICIsICJgYGAiIC4uIGV1cGhlbWlhLmJ1aWxkIC4uICJgYGAiLCB0cnVlKQ0KUmljaEVtYmVkOmFkZEZpZWxkKCJVc2VybmFtZTogIiwgImBgYCIgLi4gZXVwaGVtaWEudXNlcm5hbWUgLi4gImBgYCIpDQpSaWNoRW1iZWQ6YWRkRmllbGQoIlRpbWU6ICIsICJgYGAiIC4uIGZ1bmNzLmNvbnZlcnRVbml4VGltZShjbGllbnQudW5peF90aW1lKCkpIC4uICJgYGAiKQ0KUmljaEVtYmVkOnNldENvbG9yKDE2NzQxMjI1KQ0KV2ViaG9vazpzZW5kKFJpY2hFbWJlZCkNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygic2V0dXBfY29tbWFuZCIsIGZ1bmN0aW9uKGNtZCkNCiAgICBjdHguYW50aWFpbS5ydW4oY21kKQ0KICAgIGN0eC5nZXRfZGVmZW5zaXZlLmdldCgpDQogICAgY3R4LmFudGlicnV0ZWZvcmNlLnJlc2V0KCkNCiAgICBjdHguZmFzdF9sYWQucnVuKGNtZCkNCg0KICAgIGlmIHVpX21lbnUuaXNfaG92ZXJlZCBvciBub3RpZnlfaG92ZXIgb3IgaW5kX2hvdmVyIG9yIGRlYnVnX2hvdmVyIHRoZW4NCiAgICAgICAgY21kLmluX2F0dGFjayA9IGZhbHNlDQogICAgZW5kDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInByZWRpY3RfY29tbWFuZCIsIGZ1bmN0aW9uKGUpDQogICAgbG9jYWwgdGlja19iYXNlID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX25UaWNrQmFzZSIpDQogICAgYWd1d25vID0gbWF0aC5hYnModGlja19iYXNlIC0gY2hlY2tlcikNCiAgICBjaGVja2VyID0gbWF0aC5tYXgodGlja19iYXNlLCBjaGVja2VyIG9yIDApDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInNodXRkb3duIiwgZnVuY3Rpb24oKQ0KICAgIGZ1bmNzLmhpZGVfc2tlZXRfYW50aWFpbV9kZWYoZmFsc2UpDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInBhaW50X3VpIiwgZnVuY3Rpb24oKQ0KICAgIGZ1bmNzLmhpZGVfc2tlZXRfYW50aWFpbV9kZWYoX3VpLmx1YS5lbmFibGVfbHVhLnZhbHVlKQ0KICAgIC0tIkFudGktYWltIiwgIkRlZmVuc2l2ZSIsICJWaXN1YWxzIiwgIk1pc2NlbGxhbmVvdXMiLCAiQ29uZmlnIg0KICAgIGlmIF91aS5sdWEuZW5hYmxlX2x1YS52YWx1ZSB0aGVuDQogICAgICAgIGN0eC5ub3RpZnkucmVuZGVyKCkNCg0KICAgICAgICBpZiBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpIH49IG5pbCB0aGVuIA0KICAgICAgICAgICAgLS1hbnRpX2JmX3RhYmxlLnBoYXNlID0gYW50aV9iZl9idWlsZGVyW2N0eC5oZWxwcy5nZXRfc3RhdGVfZGVmZW5zaXZlKGN0eC5oZWxwcy5zcGVlZCgpKV0ucGhhc2Vfc2xpZGVyLnZhbHVlIA0KICAgICAgICAgICAgLS1wcmludChhbnRpX2JmX3RhYmxlLnBoYXNlKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZCkNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicGFpbnQiLCBmdW5jdGlvbigpDQogICAgaWYgX3VpLmx1YS5lbmFibGVfbHVhLnZhbHVlIHRoZW4NCiAgICAgICAgY3R4LndhdGVybWFyay5yZW5kZXIoKQ0KICAgICAgICBjdHguaW5kaWNhdG9ycy5yZW5kZXIoKQ0KICAgICAgICBjdHguZGVmZW5zaXZlX2luZC5yZW5kZXIoKQ0KICAgICAgICBjdHguc2xvd2VkX2Rvd24ucmVuZGVyKCkNCiAgICAgICAgY3R4LmRlYnVnX3BhbmVsLnJlbmRlcigpDQogICAgICAgIGN0eC5hbnRpYWltX2Fycm93cy5yZW5kZXIoKQ0KICAgIGVuZA0KZW5kKQ0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJidWxsZXRfaW1wYWN0IiwgZnVuY3Rpb24oZSkNCiAgICBjdHguYW50aWJydXRlZm9yY2UucnVuKGUpDQplbmQpDQoNCnVpX2NvbmZpZ3MgPSB1aS5uZXdfbGlzdGJveCgiYWEiLCAiYW50aS1haW1ib3QgYW5nbGVzIiwgIkNvbmZpZ3MiLCAiIiksIGZ1bmN0aW9uKCkgDQogICAgcmV0dXJuDQplbmQNCnVpX2NvbmZpZ3NfbmFtZSA9IHVpLm5ld190ZXh0Ym94KCJhYSIsICJhbnRpLWFpbWJvdCBhbmdsZXMiLCAiQ29uZmlnIG5hbWUiLCAiIiksIGZ1bmN0aW9uKCkgDQogICAgcmV0dXJuIA0KZW5kDQp1aV9sb2FkX2NmZ3MgPSB1aS5uZXdfYnV0dG9uKCJhYSIsICJhbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGFmZjczNjlGRkxvYWQiLCBmdW5jdGlvbigpIGVuZCksIGZ1bmN0aW9uKCkgDQogICAgcmV0dXJuDQplbmQNCnVpX3NhdmVfY2ZncyA9IHVpLm5ld19idXR0b24oImFhIiwgImFudGktYWltYm90IGFuZ2xlcyIsICJcYWZmNzM2OUZGU2F2ZSIsIGZ1bmN0aW9uKCkgZW5kKSwgZnVuY3Rpb24oKSANCiAgICByZXR1cm4NCmVuZA0KdWlfZGVsZXRlX2NmZ3MgPSB1aS5uZXdfYnV0dG9uKCJhYSIsICJhbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGFmZjczNjlGRkRlbGV0ZSIsIGZ1bmN0aW9uKCkgZW5kKSwgZnVuY3Rpb24oKSANCiAgICByZXR1cm4NCmVuZA0KdWlfaW1wb3J0X2NmZ3MgPSB1aS5uZXdfYnV0dG9uKCJhYSIsICJhbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGFmZjczNjlGRkltcG9ydCBzZXR0aW5ncyIsIGZ1bmN0aW9uKCkgZW5kKQ0KdWlfZXhwb3J0X2NmZ3MgPSB1aS5uZXdfYnV0dG9uKCJhYSIsICJhbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGFmZjczNjlGRkV4cG9ydCBzZXR0aW5ncyIsIGZ1bmN0aW9uKCkgZW5kKQ0KdWlfc2hhcmVfY2ZncyA9IHVpLm5ld19idXR0b24oImFhIiwgImFudGktYWltYm90IGFuZ2xlcyIsICJcYWZmNzM2OUZGU2hhcmUgb24gZGlzY29yZCIsIGZ1bmN0aW9uKCkgc2hhcmVfY2ZnKCkgZW5kKQ0KdWkudXBkYXRlKHVpX2NvbmZpZ3MsIGN0eC5jZmdzLmdldGNvbmZpZ19saXN0KCkpDQp1aS5zZXRfY2FsbGJhY2sodWlfY29uZmlncywgZnVuY3Rpb24odmFsdWUpDQp1aS5zZXQodWlfY29uZmlnc19uYW1lLCBjdHguY2Zncy5nZXRjb25maWdfbGlzdCgpW3VpLmdldCh1aV9jb25maWdzKSsxXSkNCmVuZCkNCnVpLnNldF9jYWxsYmFjayh1aV9pbXBvcnRfY2ZncywgZnVuY3Rpb24oKQ0KICAgIGxvY2FsIHByb3RlY3RlZCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgY3R4LmNmZ3MuaW1wb3J0X2NvbmZpZygpDQogICAgZW5kDQoNCiAgICBpZiBwY2FsbChwcm90ZWN0ZWQpIHRoZW4NCiAgICAgICAgLS1wcmludCgiZWVlIikNCiAgICAgICAgbmV3X25vdGlmeSgiU3VjY2Vzc2Z1bGx5ISBJbXBvcnRlZCBzZXR0aW5ncyBmcm9tIGNsaXBib2FyZCIsIDI1NSwxMTUsMTA1LDI1NSkNCiAgICBlbHNlDQogICAgICAgIC0tcHJpbnQoImd1d25vICIpDQogICAgICAgIG5ld19ub3RpZnkoIkVycnJvciEgV2hpbGUgaW1wb3J0aW5nIGNmZyIsIDI1NSwxMTUsMTA1LDI1NSkNCiAgICBlbmQNCmVuZCkNCnVpLnNldF9jYWxsYmFjayh1aV9leHBvcnRfY2ZncywgZnVuY3Rpb24oKQ0KICAgIGxvY2FsIHByb3RlY3RlZCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgY3R4LmNmZ3MuZXhwb3J0X2NvbmZpZygpDQogICAgZW5kDQoNCiAgICBpZiBwY2FsbChwcm90ZWN0ZWQpIHRoZW4NCiAgICAgICAgbmV3X25vdGlmeSgiU3VjY2Vzc2Z1bGx5ISBFeHBvcnRlZCBzZXR0aW5ncyB0byBjbGlwYm9hcmQiLCAyNTUsMTE1LDEwNSwyNTUpDQogICAgZWxzZQ0KICAgICAgICBuZXdfbm90aWZ5KCJFcnJyb3IhIFdoaWxlIGV4cG9ydGluZyBjZmciLCAyNTUsMTE1LDEwNSwyNTUpDQogICAgZW5kDQplbmQpDQp1aS5zZXRfY2FsbGJhY2sodWlfc2F2ZV9jZmdzLCBmdW5jdGlvbigpDQogICAgbG9jYWwgbmFtZSA9IHVpLmdldCh1aV9jb25maWdzX25hbWUpDQogICAgaWYgbmFtZSA9PSAiIiB0aGVuIHJldHVybiBlbmQNCg0KICAgIGlmIG5hbWU6bWF0Y2goIlteJXddIikgfj0gbmlsIHRoZW4NCiAgICAgICAgLS0iaW52YWxpZCBjaGFycyINCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQoNCiAgICBsb2NhbCBwcm90ZWN0ZWQgPSBmdW5jdGlvbigpDQogICAgICAgIGN0eC5jZmdzLnNhdmVfY29uZmlnKG5hbWUpDQogICAgZW5kDQoNCiAgICBpZiBwY2FsbChwcm90ZWN0ZWQpIHRoZW4NCiAgICAgICAgbmV3X25vdGlmeSgiU3VjY2Vzc2Z1bGx5ISBTYXZlZCBzZXR0aW5ncyAoIi4ubmFtZS4uIikiLCAyNTUsMTE1LDEwNSwyNTUpDQogICAgZWxzZQ0KICAgICAgICBuZXdfbm90aWZ5KCJFcnJyb3IhIFdoaWxlIHNhdmluZyBjZmciLCAyNTUsMTE1LDEwNSwyNTUpDQogICAgZW5kDQogICAgdWkudXBkYXRlKHVpX2NvbmZpZ3MsIGN0eC5jZmdzLmdldGNvbmZpZ19saXN0KCkpDQplbmQpDQp1aS5zZXRfY2FsbGJhY2sodWlfbG9hZF9jZmdzLCBmdW5jdGlvbigpDQogICAgbG9jYWwgbmFtZSA9IHVpLmdldCh1aV9jb25maWdzX25hbWUpDQogICAgaWYgbmFtZSA9PSAiIiB0aGVuIHJldHVybiBlbmQNCg0KICAgIGlmIG5hbWU6bWF0Y2goIlteJXddIikgfj0gbmlsIHRoZW4NCiAgICAgICAgcHJpbnQoImludmFsaWQgY2hhcnMiKQ0KICAgICAgICByZXR1cm4NCiAgICBlbmQNCg0KICAgIGxvY2FsIHByb3RlY3RlZCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgY3R4LmNmZ3MubG9hZF9jb25maWcobmFtZSkNCiAgICBlbmQNCg0KICAgIGlmIHBjYWxsKHByb3RlY3RlZCkgdGhlbg0KICAgICAgICBuZXdfbm90aWZ5KCJTdWNjZXNzZnVsbHkhIExvYWRlZCBzZXR0aW5ncyAoIi4ubmFtZS4uIikiLCAyNTUsMTE1LDEwNSwyNTUpDQogICAgZWxzZQ0KICAgICAgICBuZXdfbm90aWZ5KCJFcnJyb3IhIFdoaWxlIGxvYWRpbmcgY2ZnIiwgMjU1LDExNSwxMDUsMjU1KQ0KICAgIGVuZA0KZW5kKQ0KdWkuc2V0X2NhbGxiYWNrKHVpX2RlbGV0ZV9jZmdzLCBmdW5jdGlvbigpDQogICAgbG9jYWwgbmFtZSA9IHVpLmdldCh1aV9jb25maWdzX25hbWUpDQogICAgaWYgbmFtZSA9PSAiIiB0aGVuIHJldHVybiBlbmQNCg0KICAgIGlmIGN0eC5jZmdzLmRlbGV0ZV9jb25maWcobmFtZSkgPT0gZmFsc2UgdGhlbg0KICAgICAgICB1aS51cGRhdGUodWlfY29uZmlncywgY3R4LmNmZ3MuZ2V0Y29uZmlnX2xpc3QoKSkNCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQoNCiAgICBsb2NhbCBwcm90ZWN0ZWQgPSBmdW5jdGlvbigpDQogICAgICAgIGN0eC5jZmdzLmRlbGV0ZV9jb25maWcobmFtZSkNCiAgICBlbmQNCg0KICAgIGlmIHBjYWxsKHByb3RlY3RlZCkgdGhlbg0KICAgICAgICB1aS51cGRhdGUodWlfY29uZmlncywgY3R4LmNmZ3MuZ2V0Y29uZmlnX2xpc3QoKSkNCiAgICAgICAgdWkuc2V0KHVpX2NvbmZpZ3MsICNjZmdfZGF0YS5wcmVzZXRzICsgI2RhdGFiYXNlLnJlYWQoY2ZnX2RhdGEuZGF0YWJhc2UuY29uZmlncykgLSAjZGF0YWJhc2UucmVhZChjZmdfZGF0YS5kYXRhYmFzZS5jb25maWdzKSkNCiAgICAgICAgbmV3X25vdGlmeSgiU3VjY2Vzc2Z1bGx5ISBkZWxldGVkIHRoZSBjb25maWciLCAyNTUsMTE1LDEwNSwyNTUpDQogICAgZWxzZQ0KICAgICAgICBuZXdfbm90aWZ5KCJGYWlsZWQgdG8gZGVsZXRlIHRoZSBjb25maWciLCAyNTUsMTE1LDEwNSwyNTUpDQogICAgZW5kDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInBhaW50X3VpIiwgZnVuY3Rpb24oKQ0KICAgIGlzX2FhX3RhYigpDQoNCiAgICBsb2NhbCB0ZXN0X3Zpc2liaWxpdHkgPSBfdWkubHVhLnRhYi52YWx1ZSA9PSAiQ29uZmlnIiBhbmQgX3VpLmx1YS5lbmFibGVfbHVhLnZhbHVlIGFuZCBfdWkuY2Zncy5jZmdzX3NlbGVjdC52YWx1ZSA9PSAiTG9jYWwiDQogICAgdWkuc2V0X3Zpc2libGUodWlfY29uZmlncywgdGVzdF92aXNpYmlsaXR5KQ0KICAgIHVpLnNldF92aXNpYmxlKHVpX2NvbmZpZ3NfbmFtZSwgdGVzdF92aXNpYmlsaXR5KQ0KICAgIHVpLnNldF92aXNpYmxlKHVpX2xvYWRfY2ZncywgdGVzdF92aXNpYmlsaXR5KQ0KICAgIHVpLnNldF92aXNpYmxlKHVpX3NhdmVfY2ZncywgdGVzdF92aXNpYmlsaXR5KQ0KICAgIHVpLnNldF92aXNpYmxlKHVpX2RlbGV0ZV9jZmdzLCB0ZXN0X3Zpc2liaWxpdHkpDQogICAgdWkuc2V0X3Zpc2libGUodWlfaW1wb3J0X2NmZ3MsIHRlc3RfdmlzaWJpbGl0eSkNCiAgICB1aS5zZXRfdmlzaWJsZSh1aV9leHBvcnRfY2ZncywgdGVzdF92aXNpYmlsaXR5KQ0KICAgIHVpLnNldF92aXNpYmxlKHVpX3NoYXJlX2NmZ3MsIHRlc3RfdmlzaWJpbGl0eSkNCg0KDQogICAgaWYgbm90IF91aS5taXNjLmFsdGVybmF0aXZlX3VpOmdldCgpIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgaWYgdWlfbWVudS5zZWxlY3RlZF90YWIgPT0gNiB0aGVuDQogICAgICAgIF91aS5sdWEudGFiOm92ZXJyaWRlKCJDb25maWciKQ0KICAgIGVsc2VpZiB1aV9tZW51LnNlbGVjdGVkX3RhYiA9PSA1IHRoZW4NCiAgICAgICAgX3VpLmx1YS50YWI6b3ZlcnJpZGUoIk1pc2NlbGxhbmVvdXMiKQ0KICAgIGVsc2VpZiB1aV9tZW51LnNlbGVjdGVkX3RhYiA9PSA0IHRoZW4NCiAgICAgICAgX3VpLmx1YS50YWI6b3ZlcnJpZGUoIlZpc3VhbHMiKQ0KICAgIGVsc2VpZiB1aV9tZW51LnNlbGVjdGVkX3RhYiA9PSAzIHRoZW4NCiAgICAgICAgX3VpLmx1YS50YWI6b3ZlcnJpZGUoIkFudGktQnJ1dGVmb3JjZSIpDQogICAgZWxzZWlmIHVpX21lbnUuc2VsZWN0ZWRfdGFiID09IDIgdGhlbg0KICAgICAgICBfdWkubHVhLnRhYjpvdmVycmlkZSgiRGVmZW5zaXZlIikNCiAgICBlbHNlaWYgdWlfbWVudS5zZWxlY3RlZF90YWIgPT0gMSB0aGVuDQogICAgICAgIF91aS5sdWEudGFiOm92ZXJyaWRlKCJBbnRpLWFpbSIpDQogICAgZW5kDQoNCiAgICByZW5kZXJfdGFicygpDQogICAgbmV3X3RhYigpDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soIm5ldF91cGRhdGVfZW5kIiwgZnVuY3Rpb24oKQ0KICAgIGN0eC5jbGFudGFnOnJ1bigpDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInByZV9yZW5kZXIiLCBmdW5jdGlvbigpDQogICAgY3R4LmFuaW1zOnJ1bigpDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ3JvdW5kX2VuZCcsIGZ1bmN0aW9uKCkNCgljdHguYW50aWJydXRlZm9yY2UucmVzZXQyKCkNCmVuZCkNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ3JvdW5kX3N0YXJ0JywgZnVuY3Rpb24oKQ0KCWN0eC5hbnRpYnJ1dGVmb3JjZS5yZXNldDIoKQ0KZW5kKQ0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygnY2xpZW50X2Rpc2Nvbm5lY3QnLCBmdW5jdGlvbigpDQoJY3R4LmFudGlicnV0ZWZvcmNlLnJlc2V0MigpDQplbmQpDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdsZXZlbF9pbml0JywgZnVuY3Rpb24oKQ0KCWN0eC5hbnRpYnJ1dGVmb3JjZS5yZXNldDIoKQ0KZW5kKQ0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygncGxheWVyX2Nvbm5lY3RfZnVsbCcsIGZ1bmN0aW9uKGUpIA0KCWlmIGNsaWVudC51c2VyaWRfdG9fZW50aW5kZXgoZS51c2VyaWQpID09IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkgdGhlbiBjdHguYW50aWJydXRlZm9yY2UucmVzZXQyKCkgZW5kIA0KZW5kKQ=="
}
